!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.vega=n.vega||{})}(this,function(n){"use strict";function t(n){var t,e,r,i,u,a,o,f,c=n.maxbins||20,s=n.base||10,l=Math.log(s),h=n.divide||[5,2],d=n.extent[0],p=n.extent[1],v=p-d;if(n.step)t=n.step;else if(n.steps){for(u=v/c,a=0,o=n.steps.length;a<o&&n.steps[a]<u;++a);t=n.steps[Math.max(0,a-1)]}else{for(e=Math.ceil(Math.log(c)/l),r=n.minstep||0,t=Math.max(r,Math.pow(s,Math.round(Math.log(v)/l)-e));Math.ceil(v/t)>c;)t*=s;for(a=0,o=h.length;a<o;++a)u=t/h[a],u>=r&&v/u<=c&&(t=u)}return u=Math.log(t),i=u>=0?0:~~(-u/l)+1,f=Math.pow(s,-i-1),(n.nice||void 0===n.nice)&&(d=Math.min(d,Math.floor(d/t+f)*t),p=Math.ceil(p/t)*t),{start:d,stop:p,step:t}}function e(n,t){var e,i=[],u=n.length,a=-1;if(null==t)for(;++a<u;)isNaN(e=r(n[a]))||i.push(e);else for(;++a<u;)isNaN(e=r(t(n[a],a,n)))||i.push(e);return i}function r(n){return null===n?NaN:+n}function i(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function u(n){return 1===n.length&&(n=a(n)),{left:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var u=r+i>>>1;n(t[u],e)<0?r=u+1:i=u}return r},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var u=r+i>>>1;n(t[u],e)>0?i=u:r=u+1}return r}}}function a(n){return function(t,e){return i(n(t),e)}}function o(n){return null===n?NaN:+n}function f(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((t-n)/e)),u=new Array(i);++r<i;)u[r]=n+r*e;return u}function c(n,t,e){var r=s(n,t,e);return f(Math.ceil(n/r)*r,Math.floor(t/r)*r+r/2,r)}function s(n,t,e){var r=Math.abs(t-n)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=Cs?i*=10:u>=Us?i*=5:u>=Ts&&(i*=2),t<n?-i:i}function l(n,t,e){if(null==e&&(e=o),r=n.length){if((t=+t)<=0||r<2)return+e(n[0],0,n);if(t>=1)return+e(n[r-1],r-1,n);var r,i=(r-1)*t,u=Math.floor(i),a=+e(n[u],u,n),f=+e(n[u+1],u+1,n);return a+(f-a)*(i-u)}}function h(n,t){var e,r,i=-1,u=n.length;if(null==t){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&r>e&&(e=r)}else{for(;++i<u;)if(null!=(r=t(n[i],i,n))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t(n[i],i,n))&&r>e&&(e=r)}return e}function d(n,t){var e,r=0,i=n.length,u=-1,a=i;if(null==t)for(;++u<i;)isNaN(e=o(n[u]))?--a:r+=e;else for(;++u<i;)isNaN(e=o(t(n[u],u,n)))?--a:r+=e;if(a)return r/a}function p(n,t){var e,r=[],u=n.length,a=-1;if(null==t)for(;++a<u;)isNaN(e=o(n[a]))||r.push(e);else for(;++a<u;)isNaN(e=o(t(n[a],a,n)))||r.push(e);return l(r.sort(i),.5)}function v(n){for(var t,e,r,i=n.length,u=-1,a=0;++u<i;)a+=n[u].length;for(e=new Array(a);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--a]=r[t];return e}function g(n,t){var e,r,i=-1,u=n.length;if(null==t){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&e>r&&(e=r)}else{for(;++i<u;)if(null!=(r=t(n[i],i,n))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t(n[i],i,n))&&e>r&&(e=r)}return e}function m(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r}function y(n,t){var e,r=0,i=n.length,u=-1;if(null==t)for(;++u<i;)(e=+n[u])&&(r+=e);else for(;++u<i;)(e=+t(n[u],u,n))&&(r+=e);return r}function b(n,t,r,u){var a,o,f,c,s=e(n,u),h=s.length,d=t;for(f=0,c=Array(d);f<d;++f){for(a=0,o=0;o<h;++o)a+=s[~~(Math.random()*h)];c[o]=a/h}return[l(c.sort(i),r/2),l(c,1-r/2)]}function x(n,t){var e=null==t?0:n,r=null==t?n:t,i=r-e,u={};return u.sample=function(){return e+Math.floor(i*Math.random())},u.pdf=function(n){return n===Math.floor(n)&&n>=e&&n<r?1/i:0},u.cdf=function(n){var t=Math.floor(n);return t<e?0:t>=r?1:(t-e+1)/i},u.icdf=function(n){return n>=0&&n<=1?e-1+Math.floor(n*i):NaN},u}function M(n,t){var e=n||0,r=t||1,i=NaN,u={};return u.sample=function(){var n,t,u=0,a=0;if(i===i)return u=i,i=NaN,u;do u=2*Math.random()-1,a=2*Math.random()-1,n=u*u+a*a;while(0===n||n>1);return t=Math.sqrt(-2*Math.log(n)/n),i=e+a*t*r,e+u*t*r},u.pdf=function(n){var t=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*t},u.cdf=function(n){var t,i=(n-e)/r,u=Math.abs(i);if(u>37)t=0;else{var a,o=Math.exp(-u*u/2);u<7.07106781186547?(a=.0352624965998911*u+.700383064443688,a=a*u+6.37396220353165,a=a*u+33.912866078383,a=a*u+112.079291497871,a=a*u+221.213596169931,a=a*u+220.206867912376,t=o*a,a=.0883883476483184*u+1.75566716318264,a=a*u+16.064177579207,a=a*u+86.7807322029461,a=a*u+296.564248779674,a=a*u+637.333633378831,a=a*u+793.826512519948,a=a*u+440.413735824752,t/=a):(a=u+.65,a=u+4/a,a=u+3/a,a=u+2/a,a=u+1/a,t=o/a/2.506628274631)}return i>0?1-t:t},u.icdf=function(n){if(n<=0||n>=1)return NaN;var t=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),u=2/(Math.PI*i)+Math.log(1-Math.pow(t,2))/2,a=Math.log(1-t*t)/i,o=(t>0?1:-1)*Math.sqrt(Math.sqrt(u*u-a)-u);return e+r*Math.SQRT2*o},u}function _(n,t){var e=null==t?0:n,r=null==t?null==n?1:n:t,i=r-e,u={};return u.sample=function(){return e+i*Math.random()},u.pdf=function(n){return n>=e&&n<=r?1/i:0},u.cdf=function(n){return n<e?0:n>r?1:(n-e)/i},u.icdf=function(n){return n>=0&&n<=1?e+n*i:NaN},u}function w(n,t){var r=e(n,t);return[l(r.sort(i),.25),l(r,.5),l(r,.75)]}function k(n,t,e){return n.fields=t||[],n.fname=e,n}function N(n){return null==n?null:n.fname}function E(n){return null==n?null:n.fields}function A(n){return String(n).match(/\[(.*?)\]|[^.\[]+/g).map(D)}function D(n){return"["!==n[0]?n:"'"!==n[1]&&'"'!==n[1]?n.slice(1,-1):n.slice(2,-2).replace(/\\(["'])/g,"$1")}function S(n){return n===Object(n)}function C(n){return"string"==typeof n}function U(n){return Rs(n)?"["+n.map(U)+"]":S(n)||C(n)?JSON.stringify(n).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):n}function T(n,t){var e=A(n).map(U),r=Function("_","return _["+e.join("][")+"];");return k(r,[n],t||n)}function R(n,t){var e=[n].concat([].slice.call(t));console.log.apply(console,e)}function q(n){var t=n||Is;return{level:function(n){return arguments.length?(t=+n,this):t},warn:function(){return t>=Ys&&R("WARN",arguments),this},info:function(){return t>=Hs&&R("INFO",arguments),this},debug:function(){return t>=Bs&&R("DEBUG",arguments),this}}}function F(n){return null!=n?Rs(n)?n:[n]:[]}function z(n,t){if(null==n)return null;n=F(n);var e,r,i,u,a,o,f,c=n.map(function(n){return A(n).map(U).join("][")}),s=F(t),l=c.length-1,h="var u,v;return ";for(e=0;e<=l;++e)r=c[e],i="(u=a["+r+"])",u="(v=b["+r+"])",a="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))",o="descending"!==s[e]?(f=1,-1):(f=-1,1),h+="("+i+"<"+u+"||u==null)&&v!=null?"+o+":(u>v||v==null)&&u!=null?"+f+":"+a+"!==u&&v===v?"+o+":v!==v&&u===u?"+f+(e<l?":":":0");return k(Function("a","b",h+";"),n)}function L(n){return"function"==typeof n}function O(n){return L(n)?n:function(){return n}}function P(n){throw Error(n)}function j(n){for(var t,e,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(e in t)n[e]=t[e]}return n}function I(n,t){var e,r,i,u,a,o=-1,f=n.length;if(null==t){for(;++o<f;)if(null!=(r=n[o])&&r>=r){e=i=r;break}for(u=a=o;++o<f;)null!=(r=n[o])&&(e>r&&(e=r,u=o),i<r&&(i=r,a=o))}else{for(;++o<f;)if(null!=(r=t(n[o],o,n))&&r>=r){e=i=r;break}for(u=a=o;++o<f;)null!=(r=t(n[o],o,n))&&(e>r&&(e=r,u=o),i<r&&(i=r,a=o))}return[u,a]}function Y(n,t){var e=n.prototype=Object.create(t.prototype);return e.constructor=n,e}function H(n){return"number"==typeof n}function B(n){n=n?F(n):n;var t=n?Function("_","return ''+"+n.map(function(n){return"_["+A(n).map(U).join("][")+"]"}).join("+'|'+")+";"):function(){return""};return k(t,n,"key")}function $(n,t,e,r){var i=t.length,u=e.length;if(!u)return t;if(!i)return e;for(var a=r||new t.constructor(i+u),o=0,f=0,c=0;o<i&&f<u;++c)a[c]=n(t[o],e[f])>0?e[f++]:t[o++];for(;o<i;++o,++c)a[c]=t[o];for(;f<u;++f,++c)a[c]=e[f];return a}function W(n){return n[n.length-1]}function Z(n){for(var t={},e=0,r=n.length;e<r;++e)t[n[e]]=1;return t}function X(n,t,e){var r,i=0,u=n.length;if(t)for(;i<u;++i)(r=t(n[i]))&&e(r,i,n);else n.forEach(e)}function G(n){var t=n||zs,e=[],r={};return e.add=function(n){var i=t(n);return r[i]||(r[i]=1,e.push(n)),e},e.remove=function(n){var i,u=t(n);return r[u]&&(r[u]=0,(i=e.indexOf(n))>=0&&e.splice(i,1)),e},e}function J(){$s=1}function V(n){return n._id}function K(n,t){for(var e in n)"_id"!==e&&(t[e]=n[e]);return t}function Q(n){var t=n===Object(n)?n:{data:n};return t._id||(t._id=++$s),t}function nn(n){return Q(K(n,{}))}function tn(n,t){return K(n,t)}function en(n,t){return t._id=n._id,t}function rn(n){return n&&n.constructor===un}function un(){var n=[],t=[],e=[],r=[],i=[];return{constructor:un,insert:function(t){for(var e=F(t),r=0,i=e.length;r<i;++r)n.push(e[r]);return this},remove:function(n){for(var e=L(n)?r:t,i=F(n),u=0,a=i.length;u<a;++u)e.push(i[u]);return this},modify:function(n,t,r){var u={field:t,value:O(r)};return L(n)?(u.filter=n,i.push(u)):(u.tuple=n,e.push(u)),this},encode:function(n,t){return e.push({tuple:n,field:t}),this},pulse:function(u,a){function o(n,t,e){e?n[t]=e(n):u.encode=t,f[n._id]=n}var f,c,s,l,h,d,p;for(c=0,s=n.length;c<s;++c)u.add.push(Q(n[c]));for(f={},c=0,s=t.length;c<s;++c)d=t[c],f[d._id]=d;for(c=0,s=r.length;c<s;++c)h=r[c],a.forEach(function(n){h(n)&&(f[n._id]=n)});for(p in f)u.rem.push(f[p]);for(f={},c=0,s=e.length;c<s;++c)l=e[c],o(l.tuple,l.field,l.value),u.modifies(l.field);for(c=0,s=i.length;c<s;++c)l=i[c],h=l.filter,a.forEach(function(n){h(n)&&o(n,l.field,l.value)}),u.modifies(l.field);for(p in f)u.mod.push(f[p]);return u}}}function an(n,t){this.dataflow=n,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=null}function on(n,t){return n?function(e,r){return n(e,r)&&t(e,r)}:t}function fn(n,t){var e={};return n.visit(t,function(n){e[n._id]=1}),function(n){return e[n._id]?null:n}}function cn(n,t,e){var r,i,u,a,o,f=this,c=0;for(this.dataflow=n,this.stamp=t,this.fields=null,this.encode=null,this.pulses=e,u=0,a=e.length;u<a;++u)if(r=e[u],r.stamp===t){if(r.fields){i=f.fields||(f.fields={});for(o in r.fields)i[o]=1}r.changed(f.ADD)&&(c|=f.ADD),r.changed(f.REM)&&(c|=f.REM),r.changed(f.MOD)&&(c|=f.MOD)}this.changes=c}function sn(){Object.defineProperty(this,ul,{writable:!0,value:{}})}function ln(n,t){return(null!=t&&t>=0?t+":":"")+n}function hn(n,t,e,r){this.id=++ol,this.value=n,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),e&&this.parameters(e,r)}function dn(n){return function(t){var e=this.flags;return 0===arguments.length?!!(e&n):(this.flags=t?e|n:e&~n,this)}}function pn(n,t,e){this.id=++dl,this.value=null,e&&(this.receive=e),n&&(this._filter=n),t&&(this._apply=t)}function vn(n,t,e){return new pn(n,t,e)}function gn(n){this.cmp=n,this.nodes=[]}function mn(n,t,e,r){var i,u,a;for(i=n[e];e>t&&(a=e-1>>1,u=n[a],r(i,u)<0);)n[e]=u,e=a;return n[e]=i}function yn(n,t,e){for(var r,i=t,u=n.length,a=n[t],o=2*t+1;o<u;)r=o+1,r<u&&e(n[o],n[r])>=0&&(o=r),n[t]=n[o],t=o,o=2*t+1;return n[t]=a,mn(n,i,t,e)}function bn(){this._clock=0,this._pulses={},this._pulse=null,this._touched=G(Fs),this._postrun=[],this._log=q(),this._rank=0,this._heap=new gn(function(n,t){return n.qrank-t.qrank})}function xn(n,t,e,r,i,u){var a,o,f=j({},u,ml);L(e)||(e=O(e)),void 0===r?a=function(t){n.touch(e(t))}:L(r)?(o=new hn(null,r,i,(!1)),a=function(t){var r=e(t),i=(o.evaluate(t),o.value);rn(i)?n.pulse(r,i,u):n.update(r,i,f)}):a=function(t){n.update(e(t),r,f)},t.apply(a)}function Mn(n,t,e,r,i,u){var a,o;void 0===r?o=e:(a=L(r)?r:O(r),r=e?function(n,t){if(!e.skip())return e.skip(!0).value=a(n,t)}:a,o=new hn(null,r,i,(!1)),o.modified(u&&u.force),o.skip(!0),o.rank=0,e&&(o.value=e.value,o.targets().add(e))),t.targets().add(o)}function _n(n){return function(){return this._log[n].apply(this,arguments)}}function wn(n,t){hn.call(this,n,null,t)}function kn(n){wn.call(this,null,n)}function Nn(n){hn.call(this,null,En,n)}function En(n){if(this.value&&!n.modified())return this.value;var e=n.field,r=t(n),i=r.start,u=r.step,a=function(n){var t=e(n);return null==t?null:i+u*Math.floor((+t-i)/u)};return k(a,E(e.fields),n.name||"bin_"+N(e))}function An(n){wn.call(this,[],n)}function Dn(n){hn.call(this,null,Sn,n)}function Sn(n){return this.value&&!n.modified()?this.value:z(n.fields,n.orders)}function Cn(){}function Un(n,t){var e=new Cn;if(n instanceof Cn)n.each(function(n,t){e.set(t,n)});else if(Array.isArray(n)){var r,i=-1,u=n.length;if(null==t)for(;++i<u;)e.set(i,n[i]);else for(;++i<u;)e.set(t(r=n[i],i,n),r)}else if(n)for(var a in n)e.set(a,n[a]);return e}function Tn(){function n(t,i,a,o){if(i>=u.length)return null!=r?r(t):null!=e?t.sort(e):t;for(var f,c,s,l=-1,h=t.length,d=u[i++],p=Un(),v=a();++l<h;)(s=p.get(f=d(c=t[l])+""))?s.push(c):p.set(f,[c]);return p.each(function(t,e){o(v,e,n(t,i,a,o))}),v}function t(n,e){if(++e>u.length)return n;var i,o=a[e-1];return null!=r&&e>=u.length?i=n.entries():(i=[],n.each(function(n,r){i.push({key:r,values:t(n,e)})})),null!=o?i.sort(function(n,t){return o(n.key,t.key)}):i}var e,r,i,u=[],a=[];return i={object:function(t){return n(t,0,Rn,qn)},map:function(t){return n(t,0,Fn,zn)},entries:function(e){return t(n(e,0,Fn,zn),0)},key:function(n){return u.push(n),i},sortKeys:function(n){return a[u.length-1]=n,i},sortValues:function(n){return e=n,i},rollup:function(n){return r=n,i}}}function Rn(){return{}}function qn(n,t,e){n[t]=e}function Fn(){return Un()}function zn(n,t,e){n.set(t,e)}function Ln(n){var t=[];for(var e in n)t.push(n[e]);return t}function On(n){wn.call(this,Un(),n)}function Pn(n){wn.call(this,null,n)}function jn(n,t,e){switch(t){case"upper":n=n.toUpperCase();break;case"lower":n=n.toLowerCase()}return n.match(e)}function In(n){wn.call(this,[+(1/0),-(1/0)],n)}function Yn(n,t){hn.call(this,n),this.parent=t}function Hn(n){wn.call(this,Un(),n),this._keys={},this._count=0;var t=this._targets=[];t.active=0,t.forEach=function(n){for(var e=0,r=t.active;e<r;++e)n(t[e],e,t)}}function Bn(n){hn.call(this,null,$n,n)}function $n(n){return this.value&&!n.modified()?this.value:Rs(n.name)?F(n.name).map(function(n){return T(n)}):T(n.name,n.as)}function Wn(n){wn.call(this,{},n)}function Zn(n){wn.call(this,{},n)}function Xn(n){return n.fields.join("|")}function Gn(n){wn.call(this,[],n)}function Jn(n){wn.call(this,[],n)}function Vn(n){var t,e=n.method||Ul.value;return null!=Ul[e]?e===Ul.value?(t=void 0!==n.value?n.value:0,function(){return t}):Ul[e]:void P("Unrecognized imputation method: "+e)}function Kn(n){var t=n.field;return function(n){return n?t(n):NaN}}function Qn(n,t,e){var r,i,u,a,o,f,c,s,l,h=function(n){return n(l)},d=[],p=[],v={},g={};for(f=0,s=n.length;f<s;++f)l=n[f],i=(r=e.map(h))+"",c=v[i]||(v[i]=p.push(r)),a=(u=t?t.map(h):Tl)+"",(o=g[a])||(o=g[a]=[],d.push(o),o.values=u),o[c-1]=l;return d.domain=p,d}function nt(n){hn.call(this,null,tt,n)}function tt(n){return this.value&&!n.modified()?this.value:B(n.fields)}function et(n){wn.call(this,{},n)}function rt(n){hn.call(this,null,it,n)}function it(n){if(this.value&&!n.modified())return this.value;var t,e,r,i=+(1/0),u=-(1/0),a=n.extents;for(t=0,e=a.length;t<e;++t)r=a[t],r[0]<i&&(i=r[0]),r[1]>u&&(u=r[1]);return[i,u]}function ut(n){wn.call(this,{},n)}function at(n){wn.call(this,null,n)}function ot(n){Hn.call(this,n)}function ft(n){wn.call(this,[],n)}function ct(n){wn.call(this,null,n)}function st(n){wn.call(this,null,n)}function lt(n){wn.call(this,{},n)}function ht(n){wn.call(this,[],n),this.count=0}function dt(n){wn.call(this,null,n),this.modified(!0)}function pt(n){wn.call(this,Un(),n)}function vt(n){wn.call(this,null,n)}function gt(n){this._key=n||"_id",this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null}function mt(n,t){return $l[n](t)}function yt(n){return function(t){var e=j({init:"",add:"",rem:"",idx:0},n);return e.out=t||n.name,e}}function bt(n,t){return n.idx-t.idx}function xt(n,t){function e(n,r){function i(t){n[t]||e(n,n[t]=$l[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n}var r=n.reduce(e,n.reduce(function(n,t){return n[t.name]=t,n},{}));return Ln(r).sort(bt)}function Mt(n,t){var e=t||zs,r=xt(n,!0),i="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",u="if(v==null){this.missing++; return;} if(v!==v) return; ++this.valid;",a="if(v==null){this.missing--; return;} if(v!==v) return; --this.valid;",o="var t = this.tuple; var cell = this.cell;";return r.forEach(function(n){n.idx<0?(i=n.init+i,u=n.add+u,a=n.rem+a):(i+=n.init,u+=n.add,a+=n.rem)}),n.slice().sort(bt).forEach(function(n){o+="t['"+n.out+"']="+n.set+";"}),o+="return t;",i=Function("cell","t",i),i.prototype.add=Function("v",u),i.prototype.rem=Function("v",a),i.prototype.set=Function(o),i.prototype.get=e,i.fields=n.map(function(n){return n.out}),i}function _t(n){wn.call(this,null,n),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._dims=[],this._dnames=[],this._measures=[],this._count=!1,this._prev=null,this._inputs=null,this._outputs=null}function wt(n,t,e){return e||n+(t?"_"+t:"")}function kt(n){var t,e=this._dims,r=e.length,i=String(e[0](n));for(t=1;t<r;++t)i+="|"+e[t](n);return i}function Nt(n){return new Uint8Array(n)}function Et(n){return new Uint16Array(n)}function At(n){return new Uint32Array(n)}function Dt(){function n(n,t,e){if(!t.length)return[];var r,o,f,c=a,s=t.length,l=Array(s),h=At(s);for(f=0;f<s;++f)l[f]=n(t[f]),h[f]=f;if(l=St(l,h),c)r=u,o=i,u=Array(c+s),i=At(c+s),Ct(e,r,o,c,l,h,s,u,i);else{if(e>0)for(f=0;f<s;++f)h[f]+=e;u=l,i=h}return a=c+s,{index:h,value:l}}function t(n,t){var e,r,o,f=a;for(r=0;!t[i[r]]&&r<f;++r);for(o=r;r<f;++r)t[e=i[r]]||(i[o]=e,u[o]=u[r],++o);a=f-n}function e(n){for(var t=0,e=a;t<e;++t)i[t]=n[i[t]]}function r(n,t){var e=t?t.length:(t=u,a);return[Ss(t,n[0],0,e),Ds(t,n[1],0,e)]}var i=At(0),u=[],a=0;return{insert:n,remove:t,bisect:r,reindex:e,index:function(){return i},size:function(){return a}}}function St(n,t){return n.sort.call(t,function(t,e){var r=n[t],i=n[e];return r<i?-1:r>i?1:0}),m(n,t)}function Ct(n,t,e,r,i,u,a,o,f){var c,s=0,l=0;for(c=0;s<r&&l<a;++c)t[s]<i[l]?(o[c]=t[s],f[c]=e[s++]):(o[c]=i[l],f[c]=u[l++]+n);for(;s<r;++s,++c)o[c]=t[s],f[c]=e[s];for(;l<a;++l,++c)o[c]=i[l],f[c]=u[l]+n}function Ut(){var n=8,t=[],e=At(0),r=Rt(0,n),i=Rt(0,n);return{data:function(){return t},seen:function(){return e=Tt(e,t.length)},add:function(n){for(var e,r=0,i=t.length,u=n.length;r<u;++r)e=n[r],e._index=i++,t.push(e)},remove:function(n,e){var u,a,o,f=t.length,c=Array(f-n),s=t;for(a=0;!e[a]&&a<f;++a)c[a]=t[a],s[a]=a;for(o=a;a<f;++a)u=t[a],e[a]?s[a]=-1:(s[a]=o,r[o]=r[a],i[o]=i[a],c[o]=u,u._index=o++),r[a]=0;return t=c,s},size:function(){return t.length},curr:function(){return r},prev:function(){return i},reset:function(n){i[n]=r[n]},all:function(){return n<257?255:n<65537?65535:4294967295},set:function(n,t){r[n]|=t},clear:function(n,t){r[n]&=~t},resize:function(t,e){var u=r.length;(t>u||e>n)&&(n=Math.max(e,n),r=Rt(t,n,r),i=Rt(t,n))}}}function Tt(n,t,e){return n.length>=t?n:(e=e||new n.constructor(t),e.set(n),e)}function Rt(n,t,e){var r=(t<257?Nt:t<65537?Et:At)(n);return e&&r.set(e),r}function qt(n){wn.call(this,Ut(),n),this.data=[],this.index=null}function Ft(n,t,e){var r=Dt();return r.one=1<<n,r.zero=~r.one,r.field=t,r.range=e.slice(),r.add=function(n,t,e){var r,i=this,u=i.one,a=i.insert(i.field,n,e),o=i.bisect(i.range,a.value),f=a.index,c=o[0],s=o[1],l=f.length;for(r=0;r<c;++r)t[f[r]]|=u;for(r=s;r<l;++r)t[f[r]]|=u},r}function zt(n){wn.call(this,null,n)}function Lt(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function Ot(n){return n=Lt(Math.abs(n)),n?n[1]:NaN}function Pt(n,t){return function(e,r){for(var i=e.length,u=[],a=0,o=n[0],f=0;i>0&&o>0&&(f+o+1>r&&(o=Math.max(1,r-f)),u.push(e.substring(i-=o,i+o)),!((f+=o+1)>r));)o=n[a=(a+1)%n.length];return u.reverse().join(t)}}function jt(n,t){n=n.toPrecision(t);n:for(var e,r=n.length,i=1,u=-1;i<r;++i)switch(n[i]){case".":u=e=i;break;case"0":0===u&&(u=i),e=i;break;case"e":break n;default:u>0&&(u=0)}return u>0?n.slice(0,u)+n.slice(e+1):n}function It(n,t){var e=Lt(n,t);if(!e)return n+"";var r=e[0],i=e[1],u=i-(Gl=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return u===a?r:u>a?r+new Array(u-a+1).join("0"):u>0?r.slice(0,u)+"."+r.slice(u):"0."+new Array(1-u).join("0")+Lt(n,Math.max(0,t+u-1))[0]}function Yt(n,t){var e=Lt(n,t);if(!e)return n+"";var r=e[0],i=e[1];return i<0?"0."+new Array((-i)).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function Ht(n){return new Bt(n)}function Bt(n){if(!(t=Vl.exec(n)))throw new Error("invalid format: "+n);var t,e=t[1]||" ",r=t[2]||">",i=t[3]||"-",u=t[4]||"",a=!!t[5],o=t[6]&&+t[6],f=!!t[7],c=t[8]&&+t[8].slice(1),s=t[9]||"";"n"===s?(f=!0,s="g"):Jl[s]||(s=""),(a||"0"===e&&"="===r)&&(a=!0,e="0",r="="),this.fill=e,this.align=r,this.sign=i,this.symbol=u,this.zero=a,this.width=o,this.comma=f,this.precision=c,this.type=s}function $t(n){return n}function Wt(n){function t(n){function t(n){var t,i,f,y=p,b=v;if("c"===d)b=g(n)+b,n="";else{n=+n;var x=(n<0||1/n<0)&&(n*=-1,!0);if(n=g(n,h),x)for(t=-1,i=n.length,x=!1;++t<i;)if(f=n.charCodeAt(t),48<f&&f<58||"x"===d&&96<f&&f<103||"X"===d&&64<f&&f<71){x=!0;break}if(y=(x?"("===o?o:"-":"-"===o||"("===o?"":o)+y,b=b+("s"===d?th[8+Gl/3]:"")+(x&&"("===o?")":""),m)for(t=-1,i=n.length;++t<i;)if(f=n.charCodeAt(t),48>f||f>57){b=(46===f?u+n.slice(t+1):n.slice(t))+b,n=n.slice(0,t);break}}l&&!c&&(n=r(n,1/0));var M=y.length+n.length+b.length,_=M<s?new Array(s-M+1).join(e):"";switch(l&&c&&(n=r(_+n,_.length?s-b.length:1/0),_=""),a){case"<":return y+n+b+_;case"=":return y+_+n+b;case"^":return _.slice(0,M=_.length>>1)+y+n+b+_.slice(M)}return _+y+n+b}n=Ht(n);var e=n.fill,a=n.align,o=n.sign,f=n.symbol,c=n.zero,s=n.width,l=n.comma,h=n.precision,d=n.type,p="$"===f?i[0]:"#"===f&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",v="$"===f?i[1]:/[%p]/.test(d)?"%":"",g=Jl[d],m=!d||/[defgprs%]/.test(d);return h=null==h?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),t.toString=function(){return n+""},t}function e(n,e){var r=t((n=Ht(n),n.type="f",n)),i=3*Math.max(-8,Math.min(8,Math.floor(Ot(e)/3))),u=Math.pow(10,-i),a=th[8+i/3];return function(n){return r(u*n)+a}}var r=n.grouping&&n.thousands?Pt(n.grouping,n.thousands):$t,i=n.currency,u=n.decimal;return{format:t,formatPrefix:e}}function Zt(n){return Kl=Wt(n),Ql=Kl.format,nh=Kl.formatPrefix,Kl}function Xt(n){return Math.max(0,-Ot(Math.abs(n)))}function Gt(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ot(t)/3)))-Ot(Math.abs(n)))}function Jt(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,Ot(t)-Ot(n))+1}function Vt(n,t){return n.ticks?n.ticks(t):n.domain()}function Kt(n,t,e){var r=n.tickFormat?n.tickFormat(t,e):String;return"log"===n.type?Qt(r,ne(e)):r}function Qt(n,t){return function(e){return n(e)?t(e):""}}function ne(n){var t=Ht(n||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return te(Ql(t),Ql(".1f")(1)[1])}return Ql(t)}function te(n,t){return function(e){var r,i,u=n(e),a=u.indexOf(t);if(a<0)return u;for(r=ee(u,a),i=r<u.length?u.slice(r):"";--r>a;)if("0"!==u[r]){++r;break}return u.slice(0,r)+i}}function ee(n,t){var e,r=n.lastIndexOf("e");if(r>0)return r;for(r=n.length;--r>t;)if(e=n.charCodeAt(r),e>=48&&e<=57)return r+1}function re(n){wn.call(this,[],n)}function ie(n){wn.call(this,Un(),n)}function ue(){return Q({})}function ae(n){wn.call(this,null,n)}function oe(n){wn.call(this,[],n)}function fe(n){function t(t){var u=t+"",a=e.get(u);if(!a){if(i!==ch)return i;e.set(u,a=r.push(t))}return n[(a-1)%n.length]}var e=Un(),r=[],i=ch;return n=null==n?[]:fh.call(n),t.domain=function(n){if(!arguments.length)return r.slice();r=[],e=Un();for(var i,u,a=-1,o=n.length;++a<o;)e.has(u=(i=n[a])+"")||e.set(u,r.push(i));return t},t.range=function(e){return arguments.length?(n=fh.call(e),t):n.slice()},t.unknown=function(n){return arguments.length?(i=n,t):i},t.copy=function(){return fe().domain(r).range(n).unknown(i)},t}function ce(){function n(){var n=i().length,r=a[1]<a[0],h=a[r-0],d=a[1-r];t=(d-h)/Math.max(1,n-c+2*s),o&&(t=Math.floor(t)),h+=(d-h-t*(n-c))*l,e=t*(1-c),o&&(h=Math.round(h),e=Math.round(e));var p=f(n).map(function(n){return h+t*n});return u(r?p.reverse():p)}var t,e,r=fe().unknown(void 0),i=r.domain,u=r.range,a=[0,1],o=!1,c=0,s=0,l=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),n()):i()},r.range=function(t){return arguments.length?(a=[+t[0],+t[1]],n()):a.slice()},r.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,n()},r.bandwidth=function(){return e},r.step=function(){return t},r.round=function(t){return arguments.length?(o=!!t,n()):o},r.padding=function(t){return arguments.length?(c=s=Math.max(0,Math.min(1,t)),n()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),n()):c},r.paddingOuter=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),n()):s},r.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),n()):l},r.copy=function(){return ce().domain(i()).range(a).round(o).paddingInner(c).paddingOuter(s).align(l)},n()}function se(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return se(t())},n}function le(){return se(ce().paddingInner(1))}function he(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function de(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function pe(){}function ve(n){var t;return n=(n+"").trim().toLowerCase(),(t=hh.exec(n))?(t=parseInt(t[1],16),new xe(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=dh.exec(n))?ge(parseInt(t[1],16)):(t=ph.exec(n))?new xe(t[1],t[2],t[3],1):(t=vh.exec(n))?new xe(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=gh.exec(n))?me(t[1],t[2],t[3],t[4]):(t=mh.exec(n))?me(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=yh.exec(n))?Me(t[1],t[2]/100,t[3]/100,1):(t=bh.exec(n))?Me(t[1],t[2]/100,t[3]/100,t[4]):xh.hasOwnProperty(n)?ge(xh[n]):"transparent"===n?new xe(NaN,NaN,NaN,0):null}function ge(n){return new xe(n>>16&255,n>>8&255,255&n,1)}function me(n,t,e,r){return r<=0&&(n=t=e=NaN),new xe(n,t,e,r)}function ye(n){return n instanceof pe||(n=ve(n)),n?(n=n.rgb(),new xe(n.r,n.g,n.b,n.opacity)):new xe}function be(n,t,e,r){return 1===arguments.length?ye(n):new xe(n,t,e,null==r?1:r)}function xe(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}function Me(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new ke(n,t,e,r)}function _e(n){if(n instanceof ke)return new ke(n.h,n.s,n.l,n.opacity);if(n instanceof pe||(n=ve(n)),!n)return new ke;if(n instanceof ke)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),u=Math.max(t,e,r),a=NaN,o=u-i,f=(u+i)/2;return o?(a=t===u?(e-r)/o+6*(e<r):e===u?(r-t)/o+2:(t-e)/o+4,o/=f<.5?u+i:2-u-i,a*=60):o=f>0&&f<1?0:a,new ke(a,o,f,n.opacity)}function we(n,t,e,r){return 1===arguments.length?_e(n):new ke(n,t,e,null==r?1:r)}function ke(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function Ne(n,t,e){return 255*(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)}function Ee(n){if(n instanceof De)return new De(n.l,n.a,n.b,n.opacity);if(n instanceof Fe){var t=n.h*Mh;return new De(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}n instanceof xe||(n=ye(n));var e=Te(n.r),r=Te(n.g),i=Te(n.b),u=Se((.4124564*e+.3575761*r+.1804375*i)/kh),a=Se((.2126729*e+.7151522*r+.072175*i)/Nh),o=Se((.0193339*e+.119192*r+.9503041*i)/Eh);return new De(116*a-16,500*(u-a),200*(a-o),n.opacity)}function Ae(n,t,e,r){return 1===arguments.length?Ee(n):new De(n,t,e,null==r?1:r)}function De(n,t,e,r){this.l=+n,this.a=+t,this.b=+e,this.opacity=+r}function Se(n){return n>Ch?Math.pow(n,1/3):n/Sh+Ah}function Ce(n){return n>Dh?n*n*n:Sh*(n-Ah)}function Ue(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Te(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Re(n){if(n instanceof Fe)return new Fe(n.h,n.c,n.l,n.opacity);n instanceof De||(n=Ee(n));var t=Math.atan2(n.b,n.a)*_h;return new Fe(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function qe(n,t,e,r){return 1===arguments.length?Re(n):new Fe(n,t,e,null==r?1:r)}function Fe(n,t,e,r){this.h=+n,this.c=+t,this.l=+e,this.opacity=+r}function ze(n){if(n instanceof Oe)return new Oe(n.h,n.s,n.l,n.opacity);n instanceof xe||(n=ye(n));var t=n.r/255,e=n.g/255,r=n.b/255,i=(Oh*r+zh*t-Lh*e)/(Oh+zh-Lh),u=r-i,a=(Fh*(e-i)-Rh*u)/qh,o=Math.sqrt(a*a+u*u)/(Fh*i*(1-i)),f=o?Math.atan2(a,u)*_h-120:NaN;return new Oe(f<0?f+360:f,o,i,n.opacity)}function Le(n,t,e,r){return 1===arguments.length?ze(n):new Oe(n,t,e,null==r?1:r)}function Oe(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function Pe(n,t,e,r,i){var u=n*n,a=u*n;return((1-3*n+3*u-a)*t+(4-6*u+3*a)*e+(1+3*n+3*u-3*a)*r+a*i)/6}function je(n){var t=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),i=n[r],u=n[r+1],a=r>0?n[r-1]:2*i-u,o=r<t-1?n[r+2]:2*u-i;return Pe((e-r/t)*t,a,i,u,o)}}function Ie(n){return function(){return n}}function Ye(n,t){return function(e){return n+e*t}}function He(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function Be(n,t){var e=t-n;return e?Ye(n,e>180||e<-180?e-360*Math.round(e/360):e):Ie(isNaN(n)?t:n)}function $e(n){return 1===(n=+n)?We:function(t,e){return e-t?He(t,e,n):Ie(isNaN(t)?e:t)}}function We(n,t){var e=t-n;return e?Ye(n,e):Ie(isNaN(n)?t:n)}function Ze(n){return function(t){var e,r,i=t.length,u=new Array(i),a=new Array(i),o=new Array(i);for(e=0;e<i;++e)r=be(t[e]),u[e]=r.r||0,a[e]=r.g||0,o[e]=r.b||0;return u=n(u),a=n(a),o=n(o),r.opacity=1,function(n){return r.r=u(n),r.g=a(n),r.b=o(n),r+""}}}function Xe(n,t){var e,r=t?t.length:0,i=n?Math.min(r,n.length):0,u=new Array(r),a=new Array(r);for(e=0;e<i;++e)u[e]=tr(n[e],t[e]);for(;e<r;++e)a[e]=t[e];return function(n){for(e=0;e<i;++e)a[e]=u[e](n);return a}}function Ge(n,t){var e=new Date;return n=+n,t-=n,function(r){return e.setTime(n+t*r),e}}function Je(n,t){return n=+n,t-=n,function(e){return n+t*e}}function Ve(n,t){var e,r={},i={};null!==n&&"object"==typeof n||(n={}),null!==t&&"object"==typeof t||(t={});for(e in t)e in n?r[e]=tr(n[e],t[e]):i[e]=t[e];return function(n){for(e in r)i[e]=r[e](n);return i}}function Ke(n){return function(){return n}}function Qe(n){return function(t){return n(t)+""}}function nr(n,t){var e,r,i,u=Ih.lastIndex=Yh.lastIndex=0,a=-1,o=[],f=[];for(n+="",t+="";(e=Ih.exec(n))&&(r=Yh.exec(t));)(i=r.index)>u&&(i=t.slice(u,i),o[a]?o[a]+=i:o[++a]=i),(e=e[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,f.push({i:a,x:Je(e,r)})),u=Yh.lastIndex;return u<t.length&&(i=t.slice(u),o[a]?o[a]+=i:o[++a]=i),o.length<2?f[0]?Qe(f[0].x):Ke(t):(t=f.length,function(n){for(var e,r=0;r<t;++r)o[(e=f[r]).i]=e.x(n);return o.join("")})}function tr(n,t){var e,r=typeof t;return null==t||"boolean"===r?Ie(t):("number"===r?Je:"string"===r?(e=ve(t))?(t=e,Ph):nr:t instanceof ve?Ph:t instanceof Date?Ge:Array.isArray(t)?Xe:isNaN(t)?Ve:Je)(n,t)}function er(n,t){return n=+n,t-=n,function(e){return Math.round(n+t*e)}}function rr(n){return function t(e){function r(t,r){var i=n((t=Le(t)).h,(r=Le(r)).h),u=We(t.s,r.s),a=We(t.l,r.l),o=We(t.opacity,r.opacity);return function(n){return t.h=i(n),t.s=u(n),t.l=a(Math.pow(n,e)),t.opacity=o(n),t+""}}return e=+e,r.gamma=t,r}(1)}function ir(n){return function(){return n}}function ur(n){return+n}function ar(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:ir(t)}function or(n){return function(t,e){var r=n(t=+t,e=+e);return function(n){return n<=t?0:n>=e?1:r(n)}}}function fr(n){return function(t,e){var r=n(t=+t,e=+e);return function(n){return n<=0?t:n>=1?e:r(n)}}}function cr(n,t,e,r){var i=n[0],u=n[1],a=t[0],o=t[1];return u<i?(i=e(u,i),a=r(o,a)):(i=e(i,u),a=r(a,o)),function(n){return a(i(n))}}function sr(n,t,e,r){var i=Math.min(n.length,t.length)-1,u=new Array(i),a=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<i;)u[o]=e(n[o],n[o+1]),a[o]=r(t[o],t[o+1]);return function(t){var e=Ds(n,t,1,i)-1;return a[e](u[e](t))}}function lr(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp())}function hr(n,t){
function e(){return i=Math.min(o.length,f.length)>2?sr:cr,u=a=null,r}function r(t){return(u||(u=i(o,f,s?or(n):n,c)))(+t)}var i,u,a,o=Bh,f=Bh,c=tr,s=!1;return r.invert=function(n){return(a||(a=i(f,o,ar,s?fr(t):t)))(+n)},r.domain=function(n){return arguments.length?(o=oh.call(n,ur),e()):o.slice()},r.range=function(n){return arguments.length?(f=fh.call(n),e()):f.slice()},r.rangeRound=function(n){return f=fh.call(n),c=er,e()},r.clamp=function(n){return arguments.length?(s=!!n,e()):s},r.interpolate=function(n){return arguments.length?(c=n,e()):c},e()}function dr(n,t,e){var r,i=n[0],u=n[n.length-1],a=s(i,u,null==t?10:t);switch(e=Ht(null==e?",f":e),e.type){case"s":var o=Math.max(Math.abs(i),Math.abs(u));return null!=e.precision||isNaN(r=Gt(a,o))||(e.precision=r),nh(e,o);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(r=Jt(a,Math.max(Math.abs(i),Math.abs(u))))||(e.precision=r-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(r=Xt(a))||(e.precision=r-2*("%"===e.type))}return Ql(e)}function pr(n){var t=n.domain;return n.ticks=function(n){var e=t();return c(e[0],e[e.length-1],null==n?10:n)},n.tickFormat=function(n,e){return dr(t(),n,e)},n.nice=function(e){var r=t(),i=r.length-1,u=null==e?10:e,a=r[0],o=r[i],f=s(a,o,u);return f&&(f=s(Math.floor(a/f)*f,Math.ceil(o/f)*f,u),r[0]=Math.floor(a/f)*f,r[i]=Math.ceil(o/f)*f,t(r)),n},n}function vr(){var n=hr(ar,Je);return n.copy=function(){return lr(n,vr())},pr(n)}function gr(){function n(n){return+n}var t=[0,1];return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=oh.call(e,ur),n):t.slice()},n.copy=function(){return gr().domain(t)},pr(n)}function mr(n,t){n=n.slice();var e,r=0,i=n.length-1,u=n[r],a=n[i];return a<u&&(e=r,r=i,i=e,e=u,u=a,a=e),n[r]=t.floor(u),n[i]=t.ceil(a),n}function yr(n,t){return(t=Math.log(t/n))?function(e){return Math.log(e/n)/t}:ir(t)}function br(n,t){return n<0?function(e){return-Math.pow(-t,e)*Math.pow(-n,1-e)}:function(e){return Math.pow(t,e)*Math.pow(n,1-e)}}function xr(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Mr(n){return 10===n?xr:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}function _r(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}function wr(n){return function(t){return-n(-t)}}function kr(){function n(){return i=_r(r),u=Mr(r),e()[0]<0&&(i=wr(i),u=wr(u)),t}var t=hr(yr,br).domain([1,10]),e=t.domain,r=10,i=_r(10),u=Mr(10);return t.base=function(t){return arguments.length?(r=+t,n()):r},t.domain=function(t){return arguments.length?(e(t),n()):e()},t.ticks=function(n){var t,a=e(),o=a[0],f=a[a.length-1];(t=f<o)&&(d=o,o=f,f=d);var s,l,h,d=i(o),p=i(f),v=null==n?10:+n,g=[];if(!(r%1)&&p-d<v){if(d=Math.round(d)-1,p=Math.round(p)+1,o>0){for(;d<p;++d)for(l=1,s=u(d);l<r;++l)if(h=s*l,!(h<o)){if(h>f)break;g.push(h)}}else for(;d<p;++d)for(l=r-1,s=u(d);l>=1;--l)if(h=s*l,!(h<o)){if(h>f)break;g.push(h)}}else g=c(d,p,Math.min(p-d,v)).map(u);return t?g.reverse():g},t.tickFormat=function(n,e){if(null==e&&(e=10===r?".0e":","),"function"!=typeof e&&(e=Ql(e)),n===1/0)return e;null==n&&(n=10);var a=Math.max(1,r*n/t.ticks().length);return function(n){var t=n/u(Math.round(i(n)));return t*r<r-.5&&(t*=r),t<=a?e(n):""}},t.nice=function(){return e(mr(e(),{floor:function(n){return u(Math.floor(i(n)))},ceil:function(n){return u(Math.ceil(i(n)))}}))},t.copy=function(){return lr(t,kr().base(r))},t}function Nr(n,t){return n<0?-Math.pow(-n,t):Math.pow(n,t)}function Er(){function n(n,t){return(t=Nr(t,e)-(n=Nr(n,e)))?function(r){return(Nr(r,e)-n)/t}:ir(t)}function t(n,t){return t=Nr(t,e)-(n=Nr(n,e)),function(r){return Nr(n+t*r,1/e)}}var e=1,r=hr(n,t),i=r.domain;return r.exponent=function(n){return arguments.length?(e=+n,i(i())):e},r.copy=function(){return lr(r,Er().exponent(e))},pr(r)}function Ar(){return Er().exponent(.5)}function Dr(){function n(){var n=0,i=Math.max(1,r.length);for(u=new Array(i-1);++n<i;)u[n-1]=l(e,n/i);return t}function t(n){if(!isNaN(n=+n))return r[Ds(u,n)]}var e=[],r=[],u=[];return t.invertExtent=function(n){var t=r.indexOf(n);return t<0?[NaN,NaN]:[t>0?u[t-1]:e[0],t<u.length?u[t]:e[e.length-1]]},t.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,u=0,a=t.length;u<a;++u)r=t[u],null==r||isNaN(r=+r)||e.push(r);return e.sort(i),n()},t.range=function(t){return arguments.length?(r=fh.call(t),n()):r.slice()},t.quantiles=function(){return u.slice()},t.copy=function(){return Dr().domain(e).range(r)},t}function Sr(){function n(n){if(n<=n)return a[Ds(u,n,0,i)]}function t(){var t=-1;for(u=new Array(i);++t<i;)u[t]=((t+1)*r-(t-i)*e)/(i+1);return n}var e=0,r=1,i=1,u=[.5],a=[0,1];return n.domain=function(n){return arguments.length?(e=+n[0],r=+n[1],t()):[e,r]},n.range=function(n){return arguments.length?(i=(a=fh.call(n)).length-1,t()):a.slice()},n.invertExtent=function(n){var t=a.indexOf(n);return t<0?[NaN,NaN]:t<1?[e,u[0]]:t>=i?[u[i-1],r]:[u[t-1],u[t]]},n.copy=function(){return Sr().domain([e,r]).range(a)},pr(n)}function Cr(){function n(n){if(n<=n)return e[Ds(t,n,0,r)]}var t=[.5],e=[0,1],r=1;return n.domain=function(i){return arguments.length?(t=fh.call(i),r=Math.min(t.length,e.length-1),n):t.slice()},n.range=function(i){return arguments.length?(e=fh.call(i),r=Math.min(t.length,e.length-1),n):e.slice()},n.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},n.copy=function(){return Cr().domain(t).range(e)},n}function Ur(n,t,e,r){function i(t){return n(t=new Date((+t))),t}return i.floor=i,i.ceil=function(e){return n(e=new Date(e-1)),t(e,1),n(e),e},i.round=function(n){var t=i(n),e=i.ceil(n);return n-t<e-n?t:e},i.offset=function(n,e){return t(n=new Date((+n)),null==e?1:Math.floor(e)),n},i.range=function(e,r,u){var a=[];if(e=i.ceil(e),u=null==u?1:Math.floor(u),!(e<r&&u>0))return a;do a.push(new Date((+e)));while(t(e,u),n(e),e<r);return a},i.filter=function(e){return Ur(function(t){for(;n(t),!e(t);)t.setTime(t-1)},function(n,r){for(;--r>=0;)for(;t(n,1),!e(n););})},e&&(i.count=function(t,r){return $h.setTime(+t),Wh.setTime(+r),n($h),n(Wh),Math.floor(e($h,Wh))},i.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?i.filter(r?function(t){return r(t)%n===0}:function(t){return i.count(0,t)%n===0}):i:null}),i}function Tr(n){return Ur(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(n,t){n.setDate(n.getDate()+7*t)},function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Gh)/Kh})}function Rr(n){return Ur(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+7*t)},function(n,t){return(t-n)/Kh})}function qr(n){if(0<=n.y&&n.y<100){var t=new Date((-1),n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Fr(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function zr(n){return{y:n,m:0,d:1,H:0,M:0,S:0,L:0}}function Lr(n){function t(n,t){return function(e){var r,i,u,a=[],o=-1,f=0,c=n.length;for(e instanceof Date||(e=new Date((+e)));++o<c;)37===n.charCodeAt(o)&&(a.push(n.slice(f,o)),null!=(i=bd[r=n.charAt(++o)])?r=n.charAt(++o):i="e"===r?" ":"0",(u=t[r])&&(r=u(e,i)),a.push(r),f=o+1);return a.push(n.slice(f,o)),a.join("")}}function e(n,t){return function(e){var i=zr(1900),u=r(i,n,e+="",0);if(u!=e.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var a="Z"in i?Fr(zr(i.y)).getUTCDay():t(zr(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Fr(i)):t(i)}}function r(n,t,e,r){for(var i,u,a=0,o=t.length,f=e.length;a<o;){if(r>=f)return-1;if(i=t.charCodeAt(a++),37===i){if(i=t.charAt(a++),u=Y[i in bd?t.charAt(a++):i],!u||(r=u(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function i(n,t,e){var r=C.exec(t.slice(e));return r?(n.p=U[r[0].toLowerCase()],e+r[0].length):-1}function u(n,t,e){var r=q.exec(t.slice(e));return r?(n.w=F[r[0].toLowerCase()],e+r[0].length):-1}function a(n,t,e){var r=T.exec(t.slice(e));return r?(n.w=R[r[0].toLowerCase()],e+r[0].length):-1}function o(n,t,e){var r=O.exec(t.slice(e));return r?(n.m=P[r[0].toLowerCase()],e+r[0].length):-1}function f(n,t,e){var r=z.exec(t.slice(e));return r?(n.m=L[r[0].toLowerCase()],e+r[0].length):-1}function c(n,t,e){return r(n,_,t,e)}function s(n,t,e){return r(n,w,t,e)}function l(n,t,e){return r(n,k,t,e)}function h(n){return A[n.getDay()]}function d(n){return E[n.getDay()]}function p(n){return S[n.getMonth()]}function v(n){return D[n.getMonth()]}function g(n){return N[+(n.getHours()>=12)]}function m(n){return A[n.getUTCDay()]}function y(n){return E[n.getUTCDay()]}function b(n){return S[n.getUTCMonth()]}function x(n){return D[n.getUTCMonth()]}function M(n){return N[+(n.getUTCHours()>=12)]}var _=n.dateTime,w=n.date,k=n.time,N=n.periods,E=n.days,A=n.shortDays,D=n.months,S=n.shortMonths,C=jr(N),U=Ir(N),T=jr(E),R=Ir(E),q=jr(A),F=Ir(A),z=jr(D),L=Ir(D),O=jr(S),P=Ir(S),j={a:h,A:d,b:p,B:v,c:null,d:ei,e:ei,H:ri,I:ii,j:ui,L:ai,m:oi,M:fi,p:g,S:ci,U:si,w:li,W:hi,x:null,X:null,y:di,Y:pi,Z:vi,"%":Ci},I={a:m,A:y,b:b,B:x,c:null,d:gi,e:gi,H:mi,I:yi,j:bi,L:xi,m:Mi,M:_i,p:M,S:wi,U:ki,w:Ni,W:Ei,x:null,X:null,y:Ai,Y:Di,Z:Si,"%":Ci},Y={a:u,A:a,b:o,B:f,c:c,d:Gr,e:Gr,H:Vr,I:Vr,j:Jr,L:ni,m:Xr,M:Kr,p:i,S:Qr,U:Hr,w:Yr,W:Br,x:s,X:l,y:Wr,Y:$r,Z:Zr,"%":ti};return j.x=t(w,j),j.X=t(k,j),j.c=t(_,j),I.x=t(w,I),I.X=t(k,I),I.c=t(_,I),{format:function(n){var e=t(n+="",j);return e.toString=function(){return n},e},parse:function(n){var t=e(n+="",qr);return t.toString=function(){return n},t},utcFormat:function(n){var e=t(n+="",I);return e.toString=function(){return n},e},utcParse:function(n){var t=e(n,Fr);return t.toString=function(){return n},t}}}function Or(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",u=i.length;return r+(u<e?new Array(e-u+1).join(t)+i:i)}function Pr(n){return n.replace(_d,"\\$&")}function jr(n){return new RegExp("^(?:"+n.map(Pr).join("|")+")","i")}function Ir(n){for(var t={},e=-1,r=n.length;++e<r;)t[n[e].toLowerCase()]=e;return t}function Yr(n,t,e){var r=xd.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Hr(n,t,e){var r=xd.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Br(n,t,e){var r=xd.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function $r(n,t,e){var r=xd.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Wr(n,t,e){var r=xd.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Zr(n,t,e){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Xr(n,t,e){var r=xd.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Gr(n,t,e){var r=xd.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function Jr(n,t,e){var r=xd.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function Vr(n,t,e){var r=xd.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Kr(n,t,e){var r=xd.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function Qr(n,t,e){var r=xd.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ni(n,t,e){var r=xd.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ti(n,t,e){var r=Md.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ei(n,t){return Or(n.getDate(),t,2)}function ri(n,t){return Or(n.getHours(),t,2)}function ii(n,t){return Or(n.getHours()%12||12,t,2)}function ui(n,t){return Or(1+ed.count(ad(n),n),t,3)}function ai(n,t){return Or(n.getMilliseconds(),t,3)}function oi(n,t){return Or(n.getMonth()+1,t,2)}function fi(n,t){return Or(n.getMinutes(),t,2)}function ci(n,t){return Or(n.getSeconds(),t,2)}function si(n,t){return Or(rd.count(ad(n),n),t,2)}function li(n){return n.getDay()}function hi(n,t){return Or(id.count(ad(n),n),t,2)}function di(n,t){return Or(n.getFullYear()%100,t,2)}function pi(n,t){return Or(n.getFullYear()%1e4,t,4)}function vi(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Or(t/60|0,"0",2)+Or(t%60,"0",2)}function gi(n,t){return Or(n.getUTCDate(),t,2)}function mi(n,t){return Or(n.getUTCHours(),t,2)}function yi(n,t){return Or(n.getUTCHours()%12||12,t,2)}function bi(n,t){return Or(1+cd.count(dd(n),n),t,3)}function xi(n,t){return Or(n.getUTCMilliseconds(),t,3)}function Mi(n,t){return Or(n.getUTCMonth()+1,t,2)}function _i(n,t){return Or(n.getUTCMinutes(),t,2)}function wi(n,t){return Or(n.getUTCSeconds(),t,2)}function ki(n,t){return Or(sd.count(dd(n),n),t,2)}function Ni(n){return n.getUTCDay()}function Ei(n,t){return Or(ld.count(dd(n),n),t,2)}function Ai(n,t){return Or(n.getUTCFullYear()%100,t,2)}function Di(n,t){return Or(n.getUTCFullYear()%1e4,t,4)}function Si(){return"+0000"}function Ci(){return"%"}function Ui(n){return pd=Lr(n),vd=pd.format,gd=pd.parse,md=pd.utcFormat,yd=pd.utcParse,pd}function Ti(n){return n.toISOString()}function Ri(n){var t=new Date(n);return isNaN(t)?null:t}function qi(n){return new Date(n)}function Fi(n){return n instanceof Date?+n:+new Date((+n))}function zi(n,t,e,r,i,a,o,f,c){function l(u){return(o(u)<u?g:a(u)<u?m:i(u)<u?y:r(u)<u?b:t(u)<u?e(u)<u?x:M:n(u)<u?_:w)(u)}function h(t,e,r,i){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-e)/t,o=u(function(n){return n[2]}).right(k,a);o===k.length?(i=s(e/Cd,r/Cd,t),t=n):o?(o=k[a/k[o-1][2]<k[o][2]/a?o-1:o],i=o[1],t=o[0]):(i=s(e,r,t),t=f)}return null==i?t:t.every(i)}var d=hr(ar,Je),p=d.invert,v=d.domain,g=c(".%L"),m=c(":%S"),y=c("%I:%M"),b=c("%I %p"),x=c("%a %d"),M=c("%b %d"),_=c("%B"),w=c("%Y"),k=[[o,1,kd],[o,5,5*kd],[o,15,15*kd],[o,30,30*kd],[a,1,Nd],[a,5,5*Nd],[a,15,15*Nd],[a,30,30*Nd],[i,1,Ed],[i,3,3*Ed],[i,6,6*Ed],[i,12,12*Ed],[r,1,Ad],[r,2,2*Ad],[e,1,Dd],[t,1,Sd],[t,3,3*Sd],[n,1,Cd]];return d.invert=function(n){return new Date(p(n))},d.domain=function(n){return arguments.length?v(oh.call(n,Fi)):v().map(qi)},d.ticks=function(n,t){var e,r=v(),i=r[0],u=r[r.length-1],a=u<i;return a&&(e=i,i=u,u=e),e=h(n,i,u,t),e=e?e.range(i,u+1):[],a?e.reverse():e},d.tickFormat=function(n,t){return null==t?l:c(t)},d.nice=function(n,t){var e=v();return(n=h(n,e[0],e[e.length-1],t))?v(mr(e,n)):d},d.copy=function(){return lr(d,zi(n,t,e,r,i,a,o,f,c))},d}function Li(){return zi(ad,ud,rd,ed,td,nd,Qh,Zh,vd).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function Oi(){return zi(dd,hd,sd,cd,fd,od,Qh,Zh,md).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function Pi(n){return n.match(/.{6}/g).map(function(n){return"#"+n})}function ji(n){(n<0||n>1)&&(n-=Math.floor(n));var t=Math.abs(n-.5);return Od.h=360*n-100,Od.s=1.5-1.5*t,Od.l=.8-.9*t,Od+""}function Ii(n){var t=n.length;return function(e){return n[Math.max(0,Math.min(t-1,Math.floor(e*t)))]}}function Yi(n){function t(t){var u=(t-e)/(r-e);return n(i?Math.max(0,Math.min(1,u)):u)}var e=0,r=1,i=!1;return t.domain=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.clamp=function(n){return arguments.length?(i=!!n,t):i},t.interpolator=function(e){return arguments.length?(n=e,t):n},t.copy=function(){return Yi(n).domain([e,r]).clamp(i)},pr(t)}function Hi(n){function t(n){if(i.hasOwnProperty(n))return u(i[n])}var e=[],r=0,i={},u=n?Yi(n):vr();return t.domain=function(n){if(!arguments.length)return e.slice();e=n.slice(),r=e.length,i={};for(var a=0;a<r;)i[e[a]]=a++;return u.domain([0,r-1]),t},n||(t.invert=function(n){return e[u.invert(n)]},t.invertExtent=function(n,i){if(arguments.length<2)return void 0!==(a=t.invert(n))?[a]:[];var a,o=u.invert(n),f=u.invert(i);return o>f&&(a=o,o=f,f=a),f<0||o>=r?[]:e.slice(Math.max(0,Math.ceil(o)),Math.min(r,Math.floor(f)+1))}),(n?["interpolator"]:["interpolate","range","rangeRound"]).forEach(function(n){t[n]=function(){var e=u[n].apply(null,arguments);return arguments.length?t:e}}),t.copy=function(){return(n?Hi(n).interpolator(u.interpolator()):Hi().interpolate(u.interpolate()).range(u.range())).domain(e)},t}function Bi(n,t){return arguments.length>1?(Hd[n]=t,this):Hd.hasOwnProperty(n)?Hd[n]:null}function $i(n){return n.match(/.{6}/g).map(function(n){return"#"+n})}function Wi(n){return jh($i(n))}function Zi(n,t){return arguments.length>1?(Np[n]=t,this):Np.hasOwnProperty(n)?Np[n]:null}function Xi(n){wn.call(this,null,n),this.modified(!0)}function Gi(n,t){var e,r=(n||"linear").toLowerCase();return r&&(e=Bi(r))||P("Unrecognized scale type: "+n),t&&!(t=Zi(t))&&P("Unrecognized scale scheme: "+t),e=e(t),e.type=r,e}function Ji(n,t){var e=t.domain;if(!e)return 0;if(t.zero||null!=t.domainMin||null!=t.domainMax){var r=(e=e.slice()).length-1;t.zero&&(e[0]>0&&(e[0]=0),e[r]<0&&(e[r]=0)),null!=t.domainMin&&(e[0]=t.domainMin),null!=t.domainMax&&(e[r]=t.domainMax)}return n.domain(e),t.nice&&n.nice&&n.nice(t.nice!==!0&&+t.nice||null),e.length}function Vi(n,t,e){var r=n.type,i=t.range;null!=t.bandSize&&("band"!==r&&"point"!==r&&P("Only band and point scales support bandSize."),i=[0,t.bandSize*e]),i&&n[t.round?"rangeRound":"range"](i)}function Ki(n,t){function e(){var e,i,u=r.length,a=0,o=0;for(e=0;e<u;++e)i=r[e],a+=i.x,o+=i.y;for(a=a/u-n,o=o/u-t,e=0;e<u;++e)i=r[e],i.x-=a,i.y-=o}var r;return null==n&&(n=0),null==t&&(t=0),e.initialize=function(n){r=n},e.x=function(t){return arguments.length?(n=+t,e):n},e.y=function(n){return arguments.length?(t=+n,e):t},e}function Qi(n){return function(){return n}}function nu(){return 1e-6*(Math.random()-.5)}function tu(n){var t=+this._x.call(null,n),e=+this._y.call(null,n);return eu(this.cover(t,e),t,e,n)}function eu(n,t,e,r){if(isNaN(t)||isNaN(e))return n;var i,u,a,o,f,c,s,l,h,d=n._root,p={data:r},v=n._x0,g=n._y0,m=n._x1,y=n._y1;if(!d)return n._root=p,n;for(;d.length;)if((c=t>=(u=(v+m)/2))?v=u:m=u,(s=e>=(a=(g+y)/2))?g=a:y=a,i=d,!(d=d[l=s<<1|c]))return i[l]=p,n;if(o=+n._x.call(null,d.data),f=+n._y.call(null,d.data),t===o&&e===f)return p.next=d,i?i[l]=p:n._root=p,n;do i=i?i[l]=new Array(4):n._root=new Array(4),(c=t>=(u=(v+m)/2))?v=u:m=u,(s=e>=(a=(g+y)/2))?g=a:y=a;while((l=s<<1|c)===(h=(f>=a)<<1|o>=u));return i[h]=d,i[l]=p,n}function ru(n){var t,e,r,i,u=n.length,a=new Array(u),o=new Array(u),f=1/0,c=1/0,s=-(1/0),l=-(1/0);for(e=0;e<u;++e)isNaN(r=+this._x.call(null,t=n[e]))||isNaN(i=+this._y.call(null,t))||(a[e]=r,o[e]=i,r<f&&(f=r),r>s&&(s=r),i<c&&(c=i),i>l&&(l=i));for(s<f&&(f=this._x0,s=this._x1),l<c&&(c=this._y0,l=this._y1),this.cover(f,c).cover(s,l),e=0;e<u;++e)eu(this,a[e],o[e],n[e]);return this}function iu(n,t){if(isNaN(n=+n)||isNaN(t=+t))return this;var e=this._x0,r=this._y0,i=this._x1,u=this._y1;if(isNaN(e))i=(e=Math.floor(n))+1,u=(r=Math.floor(t))+1;else{if(!(e>n||n>i||r>t||t>u))return this;var a,o,f=i-e,c=this._root;switch(o=(t<(r+u)/2)<<1|n<(e+i)/2){case 0:do a=new Array(4),a[o]=c,c=a;while(f*=2,i=e+f,u=r+f,n>i||t>u);break;case 1:do a=new Array(4),a[o]=c,c=a;while(f*=2,e=i-f,u=r+f,e>n||t>u);break;case 2:do a=new Array(4),a[o]=c,c=a;while(f*=2,i=e+f,r=u-f,n>i||r>t);break;case 3:do a=new Array(4),a[o]=c,c=a;while(f*=2,e=i-f,r=u-f,e>n||r>t)}this._root&&this._root.length&&(this._root=c)}return this._x0=e,this._y0=r,this._x1=i,this._y1=u,this}function uu(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n}function au(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ou(n,t,e,r,i){this.node=n,this.x0=t,this.y0=e,this.x1=r,this.y1=i}function fu(n,t,e){var r,i,u,a,o,f,c,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new ou(v,s,l,h,d)),null==e?e=1/0:(s=n-e,l=t-e,h=n+e,d=t+e,e*=e);f=p.pop();)if(!(!(v=f.node)||(i=f.x0)>h||(u=f.y0)>d||(a=f.x1)<s||(o=f.y1)<l))if(v.length){var g=(i+a)/2,m=(u+o)/2;p.push(new ou(v[3],g,m,a,o),new ou(v[2],i,m,g,o),new ou(v[1],g,u,a,m),new ou(v[0],i,u,g,m)),(c=(t>=m)<<1|n>=g)&&(f=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=f)}else{var y=n-+this._x.call(null,v.data),b=t-+this._y.call(null,v.data),x=y*y+b*b;if(x<e){var M=Math.sqrt(e=x);s=n-M,l=t-M,h=n+M,d=t+M,r=v.data}}return r}function cu(n){if(isNaN(u=+this._x.call(null,n))||isNaN(a=+this._y.call(null,n)))return this;var t,e,r,i,u,a,o,f,c,s,l,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=u>=(o=(p+g)/2))?p=o:g=o,(s=a>=(f=(v+m)/2))?v=f:m=f,t=d,!(d=d[l=s<<1|c]))return this;if(!d.length)break;(t[l+1&3]||t[l+2&3]||t[l+3&3])&&(e=t,h=l)}for(;d.data!==n;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):t?(i?t[l]=i:delete t[l],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)}function su(n){for(var t=0,e=n.length;t<e;++t)this.remove(n[t]);return this}function lu(){return this._root}function hu(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n}function du(n){var t,e,r,i,u,a,o=[],f=this._root;for(f&&o.push(new ou(f,this._x0,this._y0,this._x1,this._y1));t=o.pop();)if(!n(f=t.node,r=t.x0,i=t.y0,u=t.x1,a=t.y1)&&f.length){var c=(r+u)/2,s=(i+a)/2;(e=f[3])&&o.push(new ou(e,c,s,u,a)),(e=f[2])&&o.push(new ou(e,r,s,c,a)),(e=f[1])&&o.push(new ou(e,c,i,u,s)),(e=f[0])&&o.push(new ou(e,r,i,c,s))}return this}function pu(n){var t,e=[],r=[];for(this._root&&e.push(new ou(this._root,this._x0,this._y0,this._x1,this._y1));t=e.pop();){var i=t.node;if(i.length){var u,a=t.x0,o=t.y0,f=t.x1,c=t.y1,s=(a+f)/2,l=(o+c)/2;(u=i[0])&&e.push(new ou(u,a,o,s,l)),(u=i[1])&&e.push(new ou(u,s,o,f,l)),(u=i[2])&&e.push(new ou(u,a,l,s,c)),(u=i[3])&&e.push(new ou(u,s,l,f,c))}r.push(t)}for(;t=r.pop();)n(t.node,t.x0,t.y0,t.x1,t.y1);return this}function vu(n){return n[0]}function gu(n){return arguments.length?(this._x=n,this):this._x}function mu(n){return n[1]}function yu(n){return arguments.length?(this._y=n,this):this._y}function bu(n,t,e){var r=new xu(null==t?vu:t,null==e?mu:e,NaN,NaN,NaN,NaN);return null==n?r:r.addAll(n)}function xu(n,t,e,r,i,u){this._x=n,this._y=t,this._x0=e,this._y0=r,this._x1=i,this._y1=u,this._root=void 0}function Mu(n){for(var t={data:n.data},e=t;n=n.next;)e=e.next={data:n.data};return t}function _u(n){return n.x+n.vx}function wu(n){return n.y+n.vy}function ku(n){function t(){function n(n,e,r,i,a){var o=n.data,d=n.r,p=l+d;{if(!o)return e>c+p||i<c-p||r>s+p||a<s-p;if(o.index>t){var v=c-o.x-o.vx,g=s-o.y-o.vy,m=v*v+g*g;m<p*p&&(0===v&&(v=nu(),m+=v*v),0===g&&(g=nu(),m+=g*g),m=(p-(m=Math.sqrt(m)))/m*u,f.vx+=(v*=m)*(p=(d*=d)/(h+d)),f.vy+=(g*=m)*p,o.vx-=v*(p=1-p),o.vy-=g*p)}}}for(var t,o,f,c,s,l,h,d=r.length,p=0;p<a;++p)for(o=bu(r,_u,wu).visitAfter(e),t=0;t<d;++t)f=r[t],l=i[t],h=l*l,c=f.x+f.vx,s=f.y+f.vy,o.visit(n)}function e(n){if(n.data)return n.r=i[n.data.index];for(var t=n.r=0;t<4;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}var r,i,u=1,a=1;return"function"!=typeof n&&(n=Qi(null==n?1:+n)),t.initialize=function(t){var e,u=(r=t).length;for(i=new Array(u),e=0;e<u;++e)i[e]=+n(r[e],e,r)},t.iterations=function(n){return arguments.length?(a=+n,t):a},t.strength=function(n){return arguments.length?(u=+n,t):u},t.radius=function(e){return arguments.length?(n="function"==typeof e?e:Qi(+e),t):n},t}function Nu(n,t){return t}function Eu(n){function t(n){return 1/Math.min(c[n.source.index],c[n.target.index])}function e(t){for(var e=0,r=n.length;e<p;++e)for(var i,u,f,c,l,h,d,v=0;v<r;++v)i=n[v],u=i.source,f=i.target,c=f.x+f.vx-u.x-u.vx||nu(),l=f.y+f.vy-u.y-u.vy||nu(),h=Math.sqrt(c*c+l*l),h=(h-o[v])/h*t*a[v],c*=h,l*=h,f.vx-=c*(d=s[v]),f.vy-=l*d,u.vx+=c*(d=1-d),u.vy+=l*d}function r(){if(f){var t,e,r=f.length,h=n.length,d=Un(f,l);for(t=0,c=new Array(r);t<r;++t)c[t]=0;for(t=0;t<h;++t)e=n[t],e.index=t,"object"!=typeof e.source&&(e.source=d.get(e.source)),"object"!=typeof e.target&&(e.target=d.get(e.target)),++c[e.source.index],++c[e.target.index];for(t=0,s=new Array(h);t<h;++t)e=n[t],s[t]=c[e.source.index]/(c[e.source.index]+c[e.target.index]);a=new Array(h),i(),o=new Array(h),u()}}function i(){if(f)for(var t=0,e=n.length;t<e;++t)a[t]=+h(n[t],t,n)}function u(){if(f)for(var t=0,e=n.length;t<e;++t)o[t]=+d(n[t],t,n)}var a,o,f,c,s,l=Nu,h=t,d=Qi(30),p=1;return null==n&&(n=[]),e.initialize=function(n){f=n,r()},e.links=function(t){return arguments.length?(n=t,r(),e):n},e.id=function(n){return arguments.length?(l=n,e):l},e.iterations=function(n){return arguments.length?(p=+n,e):p},e.strength=function(n){return arguments.length?(h="function"==typeof n?n:Qi(+n),i(),e):h},e.distance=function(n){return arguments.length?(d="function"==typeof n?n:Qi(+n),u(),e):d},e}function Au(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r)throw new Error("illegal type: "+n);r[n]=[]}return new Du(r)}function Du(n){this._=n}function Su(n,t){return n.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");if(r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}})}function Cu(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}function Uu(n,t,e){for(var r=0,i=n.length;r<i;++r)if(n[r].name===t){n[r]=Sp,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=e&&n.push({name:t,value:e}),n}function Tu(){return Lp||(jp(Ru),Lp=Pp.now()+Op)}function Ru(){Lp=0}function qu(){this._call=this._time=this._next=null}function Fu(n,t,e){var r=new qu;return r.restart(n,t,e),r}function zu(){Tu(),++Tp;for(var n,t=Cp;t;)(n=Lp-t._time)>=0&&t._call.call(null,n),t=t._next;--Tp}function Lu(n){Lp=(zp=n||Pp.now())+Op,Tp=Rp=0;try{zu()}finally{Tp=0,Pu(),Lp=0}}function Ou(){var n=Pp.now(),t=n-zp;t>Fp&&(Op-=t,zp=n)}function Pu(){for(var n,t,e=Cp,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Cp=t);Up=n,ju(r)}function ju(n){if(!Tp){Rp&&(Rp=clearTimeout(Rp));var t=n-Lp;t>24?(n<1/0&&(Rp=setTimeout(Lu,t)),qp&&(qp=clearInterval(qp))):(qp||(qp=setInterval(Ou,Fp)),Tp=1,jp(Lu))}}function Iu(n){return n.x}function Yu(n){return n.y}function Hu(n){function t(){e(),d.call("tick",u),a<o&&(h.stop(),d.call("end",u))}function e(){var t,e,r=n.length;for(a+=(c-a)*f,l.each(function(n){n(a)}),t=0;t<r;++t)e=n[t],null==e.fx?e.x+=e.vx*=s:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=s:(e.y=e.fy,e.vy=0)}function r(){for(var t,e=0,r=n.length;e<r;++e){if(t=n[e],t.index=e,isNaN(t.x)||isNaN(t.y)){var i=Ip*Math.sqrt(e),u=e*Yp;t.x=i*Math.cos(u),t.y=i*Math.sin(u)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function i(t){return t.initialize&&t.initialize(n),t}var u,a=1,o=.001,f=1-Math.pow(o,1/300),c=0,s=.6,l=Un(),h=Fu(t),d=Au("tick","end");return null==n&&(n=[]),r(),u={tick:e,restart:function(){return h.restart(t),u},stop:function(){return h.stop(),u},nodes:function(t){return arguments.length?(n=t,r(),l.each(i),u):n},alpha:function(n){return arguments.length?(a=+n,u):a},alphaMin:function(n){return arguments.length?(o=+n,u):o},alphaDecay:function(n){return arguments.length?(f=+n,u):+f},alphaTarget:function(n){return arguments.length?(c=+n,u):c},velocityDecay:function(n){return arguments.length?(s=1-n,u):1-s},force:function(n,t){return arguments.length>1?(null==t?l.remove(n):l.set(n,i(t)),u):l.get(n)},find:function(t,e,r){var i,u,a,o,f,c=0,s=n.length;for(null==r?r=1/0:r*=r,c=0;c<s;++c)o=n[c],i=t-o.x,u=e-o.y,a=i*i+u*u,a<r&&(f=o,r=a);return f},on:function(n,t){return arguments.length>1?(d.on(n,t),u):d.on(n)}}}function Bu(){function n(n){var t,o=i.length,f=bu(i,Iu,Yu).visitAfter(e);for(a=n,t=0;t<o;++t)u=i[t],f.visit(r)}function t(){if(i){var n,t=i.length;for(o=new Array(t),n=0;n<t;++n)o[n]=+f(i[n],n,i)}}function e(n){var t,e,r,i,u,a=0;if(n.length){for(r=i=u=0;u<4;++u)(t=n[u])&&(e=t.value)&&(a+=e,r+=e*t.x,i+=e*t.y);n.x=r/a,n.y=i/a}else{t=n,t.x=t.data.x,t.y=t.data.y;do a+=o[t.data.index];while(t=t.next)}n.value=a}function r(n,t,e,r){if(!n.value)return!0;var i=n.x-u.x,f=n.y-u.y,h=r-t,d=i*i+f*f;if(h*h/l<d)return d<s&&(0===i&&(i=nu(),d+=i*i),0===f&&(f=nu(),d+=f*f),d<c&&(d=Math.sqrt(c*d)),u.vx+=i*n.value*a/d,u.vy+=f*n.value*a/d),!0;if(!(n.length||d>=s)){(n.data!==u||n.next)&&(0===i&&(i=nu(),d+=i*i),0===f&&(f=nu(),d+=f*f),d<c&&(d=Math.sqrt(c*d)));do n.data!==u&&(h=o[n.data.index]*a/d,u.vx+=i*h,u.vy+=f*h);while(n=n.next)}}var i,u,a,o,f=Qi(-30),c=1,s=1/0,l=.81;return n.initialize=function(n){i=n,t()},n.strength=function(e){return arguments.length?(f="function"==typeof e?e:Qi(+e),t(),n):f},n.distanceMin=function(t){return arguments.length?(c=t*t,n):Math.sqrt(c)},n.distanceMax=function(t){return arguments.length?(s=t*t,n):Math.sqrt(s)},n.theta=function(t){return arguments.length?(l=t*t,n):Math.sqrt(l)},n}function $u(n){function t(n){for(var t,e=0,a=r.length;e<a;++e)t=r[e],t.vx+=(u[e]-t.x)*i[e]*n}function e(){if(r){var t,e=r.length;for(i=new Array(e),u=new Array(e),t=0;t<e;++t)i[t]=isNaN(u[t]=+n(r[t],t,r))?0:+a(r[t],t,r)}}var r,i,u,a=Qi(.1);return"function"!=typeof n&&(n=Qi(null==n?0:+n)),t.initialize=function(n){r=n,e()},t.strength=function(n){return arguments.length?(a="function"==typeof n?n:Qi(+n),e(),t):a},t.x=function(r){return arguments.length?(n="function"==typeof r?r:Qi(+r),e(),t):n},t}function Wu(n){function t(n){for(var t,e=0,a=r.length;e<a;++e)t=r[e],t.vy+=(u[e]-t.y)*i[e]*n}function e(){if(r){var t,e=r.length;for(i=new Array(e),u=new Array(e),t=0;t<e;++t)i[t]=isNaN(u[t]=+n(r[t],t,r))?0:+a(r[t],t,r)}}var r,i,u,a=Qi(.1);return"function"!=typeof n&&(n=Qi(null==n?0:+n)),t.initialize=function(n){r=n,e()},t.strength=function(n){return arguments.length?(a="function"==typeof n?n:Qi(+n),e(),t):a},t.y=function(r){return arguments.length?(n="function"==typeof r?r:Qi(+r),e(),t):n},t}function Zu(n){wn.call(this,null,n)}function Xu(n,t){return function(){n.touch(t).run()}}function Gu(n,t){var e=Hu(n),r=!1,i=e.stop,u=e.restart;return e.stopped=function(){return r},e.restart=function(){return r=!1,u()},e.stop=function(){return r=!0,i()},Ju(e,t,!0).on("end",function(){r=!0})}function Ju(n,t,e){var r,i,u,a=F(t.forces);for(r=0,i=$p.length;r<i;++r)u=$p[r],u!==Bp&&t.modified(u)&&n[u](t[u]);for(r=0,i=a.length;r<i;++r)(e||t.modified(Bp,r))&&n.force(Bp+r,Vu(a[r]));for(i=n.numForces||0;r<i;++r)n.force(Bp+r,null);return n.numForces=a.length,n}function Vu(n){var t,e;Hp.has(n.force)||P("Unrecognized force: "+n.force),t=Hp.get(n.force)();for(e in n)L(t[e])&&t[e](n[e]);return t}function Ku(n){return n.source.x}function Qu(n){return n.source.y}function na(n){return n.target.x}function ta(n){return n.target.y}function ea(n){wn.call(this,{},n)}function ra(n,t,e,r){return"M"+n+","+t+"L"+e+","+r}function ia(n,t,e,r){return ra(t*Math.cos(n),t*Math.sin(n),r*Math.cos(e),r*Math.sin(e))}function ua(n,t,e,r){var i=e-n,u=r-t,a=.2*(i+u),o=.2*(u-i);return"M"+n+","+t+"C"+(n+a)+","+(t+o)+" "+(e+o)+","+(r-a)+" "+e+","+r}function aa(n,t,e,r){return ua(t*Math.cos(n),t*Math.sin(n),r*Math.cos(e),r*Math.sin(e))}function oa(n,t,e,r){return"M"+n+","+t+"V"+r+"H"+e}function fa(n,t,e,r){return"M"+n+","+t+"H"+e+"V"+r}function ca(n,t,e,r){var i=Math.cos(n),u=Math.sin(n),a=Math.cos(e),o=Math.sin(e),f=Math.abs(e-n)>Math.PI?e<=n:e>n;return"M"+t*i+","+t*u+"A"+t+","+t+" 0 0,"+(f?1:0)+" "+t*a+","+t*o+"L"+r*a+","+r*o}function sa(n,t,e,r){var i=(n+e)/2;return"M"+n+","+t+"C"+i+","+t+" "+i+","+r+" "+e+","+r}function la(n,t,e,r){var i=(t+r)/2;return"M"+n+","+t+"C"+n+","+i+" "+e+","+i+" "+e+","+r}function ha(n,t,e,r){var i=Math.cos(n),u=Math.sin(n),a=Math.cos(e),o=Math.sin(e),f=(t+r)/2;return"M"+t*i+","+t*u+"C"+f*i+","+f*u+" "+f*a+","+f*o+" "+r*a+","+r*o}function da(n){wn.call(this,null,n)}function pa(n){wn.call(this,null,n)}function va(n,t,e,r){var i,u,a,o,f,c,s,l,h,d=[],p=function(n){return n(f)};if(null==t)d.push(n.slice());else for(i={},u=0,a=n.length;u<a;++u)f=n[u],c=t.map(p),s=i[c]||(d.push(i[c]=[]),i[c]),s.push(f);for(c=0,h=0,o=d.length;c<o;++c){for(s=d[c],u=0,l=0,a=s.length;u<a;++u)l+=r(s[u]);s.sum=l,l>h&&(h=l),e&&s.sort(e)}return d.max=h,d}function ga(n){return function(){return n}}function ma(n){return n[0]}function ya(n){return n[1]}function ba(){this._=null}function xa(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function Ma(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function _a(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,
r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function wa(n){for(;n.L;)n=n.L;return n}function ka(n,t,e,r){var i=[null,null],u=uv.push(i)-1;return i.left=n,i.right=t,e&&Ea(i,n,t,e),r&&Ea(i,t,n,r),rv[n.index].halfedges.push(u),rv[t.index].halfedges.push(u),i}function Na(n,t,e){var r=[t,e];return r.left=n,r}function Ea(n,t,e,r){n[0]||n[1]?n.left===e?n[1]=r:n[0]=r:(n[0]=r,n.left=t,n.right=e)}function Aa(n,t,e,r,i){var u,a=n[0],o=n[1],f=a[0],c=a[1],s=o[0],l=o[1],h=0,d=1,p=s-f,v=l-c;if(u=t-f,p||!(u>0)){if(u/=p,p<0){if(u<h)return;u<d&&(d=u)}else if(p>0){if(u>d)return;u>h&&(h=u)}if(u=r-f,p||!(u<0)){if(u/=p,p<0){if(u>d)return;u>h&&(h=u)}else if(p>0){if(u<h)return;u<d&&(d=u)}if(u=e-c,v||!(u>0)){if(u/=v,v<0){if(u<h)return;u<d&&(d=u)}else if(v>0){if(u>d)return;u>h&&(h=u)}if(u=i-c,v||!(u<0)){if(u/=v,v<0){if(u>d)return;u>h&&(h=u)}else if(v>0){if(u<h)return;u<d&&(d=u)}return!(h>0||d<1)||(h>0&&(n[0]=[f+h*p,c+h*v]),d<1&&(n[1]=[f+d*p,c+d*v]),!0)}}}}}function Da(n,t,e,r,i){var u=n[1];if(u)return!0;var a,o,f=n[0],c=n.left,s=n.right,l=c[0],h=c[1],d=s[0],p=s[1],v=(l+d)/2,g=(h+p)/2;if(p===h){if(v<t||v>=r)return;if(l>d){if(f){if(f[1]>=i)return}else f=[v,e];u=[v,i]}else{if(f){if(f[1]<e)return}else f=[v,i];u=[v,e]}}else if(a=(l-d)/(p-h),o=g-a*v,a<-1||a>1)if(l>d){if(f){if(f[1]>=i)return}else f=[(e-o)/a,e];u=[(i-o)/a,i]}else{if(f){if(f[1]<e)return}else f=[(i-o)/a,i];u=[(e-o)/a,e]}else if(h<p){if(f){if(f[0]>=r)return}else f=[t,a*t+o];u=[r,a*r+o]}else{if(f){if(f[0]<t)return}else f=[r,a*r+o];u=[t,a*t+o]}return n[0]=f,n[1]=u,!0}function Sa(n,t,e,r){for(var i,u=uv.length;u--;)Da(i=uv[u],n,t,e,r)&&Aa(i,n,t,e,r)&&(Math.abs(i[0][0]-i[1][0])>fv||Math.abs(i[0][1]-i[1][1])>fv)||delete uv[u]}function Ca(n){return rv[n.index]={site:n,halfedges:[]}}function Ua(n,t){var e=n.site,r=t.left,i=t.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ta(n,t){return t[+(t.left!==n.site)]}function Ra(n,t){return t[+(t.left===n.site)]}function qa(){for(var n,t,e,r,i=0,u=rv.length;i<u;++i)if((n=rv[i])&&(r=(t=n.halfedges).length)){var a=new Array(r),o=new Array(r);for(e=0;e<r;++e)a[e]=e,o[e]=Ua(n,uv[t[e]]);for(a.sort(function(n,t){return o[t]-o[n]}),e=0;e<r;++e)o[e]=t[a[e]];for(e=0;e<r;++e)t[e]=o[e]}}function Fa(n,t,e,r){var i,u,a,o,f,c,s,l,h,d,p,v,g=rv.length,m=!0;for(i=0;i<g;++i)if(u=rv[i]){for(a=u.site,f=u.halfedges,o=f.length;o--;)uv[f[o]]||f.splice(o,1);for(o=0,c=f.length;o<c;)d=Ra(u,uv[f[o]]),p=d[0],v=d[1],s=Ta(u,uv[f[++o%c]]),l=s[0],h=s[1],(Math.abs(p-l)>fv||Math.abs(v-h)>fv)&&(f.splice(o,0,uv.push(Na(a,d,Math.abs(p-n)<fv&&r-v>fv?[n,Math.abs(l-n)<fv?h:r]:Math.abs(v-r)<fv&&e-p>fv?[Math.abs(h-r)<fv?l:e,r]:Math.abs(p-e)<fv&&v-t>fv?[e,Math.abs(l-e)<fv?h:t]:Math.abs(v-t)<fv&&p-n>fv?[Math.abs(h-t)<fv?l:n,t]:null))-1),++c);c&&(m=!1)}if(m){var y,b,x,M=1/0;for(i=0,m=null;i<g;++i)(u=rv[i])&&(a=u.site,y=a[0]-n,b=a[1]-t,x=y*y+b*b,x<M&&(M=x,m=u));if(m){var _=[n,t],w=[n,r],k=[e,r],N=[e,t];m.halfedges.push(uv.push(Na(a=m.site,_,w))-1,uv.push(Na(a,w,k))-1,uv.push(Na(a,k,N))-1,uv.push(Na(a,N,_))-1)}}for(i=0;i<g;++i)(u=rv[i])&&(u.halfedges.length||delete rv[i])}function za(){xa(this),this.x=this.y=this.arc=this.site=this.cy=null}function La(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,u=e.site;if(r!==u){var a=i[0],o=i[1],f=r[0]-a,c=r[1]-o,s=u[0]-a,l=u[1]-o,h=2*(f*l-c*s);if(!(h>=-cv)){var d=f*f+c*c,p=s*s+l*l,v=(l*d-c*p)/h,g=(f*p-s*d)/h,m=av.pop()||new za;m.arc=n,m.site=i,m.x=v+a,m.y=(m.cy=g+o)+Math.sqrt(v*v+g*g),n.circle=m;for(var y=null,b=iv._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}iv.insert(y,m),y||(tv=m)}}}}function Oa(n){var t=n.circle;t&&(t.P||(tv=t.N),iv.remove(t),av.push(t),xa(t),n.circle=null)}function Pa(){xa(this),this.edge=this.site=this.circle=null}function ja(n){var t=ov.pop()||new Pa;return t.site=n,t}function Ia(n){Oa(n),ev.remove(n),ov.push(n),xa(n)}function Ya(n){var t=n.circle,e=t.x,r=t.cy,i=[e,r],u=n.P,a=n.N,o=[n];Ia(n);for(var f=u;f.circle&&Math.abs(e-f.circle.x)<fv&&Math.abs(r-f.circle.cy)<fv;)u=f.P,o.unshift(f),Ia(f),f=u;o.unshift(f),Oa(f);for(var c=a;c.circle&&Math.abs(e-c.circle.x)<fv&&Math.abs(r-c.circle.cy)<fv;)a=c.N,o.push(c),Ia(c),c=a;o.push(c),Oa(c);var s,l=o.length;for(s=1;s<l;++s)c=o[s],f=o[s-1],Ea(c.edge,f.site,c.site,i);f=o[0],c=o[l-1],c.edge=ka(f.site,c.site,null,i),La(f),La(c)}function Ha(n){for(var t,e,r,i,u=n[0],a=n[1],o=ev._;o;)if(r=Ba(o,a)-u,r>fv)o=o.L;else{if(i=u-$a(o,a),!(i>fv)){r>-fv?(t=o.P,e=o):i>-fv?(t=o,e=o.N):t=e=o;break}if(!o.R){t=o;break}o=o.R}Ca(n);var f=ja(n);if(ev.insert(t,f),t||e){if(t===e)return Oa(t),e=ja(t.site),ev.insert(f,e),f.edge=e.edge=ka(t.site,f.site),La(t),void La(e);if(!e)return void(f.edge=ka(t.site,f.site));Oa(t),Oa(e);var c=t.site,s=c[0],l=c[1],h=n[0]-s,d=n[1]-l,p=e.site,v=p[0]-s,g=p[1]-l,m=2*(h*g-d*v),y=h*h+d*d,b=v*v+g*g,x=[(g*y-d*b)/m+s,(h*b-v*y)/m+l];Ea(e.edge,c,p,x),f.edge=ka(c,n,null,x),e.edge=ka(n,p,null,x),La(t),La(e)}}function Ba(n,t){var e=n.site,r=e[0],i=e[1],u=i-t;if(!u)return r;var a=n.P;if(!a)return-(1/0);e=a.site;var o=e[0],f=e[1],c=f-t;if(!c)return o;var s=o-r,l=1/u-1/c,h=s/c;return l?(-h+Math.sqrt(h*h-2*l*(s*s/(-2*c)-f+c/2+i-u/2)))/l+r:(r+o)/2}function $a(n,t){var e=n.N;if(e)return Ba(e,t);var r=n.site;return r[1]===t?r[0]:1/0}function Wa(n,t,e){return(n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1])}function Za(n,t){return t[1]-n[1]||t[0]-n[0]}function Xa(n,t){var e,r,i,u=n.sort(Za).pop();for(uv=[],rv=new Array(n.length),ev=new ba,iv=new ba;;)if(i=tv,u&&(!i||u[1]<i.y||u[1]===i.y&&u[0]<i.x))u[0]===e&&u[1]===r||(Ha(u),e=u[0],r=u[1]),u=n.pop();else{if(!i)break;Ya(i.arc)}if(qa(),t){var a=+t[0][0],o=+t[0][1],f=+t[1][0],c=+t[1][1];Sa(a,o,f,c),Fa(a,o,f,c)}this.edges=uv,this.cells=rv,ev=iv=uv=rv=null}function Ga(){function n(n){return new Xa(n.map(function(r,i){var u=[Math.round(t(r,i,n)/fv)*fv,Math.round(e(r,i,n)/fv)*fv];return u.index=i,u.data=r,u}),r)}var t=ma,e=ya,r=null;return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(e){return arguments.length?(t="function"==typeof e?e:ga(+e),n):t},n.y=function(t){return arguments.length?(e="function"==typeof t?t:ga(+t),n):e},n.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}function Ja(n){wn.call(this,null,n)}function Va(){return new Ka}function Ka(){this.reset()}function Qa(n,t,e){var r=n.s=t+e,i=r-t,u=r-i;n.t=t-u+(e-i)}function no(n){return n>1?0:n<-1?_v:Math.acos(n)}function to(n){return n>1?wv:n<-1?-wv:Math.asin(n)}function eo(){}function ro(n,t){n&&Iv.hasOwnProperty(n.type)&&Iv[n.type](n,t)}function io(n,t,e){var r,i=-1,u=n.length-e;for(t.lineStart();++i<u;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function uo(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)io(n[e],t,1);t.polygonEnd()}function ao(n,t){n&&jv.hasOwnProperty(n.type)?jv[n.type](n,t):ro(n,t)}function oo(n){return[Cv(n[1],n[0]),to(n[2])]}function fo(n){var t=n[0],e=n[1],r=Uv(e);return[r*Uv(t),r*zv(t),zv(e)]}function co(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function so(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function lo(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ho(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function po(n){var t=Ov(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function vo(n,t){yv.push(bv=[hv=n,pv=n]),t<dv&&(dv=t),t>vv&&(vv=t)}function go(n,t){return(t-=n)<0?t+360:t}function mo(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function yo(n,t){return[n>_v?n-Nv:n<-_v?n+Nv:n,t]}function bo(n,t,e){return(n%=Nv)?t||e?mo(Mo(n),_o(t,e)):Mo(n):t||e?_o(t,e):yo}function xo(n){return function(t,e){return t+=n,[t>_v?t-Nv:t<-_v?t+Nv:t,e]}}function Mo(n){var t=xo(n);return t.invert=xo(-n),t}function _o(n,t){function e(n,t){var e=Uv(t),o=Uv(n)*e,f=zv(n)*e,c=zv(t),s=c*r+o*i;return[Cv(f*u-s*a,o*r-c*i),to(s*u+f*a)]}var r=Uv(n),i=zv(n),u=Uv(t),a=zv(t);return e.invert=function(n,t){var e=Uv(t),o=Uv(n)*e,f=zv(n)*e,c=zv(t),s=c*u-f*a;return[Cv(f*u+c*a,o*r+s*i),to(s*r-o*i)]},e}function wo(n,t,e,r,i,u){if(e){var a=Uv(t),o=zv(t),f=r*e;null==i?(i=t+r*Nv,u=t-f/2):(i=ko(a,i),u=ko(a,u),(r>0?i<u:i>u)&&(i+=r*Nv));for(var c,s=i;r>0?s>u:s<u;s-=f)c=oo([a,-o*Uv(s),-o*zv(s)]),n.point(c[0],c[1])}}function ko(n,t){t=fo(t),t[0]-=n,po(t);var e=no(-t[1]);return((-t[2]<0?-e:e)+Nv-Mv)%Nv}function No(){var n,t=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){t.push(n=[])},lineEnd:eo,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function Eo(n,t,e,r,i,u){var a,o=n[0],f=n[1],c=t[0],s=t[1],l=0,h=1,d=c-o,p=s-f;if(a=e-o,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>l&&(l=a)}if(a=i-o,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<h&&(h=a)}if(a=r-f,p||!(a>0)){if(a/=p,p<0){if(a<l)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>l&&(l=a)}if(a=u-f,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>l&&(l=a)}else if(p>0){if(a<l)return;a<h&&(h=a)}return l>0&&(n[0]=o+l*d,n[1]=f+l*p),h<1&&(t[0]=o+h*d,t[1]=f+h*p),!0}}}}}function Ao(n,t){return Dv(n[0]-t[0])<Mv&&Dv(n[1]-t[1])<Mv}function Do(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function So(n,t,e,r,i){var u,a,o=[],f=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e,r=n[0],a=n[t];if(Ao(r,a)){for(i.lineStart(),u=0;u<t;++u)i.point((r=n[u])[0],r[1]);return void i.lineEnd()}o.push(e=new Do(r,n,null,(!0))),f.push(e.o=new Do(r,null,e,(!1))),o.push(e=new Do(a,n,null,(!1))),f.push(e.o=new Do(a,null,e,(!0)))}}),o.length){for(f.sort(t),Co(o),Co(f),u=0,a=f.length;u<a;++u)f[u].e=e=!e;for(var c,s,l=o[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,a=c.length;u<a;++u)i.point((s=c[u])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((s=c[u])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Co(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Uo(n,t,e,r){function i(i,u){return n<=i&&i<=e&&t<=u&&u<=r}function u(i,u,o,c){var s=0,l=0;if(null==i||(s=a(i,o))!==(l=a(u,o))||f(i,u)<0^o>0){do c.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+o+4)%4)!==l)}else c.point(u[0],u[1])}function a(r,i){return Dv(r[0]-n)<Mv?i>0?0:3:Dv(r[0]-e)<Mv?i>0?2:1:Dv(r[1]-t)<Mv?i>0?1:0:i>0?3:2}function o(n,t){return f(n.x,t.x)}function f(n,t){var e=a(n,1),r=a(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function f(n,t){i(n,t)&&A.point(n,t)}function c(){for(var t=0,e=0,i=m.length;e<i;++e)for(var u,a,o=m[e],f=1,c=o.length,s=o[0],l=s[0],h=s[1];f<c;++f)u=l,a=h,s=o[f],l=s[0],h=s[1],a<=r?h>r&&(l-u)*(r-a)>(h-a)*(n-u)&&++t:h<=r&&(l-u)*(r-a)<(h-a)*(n-u)&&--t;return t}function s(){A=D,g=[],m=[],E=!0}function l(){var n=c(),t=E&&n,e=(g=v(g)).length;(t||e)&&(a.polygonStart(),t&&(a.lineStart(),u(null,null,1,a),a.lineEnd()),e&&So(g,o,n,u,a),a.polygonEnd()),A=a,g=m=y=null}function h(){S.point=p,m&&m.push(y=[]),N=!0,k=!1,_=w=NaN}function d(){g&&(p(b,x),M&&k&&D.rejoin(),g.push(D.result())),S.point=f,k&&A.lineEnd()}function p(u,a){var o=i(u,a);if(m&&y.push([u,a]),N)b=u,x=a,M=o,N=!1,o&&(A.lineStart(),A.point(u,a));else if(o&&k)A.point(u,a);else{var f=[_=Math.max(Vv,Math.min(Jv,_)),w=Math.max(Vv,Math.min(Jv,w))],c=[u=Math.max(Vv,Math.min(Jv,u)),a=Math.max(Vv,Math.min(Jv,a))];Eo(f,c,n,t,e,r)?(k||(A.lineStart(),A.point(f[0],f[1])),A.point(c[0],c[1]),o||A.lineEnd(),E=!1):o&&(A.lineStart(),A.point(u,a),E=!1)}_=u,w=a,k=o}var g,m,y,b,x,M,_,w,k,N,E,A=a,D=No(),S={point:f,lineStart:h,lineEnd:d,polygonStart:s,polygonEnd:l};return S}}function To(n,t,e){var r=f(n,t-Mv,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function Ro(n,t,e){var r=f(n,t-Mv,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function qo(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return f(Tv(u/m)*m,i,m).map(d).concat(f(Tv(s/y)*y,c,y).map(p)).concat(f(Tv(r/v)*v,e,v).filter(function(n){return Dv(n%m)>Mv}).map(l)).concat(f(Tv(o/g)*g,a,g).filter(function(n){return Dv(n%y)>Mv}).map(h))}var e,r,i,u,a,o,c,s,l,h,d,p,v=10,g=v,m=90,y=360,b=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[d(u).concat(p(c).slice(1),d(i).reverse().slice(1),p(s).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.extentMajor(t).extentMinor(t):n.extentMinor()},n.extentMajor=function(t){return arguments.length?(u=+t[0][0],i=+t[1][0],s=+t[0][1],c=+t[1][1],u>i&&(t=u,u=i,i=t),s>c&&(t=s,s=c,c=t),n.precision(b)):[[u,s],[i,c]]},n.extentMinor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),o>a&&(t=o,o=a,a=t),n.precision(b)):[[r,o],[e,a]]},n.step=function(t){return arguments.length?n.stepMajor(t).stepMinor(t):n.stepMinor()},n.stepMajor=function(t){return arguments.length?(m=+t[0],y=+t[1],n):[m,y]},n.stepMinor=function(t){return arguments.length?(v=+t[0],g=+t[1],n):[v,g]},n.precision=function(t){return arguments.length?(b=+t,l=To(o,a,90),h=Ro(r,e,b),d=To(s,c,90),p=Ro(u,i,b),n):b},n.extentMajor([[-180,-90+Mv],[180,90-Mv]]).extentMinor([[-180,-80-Mv],[180,80+Mv]])}function Fo(n){return n}function zo(){ng.point=Lo}function Lo(n,t){ng.point=Oo,Yv=Bv=n,Hv=$v=t}function Oo(n,t){Qv.add($v*n-Bv*t),Bv=n,$v=t}function Po(){Oo(Yv,Hv)}function jo(n,t){n<tg&&(tg=n),n>rg&&(rg=n),t<eg&&(eg=t),t>ig&&(ig=t)}function Io(n,t){ag+=n,og+=t,++fg}function Yo(){vg.point=Ho}function Ho(n,t){vg.point=Bo,Io(Xv=n,Gv=t)}function Bo(n,t){var e=n-Xv,r=t-Gv,i=Ov(e*e+r*r);cg+=i*(Xv+n)/2,sg+=i*(Gv+t)/2,lg+=i,Io(Xv=n,Gv=t)}function $o(){vg.point=Io}function Wo(){vg.point=Xo}function Zo(){Go(Wv,Zv)}function Xo(n,t){vg.point=Go,Io(Wv=Xv=n,Zv=Gv=t)}function Go(n,t){var e=n-Xv,r=t-Gv,i=Ov(e*e+r*r);cg+=i*(Xv+n)/2,sg+=i*(Gv+t)/2,lg+=i,i=Gv*n-Xv*t,hg+=i*(Xv+n),dg+=i*(Gv+t),pg+=3*i,Io(Xv=n,Gv=t)}function Jo(n){function t(t,e){n.moveTo(t+a,e),n.arc(t,e,a,0,Nv)}function e(t,e){n.moveTo(t,e),o.point=r}function r(t,e){n.lineTo(t,e)}function i(){o.point=t}function u(){n.closePath()}var a=4.5,o={point:t,lineStart:function(){o.point=e},lineEnd:i,polygonStart:function(){o.lineEnd=u},polygonEnd:function(){o.lineEnd=i,o.point=t},pointRadius:function(n){return a=n,o},result:eo};return o}function Vo(){function n(n,t){o.push("M",n,",",t,a)}function t(n,t){o.push("M",n,",",t),f.point=e}function e(n,t){o.push("L",n,",",t)}function r(){f.point=t}function i(){f.point=n}function u(){o.push("Z")}var a=Ko(4.5),o=[],f={point:n,lineStart:r,lineEnd:i,polygonStart:function(){f.lineEnd=u},polygonEnd:function(){f.lineEnd=i,f.point=n},pointRadius:function(n){return a=Ko(n),f},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return f}function Ko(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Qo(){function n(n){return n&&("function"==typeof u&&i.pointRadius(+u.apply(this,arguments)),ao(n,e(i))),i.result()}var t,e,r,i,u=4.5;return n.area=function(n){return ao(n,e(ng)),ng.result()},n.bounds=function(n){return ao(n,e(ug)),ug.result()},n.centroid=function(n){return ao(n,e(vg)),vg.result()},n.projection=function(r){return arguments.length?(e=null==(t=r)?Fo:r.stream,n):t},n.context=function(t){return arguments.length?(i=null==(r=t)?new Vo:new Jo(t),"function"!=typeof u&&i.pointRadius(u),n):r},n.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(i.pointRadius(+t),+t),n):u},n.projection(null).context(null)}function nf(n,t){for(var e=t[0],r=t[1],i=[zv(e),-Uv(e),0],u=0,a=0,o=0,f=n.length;o<f;++o)if(s=(c=n[o]).length)for(var c,s,l=c[s-1],h=l[0],d=l[1]/2+kv,p=zv(d),v=Uv(d),g=0;g<s;++g,h=y,p=x,v=M,l=m){var m=c[g],y=m[0],b=m[1]/2+kv,x=zv(b),M=Uv(b),_=y-h,w=_>=0?1:-1,k=w*_,N=k>_v,E=p*x;if(gg.add(Cv(E*w*zv(k),v*M+E*Uv(k))),u+=N?_+w*Nv:_,N^h>=e^y>=e){var A=so(fo(l),fo(m));po(A);var D=so(i,A);po(D);var S=(N^_>=0?-1:1)*to(D[2]);(r>S||r===S&&(A[0]||A[1]))&&(a+=N^_>=0?1:-1)}}var C=(u<-Mv||u<Mv&&gg<-Mv)^1&a;return gg.reset(),C}function tf(n,t,e,r){return function(i,u){function a(t,e){var r=i(t,e);n(t=r[0],e=r[1])&&u.point(t,e)}function o(n,t){var e=i(n,t);m.point(e[0],e[1])}function f(){_.point=o,m.lineStart()}function c(){_.point=a,m.lineEnd()}function s(n,t){g.push([n,t]);var e=i(n,t);x.point(e[0],e[1])}function l(){x.lineStart(),g=[]}function h(){s(g[0][0],g[0][1]),x.lineEnd();var n,t,e,r,i=x.clean(),a=b.result(),o=a.length;if(g.pop(),d.push(g),g=null,o)if(1&i){if(e=a[0],(t=e.length-1)>0){for(M||(u.polygonStart(),M=!0),u.lineStart(),n=0;n<t;++n)u.point((r=e[n])[0],r[1]);u.lineEnd()}}else o>1&&2&i&&a.push(a.pop().concat(a.shift())),p.push(a.filter(ef))}var d,p,g,m=t(u),y=i.invert(r[0],r[1]),b=No(),x=t(b),M=!1,_={point:a,lineStart:f,lineEnd:c,polygonStart:function(){_.point=s,_.lineStart=l,_.lineEnd=h,p=[],d=[]},polygonEnd:function(){_.point=a,_.lineStart=f,_.lineEnd=c,p=v(p);var n=nf(d,y);p.length?(M||(u.polygonStart(),M=!0),So(p,rf,n,e,u)):n&&(M||(u.polygonStart(),M=!0),u.lineStart(),e(null,null,1,u),u.lineEnd()),M&&(u.polygonEnd(),M=!1),p=d=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}};return _}}function ef(n){return n.length>1}function rf(n,t){return((n=n.x)[0]<0?n[1]-wv-Mv:wv-n[1])-((t=t.x)[0]<0?t[1]-wv-Mv:wv-t[1])}function uf(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(u,a){var o=u>0?_v:-_v,f=Dv(u-e);Dv(f-_v)<Mv?(n.point(e,r=(r+a)/2>0?wv:-wv),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(o,r),n.point(u,r),t=0):i!==o&&f>=_v&&(Dv(e-i)<Mv&&(e-=i*Mv),Dv(u-o)<Mv&&(u-=o*Mv),r=af(e,r,u,a),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(o,r),t=0),n.point(e=u,r=a),i=o},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function af(n,t,e,r){var i,u,a=zv(n-e);return Dv(a)>Mv?Sv((zv(t)*(u=Uv(r))*zv(e)-zv(r)*(i=Uv(t))*zv(n))/(i*u*a)):(t+r)/2}function of(n,t,e,r){var i;if(null==n)i=e*wv,r.point(-_v,i),r.point(0,i),r.point(_v,i),r.point(_v,0),r.point(_v,-i),r.point(0,-i),r.point(-_v,-i),r.point(-_v,0),r.point(-_v,i);else if(Dv(n[0]-t[0])>Mv){var u=n[0]<t[0]?_v:-_v;i=e*u/2,r.point(-u,i),r.point(0,i),r.point(u,i)}else r.point(t[0],t[1])}function ff(n,t){function e(e,r,i,u){wo(u,n,t,i,e,r)}function r(n,t){return Uv(n)*Uv(t)>o}function i(n){var t,e,i,o,s;return{lineStart:function(){o=i=!1,s=1},point:function(l,h){var d,p=[l,h],v=r(l,h),g=f?v?0:a(l,h):v?a(l+(l<0?_v:-_v),h):0;if(!t&&(o=i=v)&&n.lineStart(),v!==i&&(d=u(t,p),(Ao(t,d)||Ao(p,d))&&(p[0]+=Mv,p[1]+=Mv,v=r(p[0],p[1]))),v!==i)s=0,v?(n.lineStart(),d=u(p,t),n.point(d[0],d[1])):(d=u(t,p),n.point(d[0],d[1]),n.lineEnd()),t=d;else if(c&&t&&f^v){var m;g&e||!(m=u(p,t,!0))||(s=0,f?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||t&&Ao(t,p)||n.point(p[0],p[1]),t=p,i=v,e=g},lineEnd:function(){i&&n.lineEnd(),t=null},clean:function(){return s|(o&&i)<<1}}}function u(n,t,e){var r=fo(n),i=fo(t),u=[1,0,0],a=so(r,i),f=co(a,a),c=a[0],s=f-c*c;if(!s)return!e&&n;var l=o*f/s,h=-o*c/s,d=so(u,a),p=ho(u,l),v=ho(a,h);lo(p,v);var g=d,m=co(p,g),y=co(g,g),b=m*m-y*(co(p,p)-1);if(!(b<0)){var x=Ov(b),M=ho(g,(-m-x)/y);if(lo(M,p),M=oo(M),!e)return M;var _,w=n[0],k=t[0],N=n[1],E=t[1];k<w&&(_=w,w=k,k=_);var A=k-w,D=Dv(A-_v)<Mv,S=D||A<Mv;if(!D&&E<N&&(_=N,N=E,E=_),S?D?N+E>0^M[1]<(Dv(M[0]-w)<Mv?N:E):N<=M[1]&&M[1]<=E:A>_v^(w<=M[0]&&M[0]<=k)){var C=ho(g,(-m+x)/y);return lo(C,p),[M,oo(C)]}}}function a(t,e){var r=f?n:_v-n,i=0;return t<-r?i|=1:t>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var o=Uv(n),f=o>0,c=Dv(o)>Mv;return tf(r,i,e,f?[0,-n]:[-_v,n-_v])}function cf(n){function t(){}var e=t.prototype=Object.create(sf.prototype);for(var r in n)e[r]=n[r];return function(n){var e=new t;return e.stream=n,e}}function sf(){}function lf(n,t){return+t?df(n,t):hf(n)}function hf(n){return cf({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function df(n,t){function e(r,i,u,a,o,f,c,s,l,h,d,p,v,g){var m=c-r,y=s-i,b=m*m+y*y;if(b>4*t&&v--){var x=a+h,M=o+d,_=f+p,w=Ov(x*x+M*M+_*_),k=to(_/=w),N=Dv(Dv(_)-1)<Mv||Dv(u-l)<Mv?(u+l)/2:Cv(M,x),E=n(N,k),A=E[0],D=E[1],S=A-r,C=D-i,U=y*S-m*C;(U*U/b>t||Dv((m*S+y*C)/b-.5)>.3||a*h+o*d+f*p<bg)&&(e(r,i,u,a,o,f,A,D,N,x/=w,M/=w,_,v,g),g.point(A,D),e(A,D,N,x,M,_,c,s,l,h,d,p,v,g))}}return function(t){function r(e,r){e=n(e,r),t.point(e[0],e[1])}function i(){m=NaN,_.point=u,t.lineStart()}function u(r,i){var u=fo([r,i]),a=n(r,i);e(m,y,g,b,x,M,m=a[0],y=a[1],g=r,b=u[0],x=u[1],M=u[2],yg,t),t.point(m,y)}function a(){_.point=r,t.lineEnd()}function o(){i(),_.point=f,_.lineEnd=c}function f(n,t){u(s=n,t),l=m,h=y,d=b,p=x,v=M,_.point=u}function c(){e(m,y,g,b,x,M,l,h,s,d,p,v,yg,t),_.lineEnd=a,a()}var s,l,h,d,p,v,g,m,y,b,x,M,_={point:r,lineStart:i,lineEnd:a,polygonStart:function(){t.polygonStart(),_.lineStart=o},polygonEnd:function(){t.polygonEnd(),_.lineStart=i}};return _}}function pf(n){return vf(function(){return n})()}function vf(n){function t(n){return n=s(n[0]*Av,n[1]*Av),[n[0]*g+o,f-n[1]*g]}function e(n){return n=s.invert((n[0]-o)/g,(f-n[1])/g),n&&[n[0]*Ev,n[1]*Ev]}function r(n,t){return n=a(n,t),[n[0]*g+o,f-n[1]*g]}function i(){s=mo(c=bo(M,_,w),a);var n=a(b,x);return o=m-n[0]*g,f=y+n[1]*g,u()}function u(){return p=v=null,t}var a,o,f,c,s,l,h,d,p,v,g=150,m=480,y=250,b=0,x=0,M=0,_=0,w=0,k=null,N=mg,E=null,A=Fo,D=.5,S=lf(r,D);return t.stream=function(n){return p&&v===n?p:p=xg(N(c,S(A(v=n))))},t.clipAngle=function(n){return arguments.length?(N=+n?ff(k=n*Av,6*Av):(k=null,mg),u()):k*Ev},t.clipExtent=function(n){return arguments.length?(A=null==n?(E=l=h=d=null,Fo):Uo(E=+n[0][0],l=+n[0][1],h=+n[1][0],d=+n[1][1]),u()):null==E?null:[[E,l],[h,d]]},t.scale=function(n){return arguments.length?(g=+n,i()):g},t.translate=function(n){return arguments.length?(m=+n[0],y=+n[1],i()):[m,y]},t.center=function(n){return arguments.length?(b=n[0]%360*Av,x=n[1]%360*Av,i()):[b*Ev,x*Ev]},t.rotate=function(n){return arguments.length?(M=n[0]%360*Av,_=n[1]%360*Av,w=n.length>2?n[2]%360*Av:0,i()):[M*Ev,_*Ev,w*Ev]},t.precision=function(n){return arguments.length?(S=lf(r,D=n*n),u()):Ov(D)},function(){return a=n.apply(this,arguments),t.invert=a.invert&&e,i()}}function gf(n){var t=0,e=_v/3,r=vf(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*Av,e=n[1]*Av):[t*Ev,e*Ev]},i}function mf(n,t){function e(n,t){var e=Ov(u-2*i*zv(t))/i;return[e*zv(n*=i),a-e*Uv(n)]}var r=zv(n),i=(r+zv(t))/2,u=1+r*(2*i-r),a=Ov(u)/i;return e.invert=function(n,t){var e=a-t;return[Cv(n,e)/i,to((u-(n*n+e*e)*i*i)/(2*i))]},e}function yf(){return gf(mf).scale(155.424).center([0,33.6442])}function bf(){return yf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xf(n){var t=n.length;return{point:function(e,r){for(var i=-1;++i<t;)n[i].point(e,r)},sphere:function(){for(var e=-1;++e<t;)n[e].sphere()},lineStart:function(){for(var e=-1;++e<t;)n[e].lineStart()},lineEnd:function(){for(var e=-1;++e<t;)n[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<t;)n[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<t;)n[e].polygonEnd()}}}function Mf(){function n(n){var t=n[0],e=n[1];return a=null,r.point(t,e),a||(i.point(t,e),a)||(u.point(t,e),a)}var t,e,r,i,u,a,o=bf(),f=yf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=yf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(n,t){a=[n,t]}};return n.invert=function(n){var t=o.scale(),e=o.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:o).invert(n)},n.stream=function(n){return t&&e===n?t:t=xf([o.stream(e=n),f.stream(n),c.stream(n)])},n.precision=function(t){return arguments.length?(o.precision(t),f.precision(t),c.precision(t),n):o.precision()},n.scale=function(t){return arguments.length?(o.scale(t),f.scale(.35*t),c.scale(t),n.translate(o.translate())):o.scale()},n.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],l=+t[1];return r=o.translate(t).clipExtent([[a-.455*e,l-.238*e],[a+.455*e,l+.238*e]]).stream(s),i=f.translate([a-.307*e,l+.201*e]).clipExtent([[a-.425*e+Mv,l+.12*e+Mv],[a-.214*e-Mv,l+.234*e-Mv]]).stream(s),u=c.translate([a-.205*e,l+.212*e]).clipExtent([[a-.214*e+Mv,l+.166*e+Mv],[a-.115*e-Mv,l+.234*e-Mv]]).stream(s),n},n.scale(1070)}function _f(n){return function(t,e){var r=Uv(t),i=Uv(e),u=n(r*i);return[u*i*zv(t),u*zv(e)]}}function wf(n){return function(t,e){var r=Ov(t*t+e*e),i=n(r),u=zv(i),a=Uv(i);return[Cv(t*u,r*a),to(r&&e*u/r)]}}function kf(){return pf(Mg).scale(124.75).clipAngle(179.999)}function Nf(){return pf(_g).scale(79.4188).clipAngle(179.999)}function Ef(n,t){return[n,qv(Pv((wv+t)/2))]}function Af(){return Df(Ef).scale(961/Nv)}function Df(n){var t,e=pf(n),r=e.scale,i=e.translate,u=e.clipExtent;return e.scale=function(n){return arguments.length?(r(n),t&&e.clipExtent(null),e):r()},e.translate=function(n){return arguments.length?(i(n),t&&e.clipExtent(null),e):i()},e.clipExtent=function(n){if(!arguments.length)return t?null:u();if(t=null==n){var a=_v*r(),o=i();n=[[o[0]-a,o[1]-a],[o[0]+a,o[1]+a]]}return u(n),e},e.clipExtent(null)}function Sf(n){return Pv((wv+n)/2)}function Cf(n,t){function e(n,t){u>0?t<-wv+Mv&&(t=-wv+Mv):t>wv-Mv&&(t=wv-Mv);var e=u/Fv(Sf(t),i);return[e*zv(i*n),u-e*Uv(i*n)]}var r=Uv(n),i=n===t?zv(n):qv(r/Uv(t))/qv(Sf(t)/Sf(n)),u=r*Fv(Sf(n),i)/i;return i?(e.invert=function(n,t){var e=u-t,r=Lv(i)*Ov(n*n+e*e);return[Cv(n,e)/i,2*Sv(Fv(u/r,1/i))-wv]},e):Ef}function Uf(){return gf(Cf).scale(109.5).parallels([30,30])}function Tf(n,t){return[n,t]}function Rf(){return pf(Tf).scale(152.63)}function qf(n,t){function e(n,t){var e=u-t,r=i*n;return[e*zv(r),u-e*Uv(r)]}var r=Uv(n),i=n===t?zv(n):(r-Uv(t))/(t-n),u=r/i+n;return Dv(i)<Mv?Tf:(e.invert=function(n,t){var e=u-t;return[Cv(n,e)/i,u-Lv(i)*Ov(n*n+e*e)]},e)}function Ff(){return gf(qf).scale(131.154).center([0,13.9389])}function zf(n,t){var e=Uv(t),r=Uv(n)*e;return[e*zv(n)/r,zv(t)/r]}function Lf(){return pf(zf).scale(144.049).clipAngle(60)}function Of(n,t){return[Uv(t)*zv(n),zv(t)]}function Pf(){return pf(Of).scale(249.5).clipAngle(90+Mv)}function jf(n,t){var e=Uv(t),r=1+Uv(n)*e;return[e*zv(n)/r,zv(t)/r]}function If(){return pf(jf).scale(250).clipAngle(142)}function Yf(n,t){return[qv(Pv((wv+t)/2)),-n]}function Hf(){var n=Df(Yf),t=n.center,e=n.rotate;return n.center=function(n){return arguments.length?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return arguments.length?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90]).scale(159.155)}function Bf(n){wn.call(this,null,n)}function $f(n){wn.call(this,null,n)}function Wf(n){wn.call(this,null,n)}function Zf(n,t){var e=function(e){return n(t(e))};return e.context=function(t){return n.context(t),e},e}function Xf(n){wn.call(this,[],n),this.generator=qo()}function Gf(n,t){return arguments.length>1?(Ag[n]=t,this):Ag.hasOwnProperty(n)?Ag[n]:null}function Jf(n){wn.call(this,null,n),this.modified(!0)}function Vf(n){var t,e=(n||"mercator").toLowerCase();return e&&(t=Gf(e))||P("Unrecognized projection type: "+n),t=t(),t.type=e,Kf(t)}function Kf(n){return n.copy=n.copy||function(){var t=Vf(n.type);return Dg.forEach(function(e){n.hasOwnProperty(e)&&t[e](n[e]())}),t},n}function Qf(n,t){return n.parent===t.parent?1:2}function nc(n){return n.reduce(tc,0)/n.length}function tc(n,t){return n+t.x}function ec(n){return 1+n.reduce(rc,0)}function rc(n,t){return Math.max(n,t.y)}function ic(n){for(var t;t=n.children;)n=t[0];return n}function uc(n){for(var t;t=n.children;)n=t[t.length-1];return n}function ac(){function n(n){var u,a=0;n.eachAfter(function(n){var e=n.children;e?(n.x=nc(e),n.y=ec(e)):(n.x=u?a+=t(n,u):0,n.y=0,u=n)});var o=ic(n),f=uc(n),c=o.x-t(o,f)/2,s=f.x+t(f,o)/2;return n.eachAfter(i?function(t){t.x=(t.x-n.x)*e,t.y=(n.y-t.y)*r}:function(t){t.x=(t.x-c)/(s-c)*e,t.y=(1-(n.y?t.y/n.y:1))*r})}var t=Qf,e=1,r=1,i=!1;return n.separation=function(e){return arguments.length?(t=e,n):t},n.size=function(t){return arguments.length?(i=!1,e=+t[0],r=+t[1],n):i?null:[e,r]},n.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],r=+t[1],n):i?[e,r]:null},n}function oc(n){var t,e,r,i,u=this,a=[u];do for(t=a.reverse(),a=[];u=t.pop();)if(n(u),e=u.children)for(r=0,i=e.length;r<i;++r)a.push(e[r]);while(a.length);return this}function fc(n){for(var t,e,r=this,i=[r];r=i.pop();)if(n(r),t=r.children)for(e=t.length-1;e>=0;--e)i.push(t[e]);return this}function cc(n){for(var t,e,r,i=this,u=[i],a=[];i=u.pop();)if(a.push(i),t=i.children)for(e=0,r=t.length;e<r;++e)u.push(t[e]);for(;i=a.pop();)n(i);return this}function sc(n){return this.eachAfter(function(t){for(var e=+n(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)e+=r[i].value;t.value=e})}function lc(n){return this.eachBefore(function(t){t.children&&t.children.sort(n)})}function hc(n){for(var t=this,e=dc(t,n),r=[t];t!==e;)t=t.parent,r.push(t);for(var i=r.length;n!==e;)r.splice(i,0,n),n=n.parent;return r}function dc(n,t){if(n===t)return n;var e=n.ancestors(),r=t.ancestors(),i=null;for(n=e.pop(),t=r.pop();n===t;)i=n,n=e.pop(),t=r.pop();return i}function pc(){for(var n=this,t=[n];n=n.parent;)t.push(n);return t}function vc(){var n=[];return this.each(function(t){n.push(t)}),n}function gc(){var n=[];return this.eachBefore(function(t){t.children||n.push(t)}),n}function mc(){var n=this,t=[];return n.each(function(e){e!==n&&t.push({source:e.parent,target:e})}),t}function yc(n,t){var e,r,i,u,a,o=new wc(n),f=+n.value&&(o.value=n.value),c=[o];for(null==t&&(t=xc);e=c.pop();)if(f&&(e.value=+e.data.value),(i=t(e.data))&&(a=i.length))for(e.children=new Array(a),u=a-1;u>=0;--u)c.push(r=e.children[u]=new wc(i[u])),r.parent=e,r.depth=e.depth+1;return o.eachBefore(_c)}function bc(){return yc(this).eachBefore(Mc)}function xc(n){return n.children}function Mc(n){n.data=n.data.data}function _c(n){var t=0;do n.height=t;while((n=n.parent)&&n.height<++t)}function wc(n){this.data=n,this.depth=this.height=0,this.parent=null}function kc(n){this._=n,this.next=null}function Nc(n){for(var t,e=(n=n.slice()).length,r=null,i=r;e;){var u=new kc(n[e-1]);i=i?i.next=u:r=u,n[t]=n[--e]}return{head:r,tail:i}}function Ec(n){return Dc(Nc(n),[])}function Ac(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r-t.r;return i*i+1e-6>e*e+r*r}function Dc(n,t){var e,r,i,u=null,a=n.head;switch(t.length){case 1:e=Sc(t[0]);break;case 2:e=Cc(t[0],t[1]);break;case 3:e=Uc(t[0],t[1],t[2])}for(;a;)i=a._,r=a.next,e&&Ac(e,i)?u=a:(u?(n.tail=u,u.next=null):n.head=n.tail=null,t.push(i),e=Dc(n,t),t.pop(),n.head?(a.next=n.head,n.head=a):(a.next=null,n.head=n.tail=a),u=n.tail,u.next=r),a=r;return n.tail=u,e}function Sc(n){return{x:n.x,y:n.y,r:n.r}}function Cc(n,t){var e=n.x,r=n.y,i=n.r,u=t.x,a=t.y,o=t.r,f=u-e,c=a-r,s=o-i,l=Math.sqrt(f*f+c*c);return{x:(e+u+f/l*s)/2,y:(r+a+c/l*s)/2,r:(l+i+o)/2}}function Uc(n,t,e){var r=n.x,i=n.y,u=n.r,a=t.x,o=t.y,f=t.r,c=e.x,s=e.y,l=e.r,h=2*(r-a),d=2*(i-o),p=2*(f-u),v=r*r+i*i-u*u-a*a-o*o+f*f,g=2*(r-c),m=2*(i-s),y=2*(l-u),b=r*r+i*i-u*u-c*c-s*s+l*l,x=g*d-h*m,M=(d*b-m*v)/x-r,_=(m*p-d*y)/x,w=(g*v-h*b)/x-i,k=(h*y-g*p)/x,N=_*_+k*k-1,E=2*(M*_+w*k+u),A=M*M+w*w-u*u,D=(-E-Math.sqrt(E*E-4*N*A))/(2*N);return{x:M+_*D+r,y:w+k*D+i,r:D}}function Tc(n,t,e){var r=n.x,i=n.y,u=t.r+e.r,a=n.r+e.r,o=t.x-r,f=t.y-i,c=o*o+f*f;if(c){var s=.5+((a*=a)-(u*=u))/(2*c),l=Math.sqrt(Math.max(0,2*u*(a+c)-(a-=c)*a-u*u))/(2*c);e.x=r+s*o+l*f,e.y=i+s*f-l*o}else e.x=r+a,e.y=i}function Rc(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r+t.r;return i*i>e*e+r*r}function qc(n,t,e){var r=n.x-t,i=n.y-e;return r*r+i*i}function Fc(n){this._=n,this.next=null,this.previous=null}function zc(n){
if(!(i=n.length))return 0;var t,e,r,i;if(t=n[0],t.x=0,t.y=0,!(i>1))return t.r;if(e=n[1],t.x=-e.r,e.x=t.r,e.y=0,!(i>2))return t.r+e.r;Tc(e,t,r=n[2]);var u,a,o,f,c,s,l,h=t.r*t.r,d=e.r*e.r,p=r.r*r.r,v=h+d+p,g=h*t.x+d*e.x+p*r.x,m=h*t.y+d*e.y+p*r.y;t=new Fc(t),e=new Fc(e),r=new Fc(r),t.next=r.previous=e,e.next=t.previous=r,r.next=e.previous=t;n:for(o=3;o<i;++o){if(Tc(t._,e._,r=n[o]),r=new Fc(r),(c=t.previous)===(f=e.next)){if(Rc(f._,r._)){t=e,e=f,--o;continue n}}else{s=f._.r,l=c._.r;do if(s<=l){if(Rc(f._,r._)){e=f,t.next=e,e.previous=t,--o;continue n}f=f.next,s+=f._.r}else{if(Rc(c._,r._)){t=c,t.next=e,e.previous=t,--o;continue n}c=c.previous,l+=c._.r}while(f!==c.next)}for(r.previous=t,r.next=e,t.next=e.previous=e=r,v+=p=r._.r*r._.r,g+=p*r._.x,m+=p*r._.y,h=qc(t._,u=g/v,a=m/v);(r=r.next)!==e;)(p=qc(r._,u,a))<h&&(t=r,h=p);e=t.next}for(t=[e._],r=e;(r=r.next)!==e;)t.push(r._);for(r=Ec(t),o=0;o<i;++o)t=n[o],t.x-=r.x,t.y-=r.y;return r.r}function Lc(n){return null==n?null:Oc(n)}function Oc(n){if("function"!=typeof n)throw new Error;return n}function Pc(){return 0}function jc(n){return function(){return n}}function Ic(n){return Math.sqrt(n.value)}function Yc(){function n(n){return n.x=e/2,n.y=r/2,t?n.eachBefore(Hc(t)).eachAfter(Bc(i,.5)).eachBefore($c(1)):n.eachBefore(Hc(Ic)).eachAfter(Bc(Pc,1)).eachAfter(Bc(i,n.r/Math.min(e,r))).eachBefore($c(Math.min(e,r)/(2*n.r))),n}var t=null,e=1,r=1,i=Pc;return n.radius=function(e){return arguments.length?(t=Lc(e),n):t},n.size=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.padding=function(t){return arguments.length?(i="function"==typeof t?t:jc(+t),n):i},n}function Hc(n){return function(t){t.children||(t.r=Math.max(0,+n(t)||0))}}function Bc(n,t){return function(e){if(r=e.children){var r,i,u,a=r.length,o=n(e)*t||0;if(o)for(i=0;i<a;++i)r[i].r+=o;if(u=zc(r),o)for(i=0;i<a;++i)r[i].r-=o;e.r=u+o}}}function $c(n){return function(t){var e=t.parent;t.r*=n,e&&(t.x=e.x+n*t.x,t.y=e.y+n*t.y)}}function Wc(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function Zc(n,t,e,r,i){for(var u,a=n.children,o=-1,f=a.length,c=n.value&&(r-t)/n.value;++o<f;)u=a[o],u.y0=e,u.y1=i,u.x0=t,u.x1=t+=u.value*c}function Xc(){function n(n){var a=n.height+1;return n.x0=n.y0=i,n.x1=e,n.y1=r/a,n.eachBefore(t(r,a)),u&&n.eachBefore(Wc),n}function t(n,t){return function(e){e.children&&Zc(e,e.x0,n*(e.depth+1)/t,e.x1,n*(e.depth+2)/t);var r=e.x0,u=e.y0,a=e.x1-i,o=e.y1-i;a<r&&(r=a=(r+a)/2),o<u&&(u=o=(u+o)/2),e.x0=r,e.y0=u,e.x1=a,e.y1=o}}var e=1,r=1,i=0,u=!1;return n.round=function(t){return arguments.length?(u=!!t,n):u},n.size=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.padding=function(t){return arguments.length?(i=+t,n):i},n}function Gc(n){return n.id}function Jc(n){return n.parentId}function Vc(){function n(n){var r,i,u,a,o,f,c,s=n.length,l=new Array(s),h={};for(i=0;i<s;++i)r=n[i],o=l[i]=new wc(r),null!=(f=t(r,i,n))&&(f+="")&&(c=Cg+(o.id=f),h[c]=c in h?Tg:o);for(i=0;i<s;++i)if(o=l[i],f=e(n[i],i,n),null!=f&&(f+="")){if(a=h[Cg+f],!a)throw new Error("missing: "+f);if(a===Tg)throw new Error("ambiguous: "+f);a.children?a.children.push(o):a.children=[o],o.parent=a}else{if(u)throw new Error("multiple roots");u=o}if(!u)throw new Error("no root");if(u.parent=Ug,u.eachBefore(function(n){n.depth=n.parent.depth+1,--s}).eachBefore(_c),u.parent=null,s>0)throw new Error("cycle");return u}var t=Gc,e=Jc;return n.id=function(e){return arguments.length?(t=Oc(e),n):t},n.parentId=function(t){return arguments.length?(e=Oc(t),n):e},n}function Kc(n,t){return n.parent===t.parent?1:2}function Qc(n){var t=n.children;return t?t[0]:n.t}function ns(n){var t=n.children;return t?t[t.length-1]:n.t}function ts(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function es(n){for(var t,e=0,r=0,i=n.children,u=i.length;--u>=0;)t=i[u],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function rs(n,t,e){return n.a.parent===t.parent?n.a:e}function is(n,t){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function us(n){for(var t,e,r,i,u,a=new is(n,0),o=[a];t=o.pop();)if(r=t._.children)for(t.children=new Array(u=r.length),i=u-1;i>=0;--i)o.push(e=t.children[i]=new is(r[i],i)),e.parent=t;return(a.parent=new is(null,0)).children=[a],a}function as(){function n(n){var r=us(n);if(r.eachAfter(t),r.parent.m=-r.z,r.eachBefore(e),f)n.eachBefore(i);else{var c=n,s=n,l=n;n.eachBefore(function(n){n.x<c.x&&(c=n),n.x>s.x&&(s=n),n.depth>l.depth&&(l=n)});var h=c===s?1:u(c,s)/2,d=h-c.x,p=a/(s.x+h+d),v=o/(l.depth||1);n.eachBefore(function(n){n.x=(n.x+d)*p,n.y=n.depth*v})}return n}function t(n){var t=n.children,e=n.parent.children,i=n.i?e[n.i-1]:null;if(t){es(n);var a=(t[0].z+t[t.length-1].z)/2;i?(n.z=i.z+u(n._,i._),n.m=n.z-a):n.z=a}else i&&(n.z=i.z+u(n._,i._));n.parent.A=r(n,i,n.parent.A||e[0])}function e(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function r(n,t,e){if(t){for(var r,i=n,a=n,o=t,f=i.parent.children[0],c=i.m,s=a.m,l=o.m,h=f.m;o=ns(o),i=Qc(i),o&&i;)f=Qc(f),a=ns(a),a.a=n,r=o.z+l-i.z-c+u(o._,i._),r>0&&(ts(rs(o,n,e),n,r),c+=r,s+=r),l+=o.m,c+=i.m,h+=f.m,s+=a.m;o&&!ns(a)&&(a.t=o,a.m+=l-s),i&&!Qc(f)&&(f.t=i,f.m+=c-h,e=n)}return e}function i(n){n.x*=a,n.y=n.depth*o}var u=Kc,a=1,o=1,f=null;return n.separation=function(t){return arguments.length?(u=t,n):u},n.size=function(t){return arguments.length?(f=!1,a=+t[0],o=+t[1],n):f?null:[a,o]},n.nodeSize=function(t){return arguments.length?(f=!0,a=+t[0],o=+t[1],n):f?[a,o]:null},n}function os(n,t,e,r,i){for(var u,a=n.children,o=-1,f=a.length,c=n.value&&(i-e)/n.value;++o<f;)u=a[o],u.x0=t,u.x1=r,u.y0=e,u.y1=e+=u.value*c}function fs(n,t,e,r,i,u){for(var a,o,f,c,s,l,h,d,p,v,g,m,y=[],b=t.children,x=0,M=b.length,_=t.value;x<M;){for(c=i-e,s=u-r,h=d=l=b[x].value,g=Math.max(s/c,c/s)/(_*n),m=l*l*g,v=Math.max(d/m,m/h),f=x+1;f<M;++f){if(l+=o=b[f].value,o<h&&(h=o),o>d&&(d=o),m=l*l*g,p=Math.max(d/m,m/h),p>v){l-=o;break}v=p}y.push(a={value:l,dice:c<s,children:b.slice(x,f)}),a.dice?Zc(a,e,r,i,_?r+=s*l/_:u):os(a,e,r,_?e+=c*l/_:i,u),_-=l,x=f}return y}function cs(){function n(n){return n.x0=n.y0=0,n.x1=i,n.y1=u,n.eachBefore(t),a=[0],r&&n.eachBefore(Wc),n}function t(n){var t=a[n.depth],r=n.x0+t,i=n.y0+t,u=n.x1-t,h=n.y1-t;u<r&&(r=u=(r+u)/2),h<i&&(i=h=(i+h)/2),n.x0=r,n.y0=i,n.x1=u,n.y1=h,n.children&&(t=a[n.depth+1]=o(n)/2,r+=l(n)-t,i+=f(n)-t,u-=c(n)-t,h-=s(n)-t,u<r&&(r=u=(r+u)/2),h<i&&(i=h=(i+h)/2),e(n,r,i,u,h))}var e=qg,r=!1,i=1,u=1,a=[0],o=Pc,f=Pc,c=Pc,s=Pc,l=Pc;return n.round=function(t){return arguments.length?(r=!!t,n):r},n.size=function(t){return arguments.length?(i=+t[0],u=+t[1],n):[i,u]},n.tile=function(t){return arguments.length?(e=Oc(t),n):e},n.padding=function(t){return arguments.length?n.paddingInner(t).paddingOuter(t):n.paddingInner()},n.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:jc(+t),n):o},n.paddingOuter=function(t){return arguments.length?n.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):n.paddingTop()},n.paddingTop=function(t){return arguments.length?(f="function"==typeof t?t:jc(+t),n):f},n.paddingRight=function(t){return arguments.length?(c="function"==typeof t?t:jc(+t),n):c},n.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:jc(+t),n):s},n.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:jc(+t),n):l},n}function ss(n,t,e,r,i){function u(n,t,e,r,i,a,o){if(n>=t-1){var c=f[n];return c.x0=r,c.y0=i,c.x1=a,c.y1=o,void 0}for(var l=s[n],h=e/2+l,d=n+1,p=t-1;d<p;){var v=d+p>>>1;s[v]<h?d=v+1:p=v}var g=s[d]-l,m=e-g;if(o-i>a-r){var y=(i*m+o*g)/e;u(n,d,g,r,i,a,y),u(d,t,m,r,y,a,o)}else{var b=(r*m+a*g)/e;u(n,d,g,r,i,b,o),u(d,t,m,b,i,a,o)}}var a,o,f=n.children,c=f.length,s=new Array(c+1);for(s[0]=o=a=0;a<c;++a)s[a+1]=o+=f[a].value;u(0,c,n.value,t,e,r,i)}function ls(n,t,e,r,i){(1&n.depth?os:Zc)(n,t,e,r,i)}function hs(n){wn.call(this,null,n)}function ds(n){return n.values}function ps(n){wn.call(this,null,n)}function vs(n){wn.call(this,{},n)}function gs(n){var t;return n.parent&&(t=n.parent.data)&&"_id"in t&&t}function ms(n){var t=n||"tidy";return jg.has(t)?jg.get(t)():void P("Unrecognized Tree layout method: "+t)}function ys(){var n=cs();return n.ratio=function(t){var e=n.tile();e.ratio&&n.tile(e.ratio(t))},n.method=function(t){Pg.has(t)?n.tile(Pg.get(t)):P("Unrecognized Treemap layout method: "+t)},n}function bs(n){wn.call(this,null,n)}function xs(n){for(var t,e="",r=0,i=n.length;r<i;++r)t='"'+n[r]+'"',e+="if("+t+" in _) layout["+t+"](_["+t+"]);";return Function("layout","_",e)}function Ms(n){for(var t="var t=node.data;",e=0,r=n.length;e<r;++e)t+='t["'+n[e]+'"]=node["'+n[e]+'"];';return k(Function("node",t),n)}function _s(n){bs.call(this,n)}function ws(n){bs.call(this,n)}function ks(n){bs.call(this,n)}function Ns(n){bs.call(this,n)}var Es="2.0.0",As=u(i),Ds=As.right,Ss=As.left,Cs=Math.sqrt(50),Us=Math.sqrt(10),Ts=Math.sqrt(2),Rs=Array.isArray,qs=[],Fs=T("id"),zs=k(function(n){return n},qs,"identity"),Ls=k(function(){return 0},qs,"zero"),Os=k(function(){return 1},qs,"one"),Ps=k(function(){return!0},qs,"true"),js=k(function(){return!1},qs,"false"),Is=0,Ys=1,Hs=2,Bs=3,$s=1,Ws=Object.freeze({reset:J,id:V,ingest:Q,replace:en,derive:nn,rederive:tn}),Zs={},Xs=1,Gs=2,Js=4,Vs=Xs|Gs,Ks=Xs|Js,Qs=Xs|Gs|Js,nl=8,tl=16,el=32,rl=an.prototype;rl.StopPropagation=Zs,rl.ADD=Xs,rl.REM=Gs,rl.MOD=Js,rl.ADD_REM=Vs,rl.ADD_MOD=Ks,rl.ALL=Qs,rl.REFLOW=nl,rl.SOURCE=tl,rl.NO_SOURCE=el,rl.fork=function(n){return new an(this.dataflow).init(this,n)},rl.init=function(n,t){var e=this;return e.stamp=n.stamp,e.source=t&el?null:n.source,e.encode=n.encode,n.fields&&(e.fields=n.fields),e.add=t&Xs?(e.addF=n.addF,n.add):(e.addF=null,[]),e.rem=t&Gs?(e.remF=n.remF,n.rem):(e.remF=null,[]),e.mod=t&Js?(e.modF=n.modF,n.mod):(e.modF=null,[]),e},rl.runAfter=function(n){this.dataflow.runAfter(n)},rl.changed=function(n){var t=n||Qs;return t&Xs&&this.add.length||t&Gs&&this.rem.length||t&Js&&this.mod.length},rl.reflow=function(){var n=this.add.length,t=this.source&&this.source.length;return t&&t!==n&&(this.mod=this.source,n&&this.filter(Js,fn(this,Xs))),this},rl.modifies=function(n){var t=F(n),e=this.fields||(this.fields={});return t.forEach(function(n){e[n]=!0}),this},rl.modified=function(n){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?Rs(n)?n.some(function(n){return t[n]}):t[n]:!!t)},rl.filter=function(n,t){var e=this;return n&Xs&&(e.addF=on(e.addF,t)),n&Gs&&(e.remF=on(e.remF,t)),n&Js&&(e.modF=on(e.modF,t)),e},rl.materialize=function(n){n=n||Qs;var t=this;return n&Xs&&t.addF&&(t.add=t.add.filter(t.addF),t.addF=null),n&Gs&&t.remF&&(t.rem=t.rem.filter(t.remF),t.remF=null),n&Js&&t.modF&&(t.mod=t.mod.filter(t.modF),t.modF=null),t},rl.visit=function(n,t){if(n&tl)return this.source.forEach(t),this;var e,r,i=t;return n&Xs&&X(this.add,this.addF,i),n&Gs&&X(this.rem,this.remF,i),n&Js&&X(this.mod,this.modF,i),n&nl&&(e=this.source)&&(r=this.add.length+this.mod.length,r===e||(r?X(e,fn(this,Ks),i):e.forEach(t))),this};var il=Y(cn,an);il.fork=function(){return arguments.length&&0!==arguments[0]&&P("MultiPulse fork does not support tuple change sets."),new an(this.dataflow).init(this,0)},il.changed=function(n){return this.changes&n},il.modified=function(n){var t=this,e=t.fields;return e&&t.changes&t.MOD?Rs(n)?n.some(function(n){return e[n]}):e[n]:0},il.filter=function(){P("MultiPulse does not support filtering.")},il.materialize=function(){P("MultiPulse does not support materialization.")},il.visit=function(n,t){var e,r,i=this.pulses;for(e=0,r=i.length;e<r;++e)i[e].stamp===this.stamp&&i[e].visit(n,t);return this};var ul="_:mod:_",al=sn.prototype;al.set=function(n,t,e,r){var i=this,u=i[n],a=i[ul];return null!=t&&t>=0?(u[t]!==e||r)&&(u[t]=e,a[ln(n,t)]=1,a[n]=1):(u!==e||r)&&(i[n]=e,a[n]=1,Rs(e)&&e.forEach(function(t,e){a[ln(n,e)]=1})),i},al.modified=function(n,t){var e,r=this[ul];if(!arguments.length){for(e in r)if(r[e])return!0;return!1}if(Rs(n)){for(e=0;e<n.length;++e)if(r[n[e]])return!0;return!1}return!!r[ln(n,t)]},al.clear=function(){return this[ul]={},this};var ol=0,fl="pulse",cl=new sn,sl=1,ll=2,hl=hn.prototype;hl.targets=function(){return this._targets||(this._targets=G(Fs))},hl.set=function(n){return this.value!==n?(this.value=n,1):0},hl.skip=dn(sl),hl.modified=dn(ll),hl.parameters=function(n,t){function e(n,e,r){r instanceof hn?(r!==o&&(t&&r.targets().add(o),s.push(r)),c.push({op:r,name:n,index:e})):f.set(n,e,r)}t=t!==!1;var r,i,u,a,o=this,f=o._argval=o._argval||new sn,c=o._argops=o._argops||[],s=[];for(r in n)if(i=n[r],r===fl)F(i).forEach(function(n){n instanceof hn?n!==o&&(n.targets().add(o),s.push(n)):P("Pulse parameters must be operator instances.")}),o.source=i;else if(Rs(i))for(f.set(r,-1,Array(u=i.length)),a=0;a<u;++a)e(r,a,i[a]);else e(r,-1,i);return this.marshall().clear(),s},hl.marshall=function(n){var t,e,r,i,u,a=this._argval||cl,o=this._argops;if(o&&(r=o.length))for(e=0;e<r;++e)t=o[e],i=t.op,u=i.modified()&&i.stamp===n,a.set(t.name,t.index,i.value,u);return a},hl.evaluate=function(n){if(this._update){var t=this.marshall(n.stamp),e=this._update(t,n);if(t.clear(),e!==this.value)this.value=e;else if(!this.modified())return n.StopPropagation}},hl.run=function(n){if(n.stamp<=this.stamp)return n.StopPropagation;var t=this.skip()?(this.skip(!1),0):this.evaluate(n);return this.stamp=n.stamp,this.pulse=t||n};var dl=0,pl=pn.prototype;pl._filter=Ps,pl._apply=zs,pl.targets=function(){return this._targets||(this._targets=G(Fs))},pl.consume=function(n){return arguments.length?(this._consume=!!n,this):!!this._consume},pl.receive=function(n){if(this._filter(n)){for(var t=this.value=this._apply(n),e=this._targets,r=e?e.length:0,i=0;i<r;++i)e[i].receive(t);this._consume&&(n.preventDefault(),n.stopPropagation())}},pl.filter=function(n){var t=vn(n);return this.targets().add(t),t},pl.apply=function(n){var t=vn(null,n);return this.targets().add(t),t},pl.merge=function(){var n=vn();this.targets().add(n);for(var t=0,e=arguments.length;t<e;++t)arguments[t].targets().add(n);return n},pl.throttle=function(n){var t=-1;return this.filter(function(){var e=Date.now();return e-t>n?(t=e,1):0})},pl.debounce=function(n){function t(){var n=r.dataflow;e.receive(r),r=null,i=null,n&&n.run&&n.run()}var e=vn(),r=null,i=null;return this.targets().add(vn(null,null,function(e){r=e,i&&clearTimeout(i),i=setTimeout(t,n)})),e},pl.between=function(n,t){var e=!1;return n.targets().add(vn(null,null,function(){e=!0})),t.targets().add(vn(null,null,function(){e=!1})),this.filter(function(){return e})};var vl=gn.prototype;vl.size=function(){return this.nodes.length},vl.clear=function(){return this.nodes=[],this},vl.peek=function(){return this.nodes[0]},vl.push=function(n){var t=this.nodes;return t.push(n),mn(t,0,t.length-1,this.cmp)},vl.pop=function(){var n,t=this.nodes,e=t.pop();return t.length?(n=t[0],t[0]=e,yn(t,0,this.cmp)):n=e,n},vl.replace=function(n){var t=this.nodes,e=t[0];return t[0]=n,yn(t,0,this.cmp),e},vl.pushpop=function(n){var t=this.nodes,e=t[0];return t.length&&this.cmp(e,n)<0&&(t[0]=n,n=e,yn(t,0,this.cmp)),n};var gl={skip:!1,force:!1},ml={skip:!0},yl=bn.prototype;yl.stamp=function(){return this._clock},yl.touch=function(n,t){var e=t||gl;return this._pulse?this._enqueue(n):this._touched.add(n),e.skip&&n.skip(!0),this},yl.rank=function(n){n.rank=++this._rank},yl.rerank=function(n){for(var t,e,r,i=[n];i.length;)if(this.rank(t=i.pop()),e=t._targets)for(r=e.length;--r>=0;)i.push(e[r])},yl.add=function(n,t,e,r){var i=1,u=n instanceof hn?n:n&&n.prototype instanceof hn?new n:L(n)?new hn(null,n):(i=0,new hn(n,t));return this.rank(u),i&&(r=e,e=t),e&&this.connect(u,u.parameters(e,r)),this.touch(u),u},yl.connect=function(n,t){var e,r,i=n.rank;for(e=0,r=t.length;e<r;++e)if(i<t[e].rank)return void this.rerank(n)},yl.update=function(n,t,e){var r=e||gl;return(n.set(t)||r.force)&&this.touch(n,r),this},yl.pulse=function(n,t,e){var r=new an(this,this._clock+(this._pulse?0:1));return r.target=n,this._pulses[n.id]=t.pulse(r,n.value),this.touch(n,e||gl)},yl.changeset=un,yl.events=function(n,t,e,r){var i,u=this,a=vn(e,r),o=function(n){n.dataflow=u,a.receive(n),u.run()};i="string"==typeof n&&"undefined"!=typeof document?document.querySelectorAll(n):F(n);for(var f=0,c=i.length;f<c;++f)i[f].addEventListener(t,o);return a},yl.on=function(n,t,e,r,i){var u=n instanceof hn?Mn:xn;return u(this,n,t,e,r,i),this},yl.run=function(){if(!this._touched.length)return 0;var n,t,e,r=this,i=r.logLevel(),u=0;r._pulse=new an(r,(++r._clock)),i>=Hs&&(e=Date.now(),r.debug("-- START PROPAGATION ("+r._clock+") -----")),r._touched.forEach(function(n){r._enqueue(n,!0)}),r._touched=G(Fs);try{for(;r._heap.size()>0;)n=r._heap.pop(),n.rank===n.qrank?(t=n.run(r._getPulse(n)),i>=Bs&&r.debug("Op: "+n.id+", rank:"+n.rank+" "+n.constructor.name,t===Zs?"STOP":{pulse:t},{value:n.value}),t!==Zs&&(r._pulse=t,n._targets&&n._targets.forEach(function(n){r._enqueue(n)})),++u):r._enqueue(n,!0)}catch(n){r.error(n)}if(r._pulses={},r._pulse=null,i>=Hs&&(e=Date.now()-e,r.info("> Pulse "+r._clock+": "+u+" operators; "+e+"ms")),r._postrun.length){var a=r._postrun;r._postrun=[],a.forEach(function(n){try{n(r)}catch(n){r.error(n)}})}return u},yl.runAfter=function(n){if(this._pulse)this._postrun.push(n);else try{n(this)}catch(n){this.error(n)}},yl._enqueue=function(n,t){var e=!this._pulses[n.id];e&&(this._pulses[n.id]=this._pulse),(e||t)&&(n.qrank=n.rank,this._heap.push(n))},yl._getPulse=function(n){var t,e,r=n.source,i=this._clock;return r&&Rs(r)?new cn(this,i,r.map(function(n){return n.pulse})):(e=this._pulses[n.id],t=r&&(r=r.pulse)&&r.stamp===i&&e.target!==n?r:e,r&&(t.source=r.source),t)},yl.error=function(n){throw n},yl.warn=_n("warn"),yl.info=_n("info"),yl.debug=_n("debug"),yl.logLevel=_n("level");var bl=Y(wn,hn);bl.evaluate=function(n){var t=this.marshall(n.stamp),e=this.transform(t,n);return t.clear(),e},bl.transform=function(){};var xl=Y(kn,wn);xl.transform=function(n,t){function e(t){t[u]=i(t,n)}var r,i=n.apply,u=n.as;return n.modified()?t.materialize().reflow().visit(t.SOURCE,e):(r=t.modified(i.fields),t.visit(r?t.ADD_MOD:t.ADD,e)),t.modifies(u)},Y(Nn,hn);var Ml=Y(An,wn);Ml.transform=function(n,t){var e,r,i=t.fork(t.ALL),u=t.changed(t.ADD),a=t.changed(),o=n.sort,f=this.value,c=function(n){f.push(n)},s=0;return i.rem.length&&(e={},i.visit(i.REM,function(n){e[n._id]=1,++s}),f=f.filter(function(n){return!e[n._id]})),o?n.modified("sort")||t.modified(o.fields)?(i.visit(i.ADD,c),f.sort(o),a=!0):u&&(r=[],i.visit(i.ADD,function(n){r.push(n)}),f=$(o,f,r.sort(o))):u&&i.visit(i.ADD,c),this.modified(a),this.value=i.source=f,i},Y(Dn,hn);var _l="$";Cn.prototype=Un.prototype={constructor:Cn,has:function(n){return _l+n in this},get:function(n){return this[_l+n]},set:function(n,t){return this[_l+n]=t,this},remove:function(n){var t=_l+n;return t in this&&delete this[t]},clear:function(){for(var n in this)n[0]===_l&&delete this[n]},keys:function(){var n=[];for(var t in this)t[0]===_l&&n.push(t.slice(1));return n},values:function(){var n=[];for(var t in this)t[0]===_l&&n.push(this[t]);return n},entries:function(){var n=[];for(var t in this)t[0]===_l&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var n=0;for(var t in this)t[0]===_l&&++n;return n},empty:function(){for(var n in this)if(n[0]===_l)return!1;return!0},each:function(n){for(var t in this)t[0]===_l&&n(this[t],t.slice(1),this)}};var wl=(Un.prototype,Y(On,wn));wl.transform=function(n,t){function e(n){var t=i(n);u.set(t,1+(+u.get(t)||0))}function r(n){var t=i(n),e=u.get(t)-1;e>0?u.set(t,e):u.remove(t)}var i=n.field,u=this.value,a=!0;return n.modified("field")||t.modified(i.fields)?(this.value=u=Un(),t.visit(t.SOURCE,e)):t.changed(t.ADD_REM)?(t.visit(t.ADD,e),t.visit(t.REM,r)):a=!1,this.modified(a),t};var kl=Y(Pn,wn);kl.transform=function(n,t){function e(t){return function(e){for(var r,i=jn(o(e),n.case,u)||[],f=0,c=i.length;f<c;++f)a.test(r=i[f])||t(r)}}var r=this._parameterCheck(n,t),i=this._counts,u=this._match,a=this._stop,o=n.field,f=e(function(n){i[n]=1+(i[n]||0)}),c=e(function(n){i[n]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,c)),this._finish(t)},kl._parameterCheck=function(n,t){var e=!1;return!n.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(n.stopwords||"")+"$","i"),e=!0),!n.modified("pattern")&&this._match||(this._match=new RegExp(n.pattern||"[\\w']+","g"),e=!0),(n.modified("field")||t.modified(n.field.fields))&&(e=!0),e&&(this._counts={}),e},kl._finish=function(n){var t,e,r,i=this._counts,u=this._tuples||(this._tuples={}),a=n.fork();for(t in i)e=u[t],r=i[t]||0,!e&&r?(u[t]=e=Q({text:t,count:r}),a.add.push(e)):0===r?(e&&a.rem.push(e),i[t]=null,u[t]=null):e.count!==r&&(e.count=r,a.mod.push(e));return a.modifies(["text","count"])};var Nl=Y(In,wn);Nl.transform=function(n,t){var e,r=this.value,i=n.field,u=r[0],a=r[1],o=t.ADD;e=t.changed()||t.modified(i.fields)||n.modified("field"),e&&(o=t.SOURCE,u=+(1/0),a=-(1/0)),t.visit(o,function(n){var t=i(n);t<u&&(u=t),t>a&&(a=t)}),this.value=[u,a]};var El=Y(Yn,hn);El.connect=function(n){return this.targets().add(n),n.source=this},El.add=function(n){this.value.add.push(n)},El.rem=function(n){this.value.rem.push(n)},El.mod=function(n){this.value.mod.push(n)},El.init=function(n){this.value.init(n)},El.evaluate=function(){return this.value};var Al=Y(Hn,wn);Al.activate=function(n){this._targets[this._targets.active++]=n},Al.subflow=function(n,t,e){var r,i=this.value,u=i.get(n);return u?u.value.stamp<e.stamp&&(u.init(e),this.activate(u)):(r=e.dataflow,u=r.add(new Yn(e.fork(),this)).connect(t(r,n,this._count++)),i.set(n,u),this.activate(u)),u},Al.transform=function(n,t){function e(n){return r.subflow(n,u,t)}var r=this,i=n.key,u=n.subflow,a=this._keys,o=n.modified("key");return this._targets.active=0,t.visit(t.ADD,function(n){e(a[n._id]=i(n)).add(n)}),t.visit(t.REM,function(n){var t=a[n._id];a[n._id]=null,e(t).rem(n)}),o||t.modified(i.fields)?t.visit(t.MOD,function(n){var t=a[n._id],r=i(n);t===r?e(r).mod(n):(a[n._id]=r,e(t).rem(n),e(r).add(n))}):t.changed(t.MOD)&&t.visit(t.MOD,function(n){e(a[n._id]).mod(n)}),o&&t.visit(t.REFLOW,function(n){var t=a[n._id],r=i(n);t!==r&&(a[n._id]=r,e(t).rem(n),e(r).add(n))}),t},Y(Bn,hn);var Dl=Y(Wn,wn);Dl.transform=function(n,t){function e(t){var e=r(t,n),u=i[t._id];e&&u?(i[t._id]=0,a.push(t)):e||u?c&&e&&!u&&f.push(t):(i[t._id]=1,o.push(t))}var r=n.test,i=this.value,u=t.fork(),a=u.add,o=u.rem,f=u.mod,c=!0;return t.visit(t.REM,function(n){i[n._id]?i[n._id]=0:o.push(n)}),t.visit(t.ADD,function(t){r(t,n)?a.push(t):i[t._id]=1}),t.visit(t.MOD,e),n.modified()&&(c=!1,t.visit(t.REFLOW,e)),u};var Sl=Y(Zn,wn);Sl.transform=function(n,t){function e(n){for(var t,e=u[n._id]=Array(c),r=0;r<c;++r)t=e[r]=nn(n),t.key=f[r],t.value=o[r](n),l.add.push(t)}function r(n){for(var t,e=u[n._id],r=0;r<c;++r)d&1<<r&&(t=tn(n,e[r],s),t.key=f[r],t.value=o[r](n),l.mod.push(t))}var i,u=this.value,a=n.modified("fields"),o=n.fields,f=o.map(Xn),c=o.length,s=t.stamp,l=t.fork(),h=0,d=0;if(a){for(i in u)l.rem.push.apply(l.rem,u[i]);u=this.value={},t.visit(t.SOURCE,e)}else{for(t.visit(t.ADD,e);h<c;++h)t.modified(o[h].fields)&&(d|=1<<h);d&&t.visit(t.MOD,r),t.visit(t.REM,function(n){l.rem.push.apply(l.rem,u[n._id]),u[n._id]=null})}return l.modifies(["key","value"])};var Cl=Y(Gn,wn);Cl.transform=function(n,t){var e,r,i,u=this.value,a=t.fork(t.ALL),o=n.size-u.length,f=n.generator;if(o>0){for(e=[];--o>=0;)e.push(i=Q(f(n))),u.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(e):e}else r=u.slice(0,-o),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,u=u.slice(-o);return a.source=this.value=u,a};var Ul={value:"value",median:p,mean:d,min:g,max:h},Tl=[],Rl=Y(Jn,wn);Rl.transform=function(n,t){var e,r,i,u,a,o,f,c,s,l,h=t.fork(t.ALL),d=Vn(n),p=Kn(n),v=N(n.field),g=n.groupby.map(N),m=n.orderby.map(N),y=Qn(t.source,n.groupby,n.orderby),b=[],x=this.value,M=y.domain.length;for(a=0,c=y.length;a<c;++a)for(e=y[a],i=e.values,r=NaN,f=0;f<M;++f)if(null==e[f]){for(u=y.domain[f],l={_impute:!0},o=0,s=i.length;o<s;++o)l[g[o]]=i[o];for(o=0,s=u.length;o<s;++o)l[m[o]]=u[o];l[v]=isNaN(r)?r=d(e,p):r,b.push(Q(l))}return b.length&&(h.add=h.materialize(h.ADD).add.concat(b)),x.length&&(h.rem=h.materialize(h.REM).rem.concat(x)),this.value=b,h},Y(nt,hn);var ql=Y(et,wn);ql.transform=function(n,t){var e,r,i,u,a=t,o=n.as,f=n.fields,c=n.index,s=null==n.default?null:n.default,l=n.modified(),h=t.ADD;return 1===f.length?(r=f[0],i=o[0],e=function(n){var t=c.get(r(n));n[i]=null==t?s:t}):e=function(n){for(var t,e=0,r=f.length;e<r;++e)t=c.get(f[e](n)),n[o[e]]=null==t?s:t},l?(h=t.SOURCE,a=t.fork(t.ALL).reflow()):(u=f.some(function(n){return t.modified(n.fields)}),h|=u?t.MOD:0),t.visit(h,e),a.modifies(o)},Y(rt,hn);var Fl=Y(ut,wn);Fl.transform=function(n,t){return t},Y(at,wn),at.prototype.transform=function(n,t){return this.modified(n.modified()),this.value=n,t.fork()};var zl=Y(ot,Hn);zl.transform=function(n,t){var e=this,r=n.subflow,i=n.field;return(n.modified("field")||t.modified(i.fields))&&P("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.ADD,function(n){var u=e.subflow(n._id,r,t);i(n).forEach(function(n){u.add(Q(n))})}),t.visit(t.REM,function(n){var u=e.subflow(n._id,r,t);i(n).forEach(function(n){u.rem(n)})}),t};var Ll=Y(ft,wn);Ll.transform=function(n,t){if(n.modified()){var e=t.materialize().fork(t.MOD);return e.rem=t.rem.concat(this.value),e.source=this.value=f(n.start,n.stop,n.step).map(Q),e.add=t.add.concat(this.value),e}};var Ol=Y(ct,wn);Ol.transform=function(n,t){t.source||P("Rank transform requires an upstream data source.");var e,r=n.normalize,i=n.field,u={},a=-1;return i?(t.visit(t.SOURCE,function(n){var t=i(n);null==u[t]&&(u[t]=++a)}),t.visit(t.SOURCE,r&&--a?function(n){n.rank=u[i(n)]/a}:function(n){n.rank=u[i(n)]})):(a+=t.source.length,e=-1,t.visit(t.SOURCE,r&&a?function(n){n.rank=++e/a}:function(n){n.rank=++e})),t.reflow().modifies("rank")},Y(st,wn),st.prototype.transform=function(n,t){return n.modified()?t.reflow():t};var Pl=Y(lt,wn);Pl.transform=function(n,t){var e=t.stamp,r=t.fork(),i=this.value;return t.visit(t.ADD,function(n){var t=nn(n);i[n._id]=t,r.add.push(t)}),t.visit(t.MOD,function(n){r.mod.push(tn(n,i[n._id],e))}),t.visit(t.REM,function(n){r.rem.push(i[n._id]),delete i[n._id]}),r};var jl=Y(ht,wn);jl.transform=function(n,t){function e(n){var t,e;a.length<u?a.push(n):(e=~~(o*Math.random()),e<a.length&&e>=f&&(t=a[e],c[t._id]&&r.rem.push(t),a[e]=n)),++o}var r=t.fork(),i=n.modified("size"),u=n.size,a=this.value,o=this.count,f=0,c=a.reduce(function(n,t){return n[t._id]=1,n},{});if(t.rem.length&&(t.visit(t.REM,function(n){c[n._id]&&(c[n._id]=-1,r.rem.push(n)),--o}),a=a.filter(function(n){return c[n._id]!==-1})),(t.rem.length||i)&&a.length<u&&t.source&&(f=o=a.length,t.visit(t.SOURCE,function(n){c[n._id]||e(n)}),f=-1),i&&a.length>u){for(var s=0,l=a.length-u;s<l;++s)c[a[s]._id]=-1,r.rem.push(a[s]);a=a.slice(l)}return t.mod.length&&t.visit(t.MOD,function(n){c[n._id]&&r.mod.push(n)}),t.add.length&&t.visit(t.ADD,e),(t.add.length||f<0)&&(r.add=a.filter(function(n){return!c[n._id]})),this.count=o,this.value=r.source=a,r};var Il=Y(dt,wn);Il.transform=function(n,t){return this.value=t.source,t.changed()?t.fork():t.StopPropagation};var Yl=Y(pt,wn);Yl.transform=function(n,t){function e(n){i.set(r(n),n)}var r=n.field,i=this.value,u=!0;return n.modified("field")||t.modified(r.fields)?(this.value=i=Un(),t.visit(t.SOURCE,e)):t.changed()?(t.visit(t.ADD,e),t.visit(t.REM,function(n){i.remove(r(n))})):u=!1,this.modified(u),t};var Hl=Y(vt,wn);Hl.transform=function(n,t){var e=!this.value||n.modified("field")||n.modified("sort")||t.changed()||n.sort&&t.modified(n.sort.fields);e&&(this.value=(n.sort?t.source.slice().sort(n.sort):t.source).map(n.field))};var Bl=gt.prototype;Bl.add=function(n){this._add.push(n)},Bl.rem=function(n){this._rem.push(n)},Bl.values=function(){if(this._get=null,0===this._rem.length)return this._add;var n,t,e,r=this._add,i=this._rem,u=this._key,a=r.length,o=i.length,f=Array(a-o),c={};for(n=0;n<o;++n)c[i[n][u]]=1;for(n=0,t=0;n<a;++n)c[(e=r[n])[u]]?c[e[u]]=0:f[t++]=e;return this._rem=[],this._add=f},Bl.extent=function(n){if(this._get!==n||!this._ext){var t=this.values(),e=I(t,n);this._ext=[t[e[0]],t[e[1]]],this._get=n}return this._ext},Bl.argmin=function(n){return this.extent(n)[0]},Bl.argmax=function(n){return this.extent(n)[1]},Bl.min=function(n){var t=this.extent(n)[0];return null!=t?n(t):+(1/0)},Bl.max=function(n){var t=this.extent(n)[1];return null!=t?n(t):-(1/0)},Bl.quartile=function(n){return this._get===n&&this._q||(this._q=w(this.values(),n),this._get=n),this._q},Bl.q1=function(n){return this.quartile(n)[0]},Bl.q2=function(n){return this.quartile(n)[1]},Bl.q3=function(n){return this.quartile(n)[2]},Bl.ci=function(n){return this._get===n&&this._ci||(this._ci=b(this.values(),1e3,.05,n),this._get=n),this._ci},Bl.ci0=function(n){return this.ci(n)[0]},Bl.ci1=function(n){return this.ci(n)[1]};var $l={values:yt({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:yt({name:"count",set:"cell.num"}),missing:yt({name:"missing",set:"this.missing"}),valid:yt({name:"valid",set:"this.valid"}),distinct:yt({name:"distinct",init:"this.dmap = {}; this.distinct = 0;",add:"this.dmap[v] = 1 + (this.dmap[v] || (++this.distinct, 0));",rem:"if (!(--this.dmap[v])) --this.distinct;",set:"this.distinct"}),sum:yt({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:yt({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:yt({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:yt({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:yt({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:yt({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:yt({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:yt({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),ci0:yt({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:yt({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:yt({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:yt({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:yt({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:yt({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:yt({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:yt({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:yt({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Wl=Y(_t,wn);Wl.transform=function(n,t){var e,r=this,i=t.fork();return this.stamp=i.stamp,this.value&&((e=n.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=e?this.init(n):{},t.visit(t.SOURCE,function(n){r.add(n)})):(this.value=this.value||this.init(n),t.visit(t.REM,function(n){r.rem(n)}),t.visit(t.ADD,function(n){r.add(n)})),i.modifies(this._outputs),r._drop=n.drop!==!1,r.changes(i)},Wl.init=function(n){function t(n){for(var t,r=n.fields,u=0,a=r.length;u<a;++u)i[t=r[u]]||(i[t]=1,
e.push(t))}var e=this._inputs=[],r=this._outputs=[],i={};this._dims=F(n.groupby),this._dnames=this._dims.map(function(n){var e=N(n);return t(n),r.push(e),e}),this.cellkey=n.key?n.key:0===this._dims.length?function(){return""}:1===this._dims.length?this._dims[0]:kt,this._count=!0,this._measures=[];var u,a,o,f,c,s,l=n.fields||[null],h=n.ops||["count"],d=n.as||[],p=l.length,v={};for(p!==h.length&&P("Unmatched number of fields and aggregate ops."),s=0;s<p;++s)u=l[s],a=h[s],f=N(u),c=wt(a,f,d[s]),r.push(c),u&&(o=v[f],o||(t(u),o=v[f]=[],o.field=u,this._measures.push(o)),"count"!==a&&(this._count=!1),o.push(mt(a,c)));return this._measures=this._measures.map(function(n){return Mt(n,n.field)}),{}},Wl.cellkey=kt,Wl.cell=function(n,t){var e=this.value[n];return e?0===e.num&&this._drop?(e.stamp=this.stamp,this._adds[this._alen++]=e):e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e):(e=this.value[n]=this.newcell(n,t),this._adds[this._alen++]=e),e},Wl.newcell=function(n,t){var e={key:n,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[n]),stamp:this.stamp,store:!1};if(!this._count){var r,i=this._measures,u=i.length;for(e.agg=Array(u),r=0;r<u;++r)e.agg[r]=new i[r](e,e.tuple)}return e.store&&(e.data=new gt),e},Wl.newtuple=function(n,t){var e,r,i=this._dnames,u=this._dims,a={};for(e=0,r=u.length;e<r;++e)a[i[e]]=u[e](n);return t?en(t.tuple,a):Q(a)},Wl.add=function(n){var t,e,r,i=this.cellkey(n),u=this.cell(i,n);if(u.num+=1,!this._count)for(u.store&&u.data.add(n),t=u.agg,e=0,r=t.length;e<r;++e)t[e].add(t[e].get(n))},Wl.rem=function(n){var t,e,r,i=this.cellkey(n),u=this.cell(i,n);if(u.num-=1,!this._count)for(u.store&&u.data.rem(n),t=u.agg,e=0,r=t.length;e<r;++e)t[e].rem(t[e].get(n))},Wl.celltuple=function(n){var t,e,r,i=n.tuple;if(n.store&&n.data.values(),this._count)i.count=n.num;else for(t=n.agg,e=0,r=t.length;e<r;++e)t[e].set();return i},Wl.changes=function(n){var t,e,r,i,u=this._adds,a=this._mods,o=this._prev,f=this._drop,c=n.add,s=n.rem,l=n.mod;if(o)for(e in o)s.push(o[e].tuple);for(r=0,i=this._alen;r<i;++r)c.push(this.celltuple(u[r])),u[r]=null;for(r=0,i=this._mlen;r<i;++r)t=a[r],(0===t.num&&f?s:l).push(this.celltuple(t)),a[r]=null;return this._alen=this._mlen=0,this._prev=null,n};var Zl=Y(qt,wn);Zl.transform=function(n,t){if(this.index){var e=n.modified("fields")||n.fields.some(function(n){return t.modified(n.fields)});return e?this.reinit(n,t):this.eval(n,t)}return this.init(n,t)},Zl.init=function(n,t){var e,r=n.fields,i=n.query,u=i.length,a=this.index=Array(u);for(e=0;e<u;++e)a[e]=Ft(e,r[e],i[e]);return this.eval(n,t)},Zl.reinit=function(n,t){var e,r,i,u,a,o,f,c=t.materialize().fork(),s=n.fields,l=n.query,h=l.length,d=this.index,p=this.value,v=p.curr(),g=p.prev(),m=p.all(),y=c.rem=c.add,b=c.mod;if(g.set(v),t.rem.length&&(r=this.remove(n,t,c)),t.add.length&&p.add(t.add),t.mod.length)for(i={},e=t.mod,u=0,a=e.length;u<a;++u)i[e[u]._index]=1;for(f=0;f<h;++f)o=s[f],(!d[f]||n.modified("fields",f)||t.modified(o.fields))&&(d[f]=Ft(f,s[f],l[f]),d[f].add(t.source,v,0));for(u=0,a=p.data().length;u<a;++u)r[u]||(g[u]!==v[u]?y.push(u):i[u]&&v[u]!==m&&b.push(u));return p.mask=(1<<h)-1,c},Zl.eval=function(n,t){var e=t.materialize().fork(),r=this.index.length,i=0;return t.rem.length&&(this.remove(n,t,e),i|=(1<<r)-1),n.modified("query")&&!n.modified("fields")&&(i|=this.update(n,t,e)),t.add.length&&(this.insert(n,t,e),i|=(1<<r)-1),t.mod.length&&(this.modify(t,e),i|=(1<<r)-1),this.value.mask=i,e},Zl.insert=function(n,t,e){var r,i=t.add,u=this.value,a=this.index,o=e.add,f=u.size(),c=f+i.length,s=a.length;u.resize(c,s),u.add(i);var l=u.curr(),h=u.prev(),d=u.all();for(r=0;r<s;++r)a[r].add(i,l,f);for(;f<c;++f)h[f]=d,l[f]!==d&&o.push(f)},Zl.modify=function(n,t){var e,r,i,u=t.mod,a=this.value,o=a.curr(),f=a.all(),c=n.mod;for(e=0,r=c.length;e<r;++e)i=c[e]._index,o[i]!==f&&u.push(i)},Zl.remove=function(n,t,e){var r,i,u,a,o,f,c=this.index,s=this.value,l=s.curr(),h=s.prev(),d=s.all(),p={},v=e.rem,g=t.rem;for(r=0,u=g.length;r<u;++r)o=g[r]._index,p[o]=1,h[o]=f=l[o],l[o]=d,f!==d&&v.push(o);for(i=0,a=c.length;i<a;++i)c[i].remove(u,p);return this.reindex(t,u,p),p},Zl.reindex=function(n,t,e){var r=this.value,i=this.index;n.runAfter(function(){var n=r.remove(t,e);i.forEach(function(t){t.reindex(n)})})},Zl.update=function(n,t,e){var r,i,u=this.index,a=n.query,o=t.stamp,f=u.length,c=0;for(e.filters=0,i=0;i<f;++i)n.modified("query",i)&&(r=i,++c);if(1===c)c=u[r].one,this.incrementOne(u[r],a[r],e.add,e.rem);else for(i=0,c=0;i<f;++i)n.modified("query",i)&&(c|=u[i].one,this.incrementAll(u[i],a[i],o,e.add),e.rem=e.add);return c},Zl.incrementAll=function(n,t,e,r){var i,u,a,o=this.value,f=o.seen(),c=o.curr(),s=o.prev(),l=n.index(),h=n.bisect(n.range),d=n.bisect(t),p=d[0],v=d[1],g=h[0],m=h[1],y=n.one;if(p<g)for(i=p,u=Math.min(g,v);i<u;++i)a=l[i],f[a]!==e&&(s[a]=c[a],f[a]=e,r.push(a)),c[a]^=y;else if(p>g)for(i=g,u=Math.min(p,m);i<u;++i)a=l[i],f[a]!==e&&(s[a]=c[a],f[a]=e,r.push(a)),c[a]^=y;if(v>m)for(i=Math.max(p,m),u=v;i<u;++i)a=l[i],f[a]!==e&&(s[a]=c[a],f[a]=e,r.push(a)),c[a]^=y;else if(v<m)for(i=Math.max(g,v),u=m;i<u;++i)a=l[i],f[a]!==e&&(s[a]=c[a],f[a]=e,r.push(a)),c[a]^=y;n.range=t.slice()},Zl.incrementOne=function(n,t,e,r){var i,u,a,o=this.value,f=o.curr(),c=n.index(),s=n.bisect(n.range),l=n.bisect(t),h=l[0],d=l[1],p=s[0],v=s[1],g=n.one;if(h<p)for(i=h,u=Math.min(p,d);i<u;++i)a=c[i],f[a]^=g,e.push(a);else if(h>p)for(i=p,u=Math.min(h,v);i<u;++i)a=c[i],f[a]^=g,r.push(a);if(d>v)for(i=Math.max(h,v),u=d;i<u;++i)a=c[i],f[a]^=g,e.push(a);else if(d<v)for(i=Math.max(p,d),u=v;i<u;++i)a=c[i],f[a]^=g,r.push(a);n.range=t.slice()};var Xl=Y(zt,wn);Xl.transform=function(n,t){var e=~(n.ignore||0),r=n.filter,i=r.mask;if(0===(i&e))return t.StopPropagation;var u=t.fork(t.ALL),a=r.data(),o=r.curr(),f=r.prev(),c=function(n){return o[n]&e?null:a[n]};return u.filter(u.MOD,c),i&i-1?(u.filter(u.ADD,function(n){var t=o[n]&e,r=!t&&t^f[n]&e;return r?a[n]:null}),u.filter(u.REM,function(n){var t=o[n]&e,r=t&&!(t^(t^f[n]&e));return r?a[n]:null})):(u.filter(u.ADD,c),u.filter(u.REM,function(n){return(o[n]&e)===i?a[n]:null})),u};var Gl,Jl={"":jt,"%":function(n,t){return(100*n).toFixed(t)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.round(n).toString(10)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},g:function(n,t){return n.toPrecision(t)},o:function(n){return Math.round(n).toString(8)},p:function(n,t){return Yt(100*n,t)},r:Yt,s:It,X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}},Vl=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Bt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Kl,Ql,nh,th=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Zt({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var eh=Y(re,wn);eh.transform=function(n,t){if(null!=this.value&&!n.modified())return t.StopPropagation;var e=t.fork(),r=this.value,i=n.scale,u=null==n.count?10:n.count,a=n.format||Kt(i,u,n.formatSpecifier),o=n.values||Vt(i,u);return r&&(e.rem=r),r=o.map(function(n){return Q({value:n,label:a(n)})}),e.source=e.add=this.value=r,e};var rh=Y(ie,wn);rh.transform=function(n,t){var e=t.fork(t.NO_SOURCE),r=n.item||ue,i=n.key||V,u=this.value;return(n.modified("key")||t.modified(i))&&P("DataJoin does not support modified key function or fields."),t.visit(t.ADD,function(n){var t=i(n),a=u.get(t);a?(a.exit?e.add:e.mod).push(a):(u.set(t,a=r(n)),e.add.push(a)),a.datum=n,a.exit=!1}),t.visit(t.MOD,function(n){var t=i(n),r=u.get(t);r&&e.mod.push(r)}),t.visit(t.REM,function(n){var t=i(n),r=u.get(t);n===r.datum&&(e.rem.push(r),r.exit=!0)}),e};var ih=Y(ae,wn);ih.transform=function(n,t){var e=t.fork(t.ADD_REM),r=n.encoders.update||js,i=n.encoders.enter||js,u=n.encoders.exit||js,a=(t.encode?n.encoders[t.encode]:r)||js;if(i===js&&r===js||t.visit(t.ADD,function(t){i(t,n),r(t,n),a!==js&&a!==r&&a(t,n)}),u!==js&&t.visit(t.REM,function(t){u(t,n)}),a!==js){var o=t.MOD|(n.modified()?t.REFLOW:0);t.visit(o,function(t){a(t,n)&&e.mod.push(t)})}return e};var uh=Y(oe,wn);uh.transform=function(n,t){if(null!=this.value&&!n.modified())return t.StopPropagation;var e=t.fork(),r=this.value,i=n.size,u=n.scale,a=null==n.count?5:n.count,o=n.format||Kt(u,a,n.formatSpecifier),f=n.values||Vt(u,a),c=0;return L(i)||(i=O(i||8)),r&&(e.rem=r),r=f.map(function(n,t){var e=Q({index:t,label:o(n),size:i(n),total:Math.round(c),value:n});return c+=e.size,e}),e.source=e.add=this.value=r,e};var ah=Array.prototype,oh=ah.map,fh=ah.slice,ch={name:"implicit"},sh=.7,lh=1/sh,hh=/^#([0-9a-f]{3})$/,dh=/^#([0-9a-f]{6})$/,ph=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,vh=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,gh=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,mh=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,yh=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,bh=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,xh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};he(pe,ve,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),he(xe,be,de(pe,{brighter:function(n){return n=null==n?lh:Math.pow(lh,n),new xe(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?sh:Math.pow(sh,n),new xe(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(1===n?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}})),he(ke,we,de(pe,{brighter:function(n){return n=null==n?lh:Math.pow(lh,n),new ke(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?sh:Math.pow(sh,n),new ke(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new xe(Ne(n>=240?n-240:n+120,i,r),Ne(n,i,r),Ne(n<120?n+240:n-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Mh=Math.PI/180,_h=180/Math.PI,wh=18,kh=.95047,Nh=1,Eh=1.08883,Ah=4/29,Dh=6/29,Sh=3*Dh*Dh,Ch=Dh*Dh*Dh;he(De,Ae,de(pe,{brighter:function(n){return new De(this.l+wh*(null==n?1:n),this.a,this.b,this.opacity)},darker:function(n){return new De(this.l-wh*(null==n?1:n),this.a,this.b,this.opacity)},rgb:function(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,e=isNaN(this.b)?n:n-this.b/200;return n=Nh*Ce(n),t=kh*Ce(t),e=Eh*Ce(e),new xe(Ue(3.2404542*t-1.5371385*n-.4985314*e),Ue(-.969266*t+1.8760108*n+.041556*e),Ue(.0556434*t-.2040259*n+1.0572252*e),this.opacity)}})),he(Fe,qe,de(pe,{brighter:function(n){return new Fe(this.h,this.c,this.l+wh*(null==n?1:n),this.opacity)},darker:function(n){return new Fe(this.h,this.c,this.l-wh*(null==n?1:n),this.opacity)},rgb:function(){return Ee(this).rgb()}}));var Uh=-.14861,Th=1.78277,Rh=-.29227,qh=-.90649,Fh=1.97294,zh=Fh*qh,Lh=Fh*Th,Oh=Th*Rh-qh*Uh;he(Oe,Le,de(pe,{brighter:function(n){return n=null==n?lh:Math.pow(lh,n),new Oe(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?sh:Math.pow(sh,n),new Oe(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=isNaN(this.h)?0:(this.h+120)*Mh,t=+this.l,e=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(n),i=Math.sin(n);return new xe(255*(t+e*(Uh*r+Th*i)),255*(t+e*(Rh*r+qh*i)),255*(t+e*(Fh*r)),this.opacity)}}));var Ph=function n(t){function e(n,t){var e=r((n=be(n)).r,(t=be(t)).r),i=r(n.g,t.g),u=r(n.b,t.b),a=r(n.opacity,t.opacity);return function(t){return n.r=e(t),n.g=i(t),n.b=u(t),n.opacity=a(t),n+""}}var r=$e(t);return e.gamma=n,e}(1),jh=Ze(je),Ih=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yh=new RegExp(Ih.source,"g");rr(Be);var Hh=rr(We),Bh=[0,1],$h=new Date,Wh=new Date,Zh=Ur(function(){},function(n,t){n.setTime(+n+t)},function(n,t){return t-n});Zh.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?Ur(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):Zh:null};var Xh=1e3,Gh=6e4,Jh=36e5,Vh=864e5,Kh=6048e5,Qh=Ur(function(n){n.setTime(Math.floor(n/Xh)*Xh)},function(n,t){n.setTime(+n+t*Xh)},function(n,t){return(t-n)/Xh},function(n){return n.getUTCSeconds()}),nd=Ur(function(n){n.setTime(Math.floor(n/Gh)*Gh)},function(n,t){n.setTime(+n+t*Gh)},function(n,t){return(t-n)/Gh},function(n){return n.getMinutes()}),td=Ur(function(n){var t=n.getTimezoneOffset()*Gh%Jh;t<0&&(t+=Jh),n.setTime(Math.floor((+n-t)/Jh)*Jh+t)},function(n,t){n.setTime(+n+t*Jh)},function(n,t){return(t-n)/Jh},function(n){return n.getHours()}),ed=Ur(function(n){n.setHours(0,0,0,0)},function(n,t){n.setDate(n.getDate()+t)},function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Gh)/Vh},function(n){return n.getDate()-1}),rd=Tr(0),id=Tr(1),ud=Ur(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,t){n.setMonth(n.getMonth()+t)},function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())},function(n){return n.getMonth()}),ad=Ur(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n,t){return t.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});ad.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Ur(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var od=Ur(function(n){n.setUTCSeconds(0,0)},function(n,t){n.setTime(+n+t*Gh)},function(n,t){return(t-n)/Gh},function(n){return n.getUTCMinutes()}),fd=Ur(function(n){n.setUTCMinutes(0,0,0)},function(n,t){n.setTime(+n+t*Jh)},function(n,t){return(t-n)/Jh},function(n){return n.getUTCHours()}),cd=Ur(function(n){n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+t)},function(n,t){return(t-n)/Vh},function(n){return n.getUTCDate()-1}),sd=Rr(0),ld=Rr(1),hd=Ur(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCMonth(n.getUTCMonth()+t)},function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())},function(n){return n.getUTCMonth()}),dd=Ur(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)},function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});dd.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Ur(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var pd,vd,gd,md,yd,bd={"-":"",_:" ",0:"0"},xd=/^\s*\d+/,Md=/^%/,_d=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Ui({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var wd="%Y-%m-%dT%H:%M:%S.%LZ",kd=(Date.prototype.toISOString?Ti:md(wd),+new Date("2000-01-01T00:00:00.000Z")?Ri:yd(wd),1e3),Nd=60*kd,Ed=60*Nd,Ad=24*Ed,Dd=7*Ad,Sd=30*Ad,Cd=365*Ad,Ud=Pi("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Td=Pi("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Rd=Pi("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),qd=Pi("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Fd=Hh(Le(300,.5,0),Le(-240,.5,1)),zd=Hh(Le(-100,.75,.35),Le(80,1.5,.8)),Ld=Hh(Le(260,.75,.35),Le(80,1.5,.8)),Od=Le(),Pd=Ii(Pi("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),jd=Ii(Pi("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Id=Ii(Pi("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Yd=Ii(Pi("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Hd={band:ce,point:le,identity:gr,linear:vr,log:kr,ordinal:fe,pow:Er,sqrt:Ar,quantile:Dr,quantize:Sr,threshold:Cr,time:Li,utc:Oi,sequential:Yi,index:Hi},Bd=$i("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),$d=$i("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Wd=$i("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Zd=$i("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Xd=$i("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Gd=$i("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Jd=$i("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Vd=$i("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Kd=Wi("5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30"),Qd=Wi("40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b"),np=Wi("8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419"),tp=Wi("7f3b08b35806e08214fdb863fee0b6f7f7f7d8daebb2abd28073ac5427882d004b"),ep=Wi("67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061"),rp=Wi("67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a"),ip=Wi("a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695"),up=Wi("a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837"),ap=Wi("9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2"),op=Wi("f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b"),fp=Wi("f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b"),cp=Wi("f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081"),sp=Wi("fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000"),lp=Wi("fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636"),hp=Wi("fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858"),dp=Wi("f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f"),pp=Wi("fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a"),vp=Wi("ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58"),gp=Wi("ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529"),mp=Wi("ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506"),yp=Wi("ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026"),bp=Wi("f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b"),xp=Wi("f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b"),Mp=Wi("fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000"),_p=Wi("fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d"),wp=Wi("fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d"),kp=Wi("fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704"),Np={category10:Ud,category20:qd,category20b:Td,category20c:Rd,accent:Bd,dark2:$d,paired:Wd,pastel1:Zd,pastel2:Xd,set1:Gd,set2:Jd,set3:Vd,cubehelix:Fd,rainbow:ji,warm:zd,cool:Ld,viridis:Pd,magma:jd,inferno:Id,plasma:Yd,brbg:Kd,prgn:Qd,piyg:np,puor:tp,rdbu:ep,rdgy:rp,rdylbu:ip,rdylgn:up,spectral:ap,bugn:op,bupu:fp,gnbu:cp,orrd:sp,pubugn:lp,pubu:hp,purd:dp,rdpu:pp,ylgnbu:vp,ylgn:gp,ylorbr:mp,ylorrd:yp,blues:bp,greens:xp,greys:Mp,purples:_p,reds:wp,oranges:kp},Ep={set:1,modified:1,clear:1,type:1,scheme:1,domain:1,domainMin:1,domainMax:1,nice:1,zero:1,range:1,round:1,bandSize:1},Ap=Y(Xi,wn);Ap.transform=function(n,t){var e,r=this.value;(!r||n.modified("type")||n.modified("scheme"))&&(this.value=r=Gi(n.type,n.scheme,t));for(e in n)Ep[e]||(L(r[e])?r[e](n[e]):t.dataflow.warn("Unsupported scale property: "+e));Vi(r,n,Ji(r,n))};var Dp=bu.prototype=xu.prototype;Dp.copy=function(){var n,t,e=new xu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=Mu(r),e;for(n=[{source:r,target:e._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?n.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=Mu(t));return e},Dp.add=tu,Dp.addAll=ru,Dp.cover=iu,Dp.data=uu,Dp.extent=au,Dp.find=fu,Dp.remove=cu,Dp.removeAll=su,Dp.root=lu,Dp.size=hu,Dp.visit=du,Dp.visitAfter=pu,Dp.x=gu,Dp.y=yu;var Sp={value:function(){}};Du.prototype=Au.prototype={constructor:Du,on:function(n,t){var e,r=this._,i=Su(n+"",r),u=-1,a=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++u<a;)if(e=(n=i[u]).type)r[e]=Uu(r[e],n.name,t);else if(null==t)for(e in r)r[e]=Uu(r[e],n.name,null);return this}for(;++u<a;)if((e=(n=i[u]).type)&&(e=Cu(r[e],n.name)))return e}},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Du(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),u=0;u<e;++u)i[u]=arguments[u+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=this._[n],u=0,e=r.length;u<e;++u)r[u].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,u=r.length;i<u;++i)r[i].value.apply(t,e)}};var Cp,Up,Tp=0,Rp=0,qp=0,Fp=1e3,zp=0,Lp=0,Op=0,Pp="object"==typeof performance&&performance.now?performance:Date,jp="function"==typeof requestAnimationFrame?Pp===Date?function(n){requestAnimationFrame(function(){n(Pp.now())})}:requestAnimationFrame:function(n){setTimeout(n,17)};qu.prototype=Fu.prototype={constructor:qu,restart:function(n,t,e){if("function"!=typeof n)throw new TypeError("callback is not a function");e=(null==e?Tu():+e)+(null==t?0:+t),this._next||Up===this||(Up?Up._next=this:Cp=this,Up=this),this._call=n,this._time=e,ju()},stop:function(){this._call&&(this._call=null,this._time=1/0,ju())}};var Ip=10,Yp=Math.PI*(3-Math.sqrt(5)),Hp=Un().set("center",Ki).set("collide",ku).set("nbody",Bu).set("link",Eu).set("x",$u).set("y",Wu),Bp="forces",$p=["alpha","alphaMin","alphaTarget","velocityDecay","drag","forces"],Wp=["static","iterations"],Zp=["x","y","vx","vy","fx","fy"],Xp=Y(Zu,wn);Xp.transform=function(n,t){var e=this.value,r=t.changed(t.ADD_REM),i=n.modified($p),u=n.iterations||300;if(e?(r&&(t.modifies("index"),e.nodes(t.source)),i&&Ju(e,n)):(this.value=e=Gu(t.source,n),e.on("tick",Xu(t.dataflow,this)),n.static||(r=!0,e.tick()),t.modifies("index")),n.modified("fixed")&&(e.nodes().forEach(function(n){n.fx=null,n.fy=null}),F(n.fixed).forEach(function(n){n.fx=n.x,n.fy=n.y})),i||r||t.changed()||n.modified(Wp))if(e.alpha(Math.max(e.alpha(),n.alpha||1)).alphaDecay(1-Math.pow(e.alphaMin(),1/u)),n.static)for(e.stop();--u>=0;)e.tick();else if(e.stopped()&&e.restart(),!r)return t.StopPropagation;return t.reflow().modifies(Zp)};var Gp=Un().set("line",ra).set("line-radial",ia).set("curve",ua).set("curve-radial",aa).set("orthogonal-horizontal",oa).set("orthogonal-vertical",fa).set("orthogonal-radial",ca).set("diagonal-horizontal",sa).set("diagonal-vertical",la).set("diagonal-radial",ha),Jp=Y(ea,wn);
Jp.transform=function(n,t){function e(n){n.path=c(r(n),i(n),u(n),a(n))}var r=n.sourceX||Ku,i=n.sourceY||Qu,u=n.targetX||na,a=n.targetY||ta,o=n.orient||"vertical",f=n.shape||"line",c=Gp.get(f+"-"+o)||Gp.get(f);return c||P("LinkPath unsupported type: "+n.shape+"-"+n.orient),n.modified()?t.visit(t.SOURCE,e).reflow():t.visit(t.ALL,e),t.modifies("path")};var Vp=Y(da,wn);Vp.transform=function(n,t){var e,r,i,u=n.field||Os,a=n.startAngle||0,o=null!=n.endAngle?n.endAngle:2*Math.PI,c=t.source,s=c.map(u),l=s.length,h=a,d=(o-a)/y(s),p=f(l);for(n.sort&&p.sort(function(n,t){return s[n]-s[t]}),e=0;e<l;++e)i=s[p[e]],r=c[p[e]],r.startAngle=h,r.endAngle=h+=i*d;return this.value=s,t.reflow().modifies(["startAngle","endAngle"])};var Kp="center",Qp="normalize",nv=Y(pa,wn);nv.transform=function(n,t){var e,r,i,u,a,o,f,c,s,l,h,d,p,v=n.field,g=n.offset;for(e=va(t.source,n.groupby,n.sort,v),i=0,a=e.length,f=e.max;i<a;++i)for(r=e[i],c=g===Kp?(f-r.sum)/2:0,s=g===Qp?1/r.sum:1,d=c,p=0,u=0,o=r.length;u<o;++u)l=r[u],h=d,p+=v(l),d=s*p+c,l.y0=h,l.y1=d;return t.reflow().modifies(["y0","y1"])},ba.prototype={constructor:ba,insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=wa(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(Ma(this,e),n=e,e=n.U),e.C=!1,r.C=!0,_a(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(_a(this,e),n=e,e=n.U),e.C=!1,r.C=!0,Ma(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,i=n.U,u=n.L,a=n.R;if(e=u?a?wa(a):u:a,i?i.L===n?i.L=e:i.R=e:this._=e,u&&a?(r=e.C,e.C=n.C,e.L=u,u.U=e,e!==a?(i=e.U,e.U=n.U,n=e.R,i.L=n,e.R=a,a.U=e):(e.U=i,i=e,n=e.R)):(r=n.C,n=e),n&&(n.U=i),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,Ma(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,_a(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Ma(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,_a(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Ma(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,_a(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}};var tv,ev,rv,iv,uv,av=[],ov=[],fv=1e-6,cv=1e-12;Xa.prototype={constructor:Xa,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(e){return Ta(t,n[e])});return e.data=t.site.data,e})},triangles:function(){var n=[],t=this.edges;return this.cells.forEach(function(e,r){for(var i,u=e.site,a=e.halfedges,o=-1,f=a.length,c=t[a[f-1]],s=c.left===u?c.right:c.left;++o<f;)i=s,c=t[a[o]],s=c.left===u?c.right:c.left,r<i.index&&r<s.index&&Wa(u,i,s)<0&&n.push([u.data,i.data,s.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})}};var sv=Y(Ja,wn),lv=["x","y","size","extent"];sv.transform=function(n,t){var e,r,i,u,a,o=t.source;for(e=Ga(),u=0,a=lv.length;u<a;++u)i=lv[u],i in n&&e[i](n[i]);for(this.value=e=e(o),r=e.polygons(),u=0,a=o.length;u<a;++u)o[u].path=r[u]?"M"+r[u].join("L")+"Z":null;return t.reflow().modifies("path")},Ka.prototype={constructor:Ka,reset:function(){this.s=this.t=0},add:function(n){Qa(xv,n,this.t),Qa(this,xv.s,this.s),this.s?this.t+=xv.t:this.s=xv.t},valueOf:function(){return this.s}};var hv,dv,pv,vv,gv,mv,yv,bv,xv=new Ka,Mv=1e-6,_v=Math.PI,wv=_v/2,kv=_v/4,Nv=2*_v,Ev=180/_v,Av=_v/180,Dv=Math.abs,Sv=Math.atan,Cv=Math.atan2,Uv=Math.cos,Tv=Math.ceil,Rv=Math.exp,qv=Math.log,Fv=Math.pow,zv=Math.sin,Lv=Math.sign||function(n){return n>0?1:n<0?-1:0},Ov=Math.sqrt,Pv=Math.tan,jv={Feature:function(n,t){ro(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)ro(e[r].geometry,t)}},Iv={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){io(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)io(e[r],t,0)},Polygon:function(n,t){uo(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)uo(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)ro(e[r],t)}};yo.invert=yo;var Yv,Hv,Bv,$v,Wv,Zv,Xv,Gv,Jv=1e9,Vv=-Jv,Kv=Va(),Qv=Va(),ng={point:eo,lineStart:eo,lineEnd:eo,polygonStart:function(){ng.lineStart=zo,ng.lineEnd=Po},polygonEnd:function(){ng.lineStart=ng.lineEnd=ng.point=eo,Kv.add(Dv(Qv)),Qv.reset()},result:function(){var n=Kv/2;return Kv.reset(),n}},tg=1/0,eg=tg,rg=-tg,ig=rg,ug={point:jo,lineStart:eo,lineEnd:eo,polygonStart:eo,polygonEnd:eo,result:function(){var n=[[tg,eg],[rg,ig]];return rg=ig=-(eg=tg=1/0),n}},ag=0,og=0,fg=0,cg=0,sg=0,lg=0,hg=0,dg=0,pg=0,vg={point:Io,lineStart:Yo,lineEnd:$o,polygonStart:function(){vg.lineStart=Wo,vg.lineEnd=Zo},polygonEnd:function(){vg.point=Io,vg.lineStart=Yo,vg.lineEnd=$o},result:function(){var n=pg?[hg/pg,dg/pg]:lg?[cg/lg,sg/lg]:fg?[ag/fg,og/fg]:[NaN,NaN];return ag=og=fg=cg=sg=lg=hg=dg=pg=0,n}},gg=Va(),mg=tf(function(){return!0},uf,of,[-_v,-wv]);sf.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var yg=16,bg=Uv(30*Av),xg=cf({point:function(n,t){this.stream.point(n*Av,t*Av)}}),Mg=_f(function(n){return Ov(2/(1+n))});Mg.invert=wf(function(n){return 2*to(n/2)});var _g=_f(function(n){return(n=no(n))&&n/zv(n)});_g.invert=wf(function(n){return n}),Ef.invert=function(n,t){return[n,2*Sv(Rv(t))-wv]},Tf.invert=Tf,zf.invert=wf(Sv),Of.invert=wf(to),jf.invert=wf(function(n){return 2+Sv(n)}),Yf.invert=function(n,t){return[-t,2*Sv(Rv(n))-wv]};var wg=Y(Bf,wn);wg.transform=function(n,t){function e(n){n[o]=u(a(n))}var r,i=t.fork(t.ALL),u=this.value,a=n.field||zs,o=n.as||"path";return!u||n.modified()?(this.value=u=Qo().pointRadius(n.pointRadius).projection(n.projection),i.materialize().reflow().visit(i.SOURCE,e)):(r=a===zs||t.modified(a.fields),i.visit(r?i.ADD_MOD:i.ADD,e)),i.modifies(o)};var kg=Y($f,wn);kg.transform=function(n,t){function e(n){var t=i([u(n),a(n)]);n[f]=t[0],n[c]=t[1]}var r,i=n.projection,u=n.fields[0],a=n.fields[1],o=n.as||["x","y"],f=o[0],c=o[1];return n.modified()?t.materialize().reflow().visit(t.SOURCE,e):(r=t.modified(u.fields)||t.modified(a.fields),t.visit(r?t.ADD_MOD:t.ADD,e)),t.modifies(o)};var Ng=Y(Wf,wn);Ng.transform=function(n,t){var e=t.fork(t.ALL),r=this.value,i=n.field||T("datum"),u=n.as||"shape",a=e.ADD_MOD;return r&&!n.modified()||(this.value=r=Zf(Qo().pointRadius(n.pointRadius).projection(n.projection),i),e.materialize().reflow(),a=e.SOURCE),e.visit(a,function(n){n[u]=r}),e.modifies(u)};var Eg=Y(Xf,wn);Eg.transform=function(n,t){var e,r=t.fork(),i=this.value,u=this.generator;if(!i.length||n.modified())for(var a in n)L(u[a])&&u[a](n[a]);return e=u(),i.length?(e._id=i[0]._id,r.mod.push(e)):r.add.push(Q(e)),i[0]=e,r.source=i,r};var Ag={albers:bf,albersusa:Mf,azimuthalequalarea:kf,azimuthalequidistant:Nf,conicconformal:Uf,conicequalarea:yf,conicequidistant:Ff,equirectangular:Rf,gnomonic:Lf,mercator:Af,orthographic:Pf,stereographic:If,transversemercator:Hf},Dg=["clipAngle","clipExtent","scale","translate","center","rotate","precision"],Sg=Y(Jf,wn);Sg.transform=function(n){var t=this.value;!t||n.modified("type")?(this.value=t=Vf(n.type),Dg.forEach(function(e){null!=n[e]&&t[e](n[e])})):Dg.forEach(function(e){n.modified(e)&&t[e](n[e])})},wc.prototype=yc.prototype={constructor:wc,each:oc,eachAfter:cc,eachBefore:fc,sum:sc,sort:lc,path:hc,ancestors:pc,descendants:vc,leaves:gc,links:mc,copy:bc};var Cg="$",Ug={depth:-1},Tg={};is.prototype=Object.create(wc.prototype);var Rg=(1+Math.sqrt(5))/2,qg=function n(t){function e(n,e,r,i,u){fs(t,n,e,r,i,u)}return e.ratio=function(t){return n((t=+t)>1?t:1)},e}(Rg),Fg=function n(t){function e(n,e,r,i,u){if((a=n._squarify)&&a.ratio===t)for(var a,o,f,c,s,l=-1,h=a.length,d=n.value;++l<h;){for(o=a[l],f=o.children,c=o.value=0,s=f.length;c<s;++c)o.value+=f[c].value;o.dice?Zc(o,e,r,i,r+=(u-r)*o.value/d):os(o,e,r,e+=(i-e)*o.value/d,u),d-=o.value}else n._squarify=a=fs(t,n,e,r,i,u),a.ratio=t}return e.ratio=function(t){return n((t=+t)>1?t:1)},e}(Rg),zg=Y(hs,wn);zg.transform=function(n,t){if(t.source||P("Nest transform requires an upstream data source."),!this.value||n.modified()||t.changed()){var e=F(n.keys).reduce(function(n,t){return n.key(t),n},Tn()).entries(t.source),r=yc({values:e},ds),i=r.lookup={};r.each(function(n){"_id"in n.data&&(i[n.data._id]=n)}),this.value=r}t.source.root=this.value};var Lg=Y(ps,wn);Lg.transform=function(n,t){t.source||P("Stratify transform requires an upstream data source.");var e=!this.value||n.modified()||t.changed(t.ADD_REM)||t.modified(n.key.fields)||t.modified(n.parentKey.fields);if(e){var r=Vc().id(n.key).parentId(n.parentKey)(t.source),i=r.lookup={};r.each(function(n){i[n.data._id]=n}),this.value=r}t.source.root=this.value};var Og=Y(vs,wn);Og.transform=function(n,t){function e(n){var t=u[n];t&&(a[n]=1,o.mod.push(t))}t.source&&t.source.root||P("TreeLinks transform requires a backing tree data source.");var r=t.source.root,i=r.lookup,u=this.value,a={},o=t.fork();return t.visit(t.REM,function(n){var t=u[n._id];t&&(delete u[n._id],o.rem.push(t))}),t.visit(t.ADD,function(n){var t,e=n._id;(t=gs(i[e]))&&(o.add.push(u[e]=Q({source:t,target:n})),a[e]=1)}),t.visit(t.MOD,function(n){var t=n._id,r=i[t],u=r.children;if(e(t),u)for(var o=0,f=u.length;o<f;++o)a[t=u[o].data._id]||e(t)}),o};var Pg=Un().set("binary",ss).set("dice",Zc).set("slice",os).set("slicedice",ls).set("squarify",qg).set("resquarify",Fg),jg=Un().set("tidy",as).set("cluster",ac),Ig=Y(bs,wn);Ig.transform=function(n,t){t.source&&t.source.root||P(this.constructor.name+" transform requires a backing tree data source.");var e=this.layout(n.method),r=t.source.root;n.field&&r.sum(n.field),n.sort&&r.sort(n.sort),this.setParams(e,n);try{this.value=e(r)}catch(n){P(n)}return r.each(this.setFields),t.reflow().modifies(this.setParams.fields)},Y(_s,bs),_s.prototype.layout=ms,_s.prototype.setParams=xs(["size","nodeSize","separation"]),_s.prototype.setFields=Ms(["x","y"]),Y(ws,bs),ws.prototype.layout=ys,ws.prototype.setParams=xs(["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"]),ws.prototype.setFields=Ms(["x0","y0","x1","y1"]),Y(ks,bs),ks.prototype.layout=Xc,ks.prototype.setParams=xs(["size","round","padding"]),ks.prototype.setFields=ws.prototype.setFields,Y(Ns,bs),Ns.prototype.layout=Yc,Ns.prototype.setParams=xs(["size","padding"]),Ns.prototype.setFields=Ms(["x","y","r"]),n.Tuple=Ws,n.version=Es,n.UniqueList=G,n.changeset=un,n.Dataflow=bn,n.EventStream=pn,n.Parameters=sn,n.Pulse=an,n.MultiPulse=cn,n.Operator=hn,n.Transform=wn,n.Apply=kn,n.Bin=Nn,n.Collect=An,n.Compare=Dn,n.CountIndex=On,n.CountPattern=Pn,n.Extent=In,n.Facet=Hn,n.Field=Bn,n.Filter=Wn,n.Fold=Zn,n.Generate=Gn,n.Impute=Jn,n.Key=nt,n.Lookup=et,n.MultiExtent=rt,n.NoOp=ut,n.Params=at,n.PreFacet=ot,n.Range=ft,n.Rank=ct,n.Reflow=st,n.Relay=lt,n.Sample=ht,n.Sieve=dt,n.Subflow=Yn,n.TupleIndex=pt,n.Values=vt,n.Aggregate=_t,n.CrossFilter=qt,n.ResolveFilter=zt,n.AxisTicks=re,n.DataJoin=ie,n.Encode=ae,n.LegendEntries=oe,n.Scale=Xi,n.scale=Bi,n.scheme=Zi,n.Force=Zu,n.LinkPath=ea,n.Pie=da,n.Stack=pa,n.Voronoi=Ja,n.GeoPath=Bf,n.GeoPoint=$f,n.GeoShape=Wf,n.Graticule=Xf,n.Projection=Jf,n.projection=Gf,n.Nest=hs,n.Stratify=ps,n.TreeLinks=vs,n.Pack=Ns,n.Partition=ks,n.Tree=_s,n.Treemap=ws,n.bin=t,n.bootstrapCI=b,n.randomInteger=x,n.randomNormal=M,n.randomUniform=_,n.quartiles=w,n.accessor=k,n.accessorName=N,n.accessorFields=E,n.id=Fs,n.identity=zs,n.zero=Ls,n.one=Os,n.truthy=Ps,n.falsy=js,n.logger=q,n.None=Is,n.Warn=Ys,n.Info=Hs,n.Debug=Bs,n.array=F,n.compare=z,n.constant=O,n.error=P,n.extend=j,n.extentIndex=I,n.field=T,n.inherits=Y,n.isArray=Rs,n.isFunction=L,n.isNumber=H,n.isObject=S,n.isString=C,n.key=B,n.merge=$,n.peek=W,n.splitAccessPath=A,n.stringValue=U,n.toSet=Z,n.visitArray=X,Object.defineProperty(n,"__esModule",{value:!0})});